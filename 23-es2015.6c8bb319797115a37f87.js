(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{NZT4:function(e,t,n){"use strict";n.r(t),n.d(t,"TopBannerModule",(function(){return N}));var i=n("SVse"),a=n("iInd"),r=n("8Y7J"),c=n("8yjs"),o=n("mb36"),s=n("EApP"),b=n("IheW"),l=n("lX9O");let d=(()=>{class e{constructor(e,t,n,i,a,r){this.apiEndPointsService=e,this.baseService=t,this.toastr=n,this.http=i,this.router=a,this.authService=r,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}get_banners(e,t,n,i){return this.http.get(this.apiEndPointsService.BANNER.FETCH(e,t,n,i)+this.accessToken)}changeStatus(e){return this.http.patch(this.apiEndPointsService.BANNER.CHANGE_CHANGE(null==e?void 0:e.id,!(null==e?void 0:e.active))+this.accessToken,e)}remove_banner(e){return this.http.delete(this.apiEndPointsService.BANNER.DELETE(e)+this._accessToken)}}return e.\u0275fac=function(t){return new(t||e)(r.ac(c.a),r.ac(o.a),r.ac(s.b),r.ac(b.a),r.ac(a.f),r.ac(l.a))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n("s7LF");let h=(()=>{class e{constructor(e,t,n,i,a,r,c){this.apiEndPointsService=e,this.baseService=t,this.toastr=n,this.http=i,this.router=a,this.authService=r,this.formBuilder=c}initializeForm(){return this.formBuilder.group({image:new u.e(null,[u.v.required]),link:new u.e(null,[u.v.required]),page_to_open:new u.e(null,[u.v.required]),active:new u.e(null)})}populateForm(e){return this.formBuilder.group({id:new u.e(null==e?void 0:e.id),image:new u.e(null==e?void 0:e.image),link:new u.e(null==e?void 0:e.link),page_to_open:new u.e(null==e?void 0:e.page_to_open),active:new u.e(null==e?void 0:e.active)})}create_banner(e){return this.http.post(this.apiEndPointsService.BANNER.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}update_banner(e,t){return this.http.patch(this.apiEndPointsService.BANNER.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}banner_details(e){return this.http.get(this.apiEndPointsService.BANNER.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(r.ac(c.a),r.ac(o.a),r.ac(s.b),r.ac(b.a),r.ac(a.f),r.ac(l.a),r.ac(u.d))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n("wTG2"),g=n("G0yt"),S=n("a3+x");const m=function(e){return["/top-banner/add",e]};function v(e,t){if(1&e){const e=r.Tb();r.Sb(0,"tr"),r.Sb(1,"td"),r.Nb(2,"img",31),r.Rb(),r.Sb(3,"td"),r.Lc(4),r.Rb(),r.Sb(5,"td"),r.Lc(6),r.Rb(),r.Sb(7,"td"),r.Lc(8),r.Rb(),r.Sb(9,"td"),r.Sb(10,"button",32),r.dc("click",(function(){r.zc(e);const n=t.$implicit;return r.hc(2).onChangeStatus(n)})),r.Nb(11,"i",33),r.Lc(12),r.Rb(),r.Rb(),r.Sb(13,"td"),r.Sb(14,"a",34),r.Sb(15,"i",35),r.Lc(16,"\ue254"),r.Rb(),r.Rb(),r.Rb(),r.Sb(17,"td",36),r.Sb(18,"button",37),r.dc("confirm",(function(){r.zc(e);const n=t.$implicit;return r.hc(2).onRemoveStock(n)}))("cancel",(function(){return r.zc(e),r.hc(2).cancelClicked=!0})),r.Sb(19,"i",35),r.Lc(20,"\ue872"),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&e){const e=t.$implicit,n=r.hc(2);r.zb(2),r.nc("src",null==e?null:e.image,r.Bc),r.zb(2),r.Mc(null==e?null:e.link),r.zb(2),r.Mc(null==e?null:e.page_to_open),r.zb(2),r.Mc(null!=e&&e.active?"Active":"Inactive"),r.zb(4),r.Nc(" ",null!=e&&e.active?"Inactive":"Active"," "),r.zb(2),r.mc("routerLink",r.qc(8,m,null==e?null:e.id)),r.zb(4),r.mc("popoverTitle",n.popoverTitle)("popoverMessage",n.popoverMessage)}}function f(e,t){if(1&e&&(r.Sb(0,"div",27),r.Sb(1,"table",28),r.Sb(2,"thead",29),r.Sb(3,"tr"),r.Sb(4,"th"),r.Lc(5," Image "),r.Rb(),r.Sb(6,"th"),r.Lc(7," Link "),r.Rb(),r.Sb(8,"th"),r.Lc(9," Page To Open "),r.Rb(),r.Sb(10,"th"),r.Lc(11," Status "),r.Rb(),r.Sb(12,"th"),r.Lc(13," Change Status "),r.Rb(),r.Sb(14,"th"),r.Lc(15," Update "),r.Rb(),r.Sb(16,"th"),r.Lc(17," Delete "),r.Rb(),r.Rb(),r.Rb(),r.Sb(18,"tbody"),r.Jc(19,v,21,10,"tr",30),r.Rb(),r.Rb(),r.Rb()),2&e){const e=r.hc();r.zb(19),r.mc("ngForOf",null==e.banners?null:e.banners.content)}}function R(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",38),r.Sb(2,"div",39),r.Sb(3,"div",40),r.Sb(4,"span",41),r.Lc(5,"Loading..."),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb())}function k(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",38),r.Sb(2,"div",42),r.Nb(3,"img",43),r.Rb(),r.Rb(),r.Rb())}const y=function(){return["/top-banner/add"]};let _=(()=>{class e{constructor(e,t,n,i){this.bannerListService=e,this.baseService=t,this.toastr=n,this.createBannerService=i,this.loading=!0,this.size=10,this.page=1,this.search_key="",this.popoverTitle="Are you sure?",this.popoverMessage="Are you really sure you want to delete this?",this.cancelClicked=!1,this.selectedStatus=null,this.status_list=[!0,!1]}ngOnInit(){this.filter()}filter(){this.get_banners(this.page-1,this.size,this.search_key,this.selectedStatus)}get_banners(e,t,n,i){this.loading=!0,this.bannerListService.get_banners(e,t,n,i).subscribe(e=>{this.banners=e,this.loading=!1},e=>{this.loading=!1,this.baseService.handleError(e)})}onPaginateChange(e){this.page=e,this.get_banners(this.page-1,this.size,this.search_key,this.selectedStatus)}onRemoveStock(e){this.bannerListService.remove_banner(e.id).subscribe(e=>{this.toastr.success("Deleted Successfully!",""),this.ngOnInit()},e=>{this.baseService.handleError(e)})}formatDate(e){let t=""+(new Date(e).getMonth()+1),n=""+new Date(e).getDate(),i=new Date(e).getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,i].join("-")}onChangeStatus(e){confirm("Do you want to change the status")&&this.bannerListService.changeStatus(e).subscribe(e=>{this.toastr.success("Changed Status Successfully!",""),this.ngOnInit()},e=>{this.baseService.handleError(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(d),r.Mb(o.a),r.Mb(s.b),r.Mb(h))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-banner-list"]],decls:42,vars:13,consts:[[1,"row"],[1,"col-lg-12","grid-margin","stretch-card","mb-0"],[1,"card"],[1,"card-body"],[1,"card-title","row"],[1,"col-md-2"],["type","button",1,"btn","btn-gradient-success","btn-rounded","btn-fw","btn-sm",3,"routerLink"],[1,"col-md-6","text-center"],[1,"col-md-4"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","search by name","aria-label","username",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","btn-gradient-primary",3,"click"],[1,"col-md-11"],[1,"col-md-3","pr-md-0"],[1,"label-text"],["placeholder","Select",3,"items","ngModel","virtualScroll","ngModelChange"],[1,"col-md-1"],[2,"color","#FFF"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa","fa-arrow-right"],["class","table-responsive pt-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-12","grid-margin","stretch-card"],[1,"card-body","pt-0"],["aria-label","Default pagination",1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","pageChange"],[1,"table-responsive","pt-3"],[1,"table","table-striped","table-bordered"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["alt","images","width","100%","height","auto",1,"img-fluid",3,"src"],["type","button",1,"btn","btn-info","btn-sm","active",3,"click"],[1,"fa","fa-exchange"],["title","Edit","data-toggle","tooltip",1,"edit",3,"routerLink"],[1,"material-icons"],[1,"p-0"],["mwlConfirmationPopover","","placement","left",1,"btn","delete",3,"popoverTitle","popoverMessage","confirm","cancel"],[1,"col-12"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"text-center"],["src","./assets/icon/nodatafound.jpg","alt","not found image",1,"rounded",2,"width","400px","height","300px"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.Sb(4,"div",4),r.Sb(5,"div",5),r.Sb(6,"button",6),r.Lc(7,"Add "),r.Rb(),r.Rb(),r.Sb(8,"div",7),r.Sb(9,"h2"),r.Lc(10,"Banners"),r.Rb(),r.Rb(),r.Sb(11,"div",8),r.Sb(12,"div",9),r.Sb(13,"div",10),r.Sb(14,"input",11),r.dc("keyup.enter",(function(){return t.filter()}))("ngModelChange",(function(e){return t.search_key=e})),r.Rb(),r.Sb(15,"div",12),r.Sb(16,"button",13),r.dc("click",(function(){return t.filter()})),r.Lc(17,"Search"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(18,"div",0),r.Sb(19,"div",14),r.Sb(20,"div",0),r.Nb(21,"div",15),r.Nb(22,"div",15),r.Nb(23,"div",15),r.Sb(24,"div",15),r.Sb(25,"div",9),r.Sb(26,"label",16),r.Lc(27,"Status"),r.Rb(),r.Sb(28,"ng-select",17),r.dc("ngModelChange",(function(e){return t.selectedStatus=e})),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(29,"div",18),r.Sb(30,"div",9),r.Sb(31,"label",19),r.Lc(32,"/"),r.Rb(),r.Sb(33,"button",20),r.dc("click",(function(){return t.filter()})),r.Nb(34,"i",21),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Jc(35,f,20,1,"div",22),r.Jc(36,R,6,0,"div",23),r.Jc(37,k,4,0,"div",23),r.Rb(),r.Rb(),r.Rb(),r.Sb(38,"div",24),r.Sb(39,"div",2),r.Sb(40,"div",25),r.Sb(41,"ngb-pagination",26),r.dc("pageChange",(function(e){return t.page=e}))("pageChange",(function(e){return t.onPaginateChange(e)})),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e&&(r.zb(6),r.mc("routerLink",r.pc(12,y)),r.zb(8),r.mc("ngModel",t.search_key),r.zb(14),r.mc("items",t.status_list)("ngModel",t.selectedStatus)("virtualScroll",!0),r.zb(7),r.mc("ngIf",0==t.loading),r.zb(1),r.mc("ngIf",1==t.loading),r.zb(1),r.mc("ngIf",0==(null==t.banners?null:t.banners.totalElements)),r.zb(4),r.mc("collectionSize",null==t.banners?null:t.banners.totalElements)("pageSize",t.size)("page",t.page)("maxSize",6))},directives:[a.g,u.c,u.n,u.q,p.a,i.m,g.j,i.l,a.i,S.a],styles:[".card[_ngcontent-%COMP%]{border-radius:0}h2[_ngcontent-%COMP%]{font-size:26px;font-width:900}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.edit[_ngcontent-%COMP%]{color:#ffc107;cursor:pointer}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#e34724;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.name[_ngcontent-%COMP%]{cursor:pointer;color:#0b7dda}"]}),e})();var L=n("flBB");function C(e,t){1&e&&(r.Sb(0,"h4",23),r.Lc(1,"Create new Banner"),r.Rb())}function M(e,t){1&e&&(r.Sb(0,"h4",23),r.Lc(1,"Update Banner"),r.Rb())}function w(e,t){if(1&e&&(r.Sb(0,"div"),r.Nb(1,"img",24),r.Rb()),2&e){const e=r.hc();r.zb(1),r.mc("src",e.logoUrl,r.Bc)}}let z=(()=>{class e{constructor(e,t,n,i,a,r){this.datePipe=e,this.activatedRoute=t,this.router=n,this.toastr=i,this.fileUploadService=a,this.createBannerService=r,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.products=[],this.country=[{id:1,name:"Bangladesh"},{id:2,name:"Japan"}],this.shops=[],this.variations=[],this.types=[{id:1,name:"Amount"},{id:2,name:"Percentage"}],this.selectedCountry=[],this.checked=!0,this.paramId=null,this.selectedDiscountType=this.types[1],this.flag=!1,this.buttonStatus="Create",this.status_list=[{id:1,name:"Active",value:!0},{id:1,name:"Inactive",value:!1}]}ngOnInit(){this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerBannerForm=this.createBannerService.initializeForm(),this.paramId&&(this.buttonStatus="Update",this.createBannerService.banner_details(this.paramId).subscribe(e=>{this.registerBannerForm=this.createBannerService.populateForm(e),this.logoUrl=null==e?void 0:e.image,this.selectedLogo=null==e?void 0:e.image}))}onLogoChanged(e){if(this.selectedLogo=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedLogo=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe(e=>{this.assignLogo(e)},e=>{this.toastr.error("Image upload failed, please try again later")});let t=e.target.files.length;for(let n=0;n<t;n++){let t=new FileReader;t.onload=e=>{this.logoUrl=e.target.result},t.readAsDataURL(e.target.files[n])}}}assignLogo(e){let t;for(let n=0;n<e.length;n++)t=e[n].thumb_url;this.registerBannerForm.controls.image.setValue(t)}createBanner(){"Create"==this.buttonStatus?this.createBannerService.create_banner(this.registerBannerForm.value).subscribe(e=>{this.toastr.success("Top Banner Created Successfully"),this.router.navigate(["top-banner"])}):this.createBannerService.update_banner(this.paramId,this.registerBannerForm.value).subscribe(e=>{this.toastr.success("Top Banner Updated Successfully"),this.router.navigate(["top-banner"])})}}return e.\u0275fac=function(t){return new(t||e)(r.Mb(i.e),r.Mb(a.a),r.Mb(a.f),r.Mb(s.b),r.Mb(L.a),r.Mb(h))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-create-banner"]],decls:44,vars:9,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"label-text"],["type","text","id","link","placeholder","link","formControlName","link",1,"form-control"],["type","text","id","page_to_open","placeholder","page to open","formControlName","page_to_open",1,"form-control"],["bindLabel","name","bindValue","value","placeholder","Select","formControlName","active",3,"items","hideSelected","virtualScroll"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button","routerLink","/top-banner",1,"btn","btn-gradient-danger","btn-icon-text"],[1,"mdi","mdi-close","btn-icon-prepend"],[1,"card-title"],["alt","",1,"imageClass",2,"width","100px",3,"src"]],template:function(e,t){if(1&e){const e=r.Tb();r.Sb(0,"div",0),r.Sb(1,"div",1),r.Jc(2,C,2,0,"h4",2),r.Jc(3,M,2,0,"h4",2),r.Sb(4,"form",3),r.Sb(5,"div",4),r.Sb(6,"div",5),r.Sb(7,"div",6),r.Sb(8,"div",6),r.Sb(9,"label"),r.Lc(10,"Image"),r.Sb(11,"sup"),r.Lc(12,"*"),r.Rb(),r.Rb(),r.Nb(13,"input",7),r.Sb(14,"div",8),r.Sb(15,"input",9,10),r.dc("change",(function(e){return t.onLogoChanged(e)})),r.Rb(),r.Sb(17,"span",11),r.Sb(18,"button",12),r.dc("click",(function(){return r.zc(e),r.wc(16).click()})),r.Lc(19,"Upload"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Jc(20,w,2,1,"div",13),r.Rb(),r.Rb(),r.Sb(21,"div",5),r.Sb(22,"div",6),r.Sb(23,"label",14),r.Lc(24,"Link"),r.Rb(),r.Nb(25,"input",15),r.Rb(),r.Rb(),r.Rb(),r.Sb(26,"div",4),r.Sb(27,"div",5),r.Sb(28,"div",6),r.Sb(29,"label",14),r.Lc(30,"Page to Open"),r.Rb(),r.Nb(31,"input",16),r.Rb(),r.Rb(),r.Sb(32,"div",5),r.Sb(33,"div",6),r.Sb(34,"label",14),r.Lc(35,"Status"),r.Rb(),r.Nb(36,"ng-select",17),r.Rb(),r.Rb(),r.Rb(),r.Sb(37,"div",18),r.Sb(38,"button",19),r.dc("click",(function(){return t.createBanner()})),r.Nb(39,"i",20),r.Lc(40),r.Rb(),r.Sb(41,"button",21),r.Nb(42,"i",22),r.Lc(43," Cancel "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}2&e&&(r.zb(2),r.mc("ngIf",null==t.paramId),r.zb(1),r.mc("ngIf",null!=t.paramId),r.zb(1),r.mc("formGroup",t.registerBannerForm),r.zb(16),r.mc("ngIf",null!=t.selectedLogo),r.zb(16),r.mc("items",t.status_list)("hideSelected",!0)("virtualScroll",!0),r.zb(2),r.mc("disabled",!t.registerBannerForm.valid||t.flag),r.zb(2),r.Nc(" ",t.buttonStatus," "))},directives:[i.m,u.x,u.o,u.h,u.c,u.n,u.f,p.a,a.g],styles:[".form-check[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}.form-check-label[_ngcontent-%COMP%]{line-height:.875rem;min-height:0;padding-bottom:6px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:#ca371d}"]}),e})();const I=[{path:"",component:_},{path:"add",component:z},{path:"add/:id",component:z}];let B=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(I)],a.j]}),e})();var P=n("iELJ"),E=n("Q2Ze");let N=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(t){return new(t||e)},imports:[[i.c,B,P.d,p.b,u.j,u.t,E.c,S.b,g.h]]}),e})()},flBB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("8Y7J"),a=n("8yjs"),r=n("lX9O"),c=n("IheW");let o=(()=>{class e{constructor(e,t,n){this.apiEndpoints=e,this.authService=t,this.http=n}uploadImage(e){const t=new FormData;for(let i=0;i<e.length;i++)t.append("files",e[i]);let n=this.apiEndpoints.IMAGE.UPLOAD()+this.authService.getAccessToken();return this.http.post(n,t)}}return e.\u0275fac=function(t){return new(t||e)(i.ac(a.a),i.ac(r.a),i.ac(c.a))},e.\u0275prov=i.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);