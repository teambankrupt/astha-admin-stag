!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{PDDa:function(t,n,o){"use strict";o.d(n,"a",(function(){return p}));var a=o("8Y7J"),c=o("8yjs"),r=o("mb36"),s=o("EApP"),l=o("IheW"),u=o("iInd"),d=o("lX9O"),p=function(){var t=function(){function t(i,n,o,a,c,r){e(this,t),this.apiEndPointsService=i,this.baseService=n,this.toastr=o,this.http=a,this.router=c,this.authService=r}return i(t,[{key:"get_location_types",value:function(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.FETCH(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"search_location_types",value:function(e){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.SEARCH(e)+"&access_token="+this.authService.getAccessToken())}},{key:"remove_location_types",value:function(e){return this.http.delete(this.apiEndPointsService.LOCATIONS_TYPES.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.ac(c.a),a.ac(r.a),a.ac(s.b),a.ac(l.a),a.ac(u.f),a.ac(d.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},flBB:function(t,n,o){"use strict";o.d(n,"a",(function(){return l}));var a=o("8Y7J"),c=o("8yjs"),r=o("lX9O"),s=o("IheW"),l=function(){var t=function(){function t(i,n,o){e(this,t),this.apiEndpoints=i,this.authService=n,this.http=o}return i(t,[{key:"uploadImage",value:function(e){for(var t=new FormData,i=0;i<e.length;i++)t.append("files",e[i]);var n=this.apiEndpoints.IMAGE.UPLOAD()+this.authService.getAccessToken();return this.http.post(n,t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.ac(c.a),a.ac(r.a),a.ac(s.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},qof1:function(t,n,o){"use strict";o.d(n,"a",(function(){return p}));var a=o("8Y7J"),c=o("8yjs"),r=o("mb36"),s=o("EApP"),l=o("IheW"),u=o("iInd"),d=o("lX9O"),p=function(){var t=function(){function t(i,n,o,a,c,r){e(this,t),this.apiEndPointsService=i,this.baseService=n,this.toastr=o,this.http=a,this.router=c,this.authService=r}return i(t,[{key:"get_location_list",value:function(e,t,i,n){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH(e,t,i,n)+"&access_token="+this.authService.getAccessToken())}},{key:"get_location",value:function(e,t,i,n){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH_BY_TYPE_ID(e,t,i,n)+"&access_token="+this.authService.getAccessToken())}},{key:"search_location",value:function(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS.SEARCH(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"remove_location",value:function(e){return this.http.delete(this.apiEndPointsService.LOCATIONS.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.ac(c.a),a.ac(r.a),a.ac(s.b),a.ac(l.a),a.ac(u.f),a.ac(d.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},tpXV:function(t,n,o){"use strict";o.d(n,"a",(function(){return b}));var a=o("s7LF"),c=o("8Y7J"),r=o("8yjs"),s=o("mb36"),l=o("EApP"),u=o("IheW"),d=o("iInd"),p=o("lX9O"),b=function(){var t=function(){function t(i,n,o,a,c,r,s){e(this,t),this.apiEndPointsService=i,this.baseService=n,this.toastr=o,this.http=a,this.router=c,this.authService=r,this.formBuilder=s}return i(t,[{key:"initializeLocationTypeForm",value:function(){return this.formBuilder.group({label:new a.e(null,[a.v.required]),description:new a.e(null,[a.v.required]),code:new a.e(null,[a.v.required]),level:new a.e(null,[a.v.required]),parent_id:new a.e(null)})}},{key:"populateForm",value:function(e){return this.formBuilder.group({id:new a.e(null==e?void 0:e.id),label:new a.e(null==e?void 0:e.label),level:new a.e(null==e?void 0:e.level),description:new a.e(null==e?void 0:e.description),code:new a.e(null==e?void 0:e.code),parent_id:new a.e(null==e?void 0:e.parent_id)})}},{key:"create_location_types",value:function(e){return this.http.post(this.apiEndPointsService.LOCATIONS_TYPES.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"location_type_details",value:function(e){return console.log(e),this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}},{key:"update_location_type",value:function(e,t){return this.http.patch(this.apiEndPointsService.LOCATIONS_TYPES.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.ac(r.a),c.ac(s.a),c.ac(l.b),c.ac(u.a),c.ac(d.f),c.ac(p.a),c.ac(a.d))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},uB8i:function(t,n,o){"use strict";o.d(n,"a",(function(){return T}));var a,c=o("8Y7J"),r=o("iInd"),s=o("s7LF"),l=o("8yjs"),u=o("mb36"),d=o("EApP"),p=o("IheW"),b=o("lX9O"),h=((a=function(){function t(i,n,o,a,c,r,s){e(this,t),this.apiEndPointsService=i,this.baseService=n,this.toastr=o,this.http=a,this.router=c,this.authService=r,this.formBuilder=s}return i(t,[{key:"initializeLocationForm",value:function(){return this.formBuilder.group({label:new s.e(null,[s.v.required]),code:new s.e(null,[s.v.required]),type_id:new s.e(null,[s.v.required]),altitude:new s.e(null,[s.v.required]),latitude:new s.e(null,[s.v.required]),longitude:new s.e(null,[s.v.required]),parent_id:new s.e(null),description:new s.e(null),image:new s.e(null)})}},{key:"populateForm",value:function(e){return this.formBuilder.group({id:new s.e(null==e?void 0:e.id),label:new s.e(null==e?void 0:e.label),description:new s.e(null==e?void 0:e.description),code:new s.e(null==e?void 0:e.code),type_id:new s.e(null==e?void 0:e.type_id),altitude:new s.e(null==e?void 0:e.altitude),latitude:new s.e(null==e?void 0:e.latitude),longitude:new s.e(null==e?void 0:e.longitude),parent_id:new s.e(null==e?void 0:e.parent_id),image:new s.e(null==e?void 0:e.image)})}},{key:"create_location",value:function(e){return this.http.post(this.apiEndPointsService.LOCATIONS.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"location_details",value:function(e){return this.http.get(this.apiEndPointsService.LOCATIONS.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}},{key:"update_location",value:function(e,t){return this.http.patch(this.apiEndPointsService.LOCATIONS.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}}]),t}()).\u0275fac=function(e){return new(e||a)(c.ac(l.a),c.ac(u.a),c.ac(d.b),c.ac(p.a),c.ac(r.f),c.ac(b.a),c.ac(s.d))},a.\u0275prov=c.Ib({token:a,factory:a.\u0275fac,providedIn:"root"}),a),v=o("PDDa"),f=o("qof1"),g=o("tpXV"),S=o("flBB"),m=o("wTG2"),y=o("SVse");function _(e,t){if(1&e&&(c.Sb(0,"div"),c.Nb(1,"img",33),c.Rb()),2&e){var i=c.hc();c.zb(1),c.mc("src",i.imageUrl,c.Bc)}}var L,k=function(){return{standalone:!0}},T=((L=function(){function t(i,n,o,a,c,r,s,l,u){e(this,t),this.activatedRoute=i,this.createLocationService=n,this.toastService=o,this.router=a,this.baseService=c,this.listOfTypesService=r,this.locationsService=s,this.createTypesService=l,this.fileUploadService=u,this.paramId=null,this.buttonStatus="Create Child",this.loctype=null,this.loc=null,this.global_type_id=null,this.isParentDisable=!1,this.isLocationTypeDisable=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerLocationForm=this.createLocationService.initializeLocationForm(),this.router.url.split("/").includes("location-types")?this.onLocationCreateFromLocationType():(this.listOfTypesService.get_location_types(0,100).subscribe((function(t){e.location_types=t.content})),this.paramId&&"add"!=this.router.url.split("/").pop()?(this.buttonStatus="Update",this.createLocationService.location_details(this.paramId).subscribe((function(t){e.registerLocationForm=e.createLocationService.populateForm(t),e.getLocationTypeById(e.registerLocationForm.value.type_id),t.parent_id&&(e.loc=t.parent_id),e.imageUrl=null==t?void 0:t.image,e.selectedimage=null==t?void 0:t.image}))):(this.buttonStatus="Create",this.isParentDisable=!0))}},{key:"getLocationTypeById",value:function(e){var t=this;this.createTypesService.location_type_details(e).subscribe((function(e){var i;t.loctype=e,t.global_type_id=t.loctype.parent_id,(null===(i=t.loctype)||void 0===i?void 0:i.parent_id)&&t.getLocation(t.loctype.parent_id)}))}},{key:"onLocationCreateFromLocationType",value:function(){var e=this;this.buttonStatus="Create",this.registerLocationForm.get("type_id").setValue(Number(this.paramId)),this.getLocationTypeById(Number(this.paramId)),this.listOfTypesService.get_location_types(0,1e3).subscribe((function(t){e.location_types=t.content,e.isLocationTypeDisable=!0}))}},{key:"getLocation",value:function(e){var t=this;this.locationsService.get_location(0,1e3,e).subscribe((function(e){t.locations=e.content}))}},{key:"searchLocationType",value:function(e){var t=this;""!=e?this.listOfTypesService.search_location_types(e).subscribe((function(e){t.location_types=e.content})):this.listOfTypesService.get_location_types(0,1e3).subscribe((function(e){t.location_types=e.content}))}},{key:"onChangeLocationType",value:function(){this.locations=null,"Create"==this.buttonStatus&&null!=this.loctype?(this.registerLocationForm.get("type_id").setValue(this.loctype.id),this.isParentDisable=!1,this.global_type_id=this.loctype.parent_id,this.getLocation(this.loctype.parent_id)):(this.global_type_id=null,this.isParentDisable=!0,this.loc=null,this.registerLocationForm.get("type_id").setValue(null),this.registerLocationForm.get("parent_id").setValue(null))}},{key:"onSearchLocation",value:function(e){var t=this;""!=e?this.locationsService.search_location(e,this.global_type_id).subscribe((function(e){t.locations=e.content})):this.getLocation(this.global_type_id)}},{key:"onImageChanged",value:function(e){var t=this;if(this.selectedimage=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedimage=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe((function(e){t.assignImage(e)}),(function(e){t.toastService.error("Image upload failed, please try again later")}));for(var i=e.target.files.length,n=0;n<i;n++){var o=new FileReader;o.onload=function(e){t.imageUrl=e.target.result},o.readAsDataURL(e.target.files[n])}}}},{key:"assignImage",value:function(e){for(var t,i=0;i<e.length;i++)t=e[i].thumb_url;this.registerLocationForm.controls.image.setValue(t)}},{key:"onCheckValidation",value:function(){return null==this.loctype.parent_id||null!=this.loc||(this.toastService.warning("You must select a parent","Warning!"),!1)}},{key:"createLocation",value:function(){var e=this;this.onCheckValidation()&&("Create"==this.buttonStatus?this.createLocationService.create_location(this.registerLocationForm.value).subscribe((function(t){e.toastService.success("Locations Created Successfully"),e.router.navigate(["locations"])})):this.createLocationService.update_location(this.paramId,this.registerLocationForm.value).subscribe((function(t){e.toastService.success("Locations Updated Successfully"),e.router.navigate(["locations"])})))}}]),t}()).\u0275fac=function(e){return new(e||L)(c.Mb(r.a),c.Mb(h),c.Mb(d.b),c.Mb(r.f),c.Mb(u.a),c.Mb(v.a),c.Mb(f.a),c.Mb(g.a),c.Mb(S.a))},L.\u0275cmp=c.Gb({type:L,selectors:[["app-create-location"]],decls:82,vars:14,consts:[[1,"row"],[1,"col-12","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup"],[1,"col-md-6"],[1,"form-group"],["for","Title"],["type","text","id","Title","placeholder","Title","formControlName","label",1,"form-control"],["for","Code"],["type","text","id","Code","placeholder","Code","formControlName","code",1,"form-control"],[1,"label-text"],["bindLabel","label","placeholder","Search Country",3,"items","virtualScroll","readonly","ngModel","ngModelOptions","keyup","ngModelChange","change"],["bindLabel","label","bindValue","id","placeholder","Search Location","formControlName","parent_id",3,"items","readonly","ngModel","keyup","ngModelChange"],["for","exampleTextarea1"],["formControlName","description","id","exampleTextarea1","rows","3","placeholder","Description",1,"form-control"],["type","file","name","img",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"col-md-4"],["type","number","id","altitude","placeholder","Altitude","formControlName","altitude","min","0",1,"form-control"],["type","number","id","latitude","placeholder","Latitude","formControlName","latitude","min","0",1,"form-control"],["type","number","id","longitude","placeholder","Longitude","formControlName","longitude","min","0",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button","routerLink","/locations",1,"btn","btn-gradient-danger","btn-icon-text"],[1,"mdi","mdi-close","btn-icon-prepend"],["alt","","width","100",1,"imageClass",3,"src"]],template:function(e,t){if(1&e){var i=c.Tb();c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"div",3),c.Sb(4,"h4",4),c.Lc(5),c.Rb(),c.Sb(6,"form",5),c.Sb(7,"div",0),c.Sb(8,"div",6),c.Sb(9,"div",7),c.Sb(10,"label",8),c.Sb(11,"sup"),c.Lc(12,"*"),c.Rb(),c.Lc(13,"Label"),c.Rb(),c.Nb(14,"input",9),c.Rb(),c.Rb(),c.Sb(15,"div",6),c.Sb(16,"div",7),c.Sb(17,"label",10),c.Sb(18,"sup"),c.Lc(19,"*"),c.Rb(),c.Lc(20,"Code"),c.Rb(),c.Nb(21,"input",11),c.Rb(),c.Rb(),c.Rb(),c.Sb(22,"div",0),c.Sb(23,"div",6),c.Sb(24,"div",7),c.Sb(25,"label",12),c.Sb(26,"sup"),c.Lc(27,"*"),c.Rb(),c.Lc(28,"Type"),c.Rb(),c.Sb(29,"ng-select",13),c.dc("keyup",(function(e){return t.searchLocationType(e.target.value)}))("ngModelChange",(function(e){return t.loctype=e}))("change",(function(){return t.onChangeLocationType()})),c.Rb(),c.Rb(),c.Rb(),c.Sb(30,"div",6),c.Sb(31,"div",7),c.Sb(32,"label",12),c.Lc(33,"Parent"),c.Rb(),c.Sb(34,"ng-select",14),c.dc("keyup",(function(e){return t.onSearchLocation(e.target.value)}))("ngModelChange",(function(e){return t.loc=e})),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(35,"div",0),c.Sb(36,"div",6),c.Sb(37,"div",7),c.Sb(38,"label",15),c.Lc(39,"Description"),c.Rb(),c.Nb(40,"textarea",16),c.Rb(),c.Rb(),c.Sb(41,"div",6),c.Sb(42,"div",7),c.Sb(43,"label"),c.Lc(44,"Image"),c.Rb(),c.Nb(45,"input",17),c.Sb(46,"div",18),c.Sb(47,"input",19,20),c.dc("change",(function(e){return t.onImageChanged(e)})),c.Rb(),c.Sb(49,"span",21),c.Sb(50,"button",22),c.dc("click",(function(){return c.zc(i),c.wc(48).click()})),c.Lc(51,"Upload"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Jc(52,_,2,1,"div",23),c.Rb(),c.Rb(),c.Sb(53,"div",0),c.Sb(54,"div",24),c.Sb(55,"div",7),c.Sb(56,"label"),c.Sb(57,"sup"),c.Lc(58,"*"),c.Rb(),c.Lc(59,"altitude"),c.Rb(),c.Nb(60,"input",25),c.Rb(),c.Rb(),c.Sb(61,"div",24),c.Sb(62,"div",7),c.Sb(63,"label"),c.Sb(64,"sup"),c.Lc(65,"*"),c.Rb(),c.Lc(66,"latitude"),c.Rb(),c.Nb(67,"input",26),c.Rb(),c.Rb(),c.Sb(68,"div",24),c.Sb(69,"div",7),c.Sb(70,"label"),c.Sb(71,"sup"),c.Lc(72,"*"),c.Rb(),c.Lc(73,"longitude"),c.Rb(),c.Nb(74,"input",27),c.Rb(),c.Rb(),c.Rb(),c.Sb(75,"div",28),c.Sb(76,"button",29),c.dc("click",(function(){return t.createLocation()})),c.Nb(77,"i",30),c.Lc(78),c.Rb(),c.Sb(79,"button",31),c.Nb(80,"i",32),c.Lc(81," Cancel "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&e&&(c.zb(5),c.Nc("",t.buttonStatus," Location"),c.zb(1),c.mc("formGroup",t.registerLocationForm),c.zb(23),c.mc("items",t.location_types)("virtualScroll",!0)("readonly",t.isLocationTypeDisable)("ngModel",t.loctype)("ngModelOptions",c.pc(13,k)),c.zb(5),c.mc("items",t.locations)("readonly",t.isParentDisable)("ngModel",t.loc),c.zb(18),c.mc("ngIf",null!=t.imageUrl),c.zb(24),c.mc("disabled",!t.registerLocationForm.valid),c.zb(2),c.Nc(" ",t.buttonStatus," "))},directives:[s.x,s.o,s.h,s.c,s.n,s.f,m.a,s.q,y.m,s.s,r.g],styles:[".modal-footer[_ngcontent-%COMP%]{border-top:none}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:red}"]}),L)}}])}();