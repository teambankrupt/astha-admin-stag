(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"8U0d":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("iELJ"),a=n("8Y7J"),r=n("mb36"),s=n("iInd"),o=n("yoZy"),c=n("EApP"),d=n("flBB"),b=n("s7LF"),l=n("SVse");function u(t,e){if(1&t&&(a.Sb(0,"div"),a.Nb(1,"img",23),a.Rb()),2&t){const t=a.hc();a.zb(1),a.mc("src",t.imageUrl,a.Bc)}}let h=(()=>{class t{constructor(t,e,n,i,a,r,s,o,c){this.dialogRef=t,this.dialog=e,this.baseService=n,this.activatedRoute=i,this.router=a,this.brandsService=r,this.toastService=s,this.fileUploadService=o,this.data=c,this.paramId=null,this.titleStatus="Create new",this.buttonStatus="Create"}ngOnInit(){this.addBrandForm=this.brandsService.initializeBrandForm(),this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.paramId&&(this.titleStatus="Update",this.buttonStatus="Update",this.brandsService.brand_details(this.paramId).subscribe(t=>{this.addBrandForm=this.brandsService.populateForm(t),this.imageUrl=null==t?void 0:t.image,this.selectedFile=null==t?void 0:t.image}))}onFileChanged(t){if(this.selectedFile=t.target.files[0],t.target.files&&t.target.files[0]){if(t.target.files[0].size>=5e6)return this.selectedFile=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(t.target.files).subscribe(t=>{this.assignFile(t)},t=>{this.toastService.error("Image upload failed, please try again later")});let n=t.target.files.length;for(let i=0;i<n;i++){var e=new FileReader;e.onload=t=>{this.imageUrl=t.target.result},e.readAsDataURL(t.target.files[i])}}}assignFile(t){let e;for(let n=0;n<t.length;n++)e=t[n].thumb_url;this.f.image.setValue(e)}get f(){return this.addBrandForm.controls}closeDialog(t){this.dialog.openDialogs&&this.dialog.openDialogs.length?0==this.dialogRef.getState()&&this.dialogRef.close(t):this.router.navigate(["/brands"])}createBrand(){"Create"==this.buttonStatus?this.brandsService.add_brands(this.addBrandForm.value).subscribe(t=>{this.toastService.success("Brand Created Successfully"),this.data?this.closeDialog(t):this.router.navigate(["brands"])},t=>{417!=t.status?this.baseService.handleError(t):this.toastService.error("This brand name is already exists.","")}):this.brandsService.update_brand(this.paramId,this.addBrandForm.value).subscribe(t=>{this.toastService.success("Brand Updated Successfully"),this.router.navigate(["brands"])},t=>{417!=t.status?this.baseService.handleError(t):this.toastService.error("This brand name is already exists.","")})}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(i.e),a.Mb(i.b),a.Mb(r.a),a.Mb(s.a),a.Mb(s.f),a.Mb(o.a),a.Mb(c.b),a.Mb(d.a),a.Mb(i.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-add-brand"]],decls:35,vars:6,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup"],[1,"form-group"],["for","exampleInputName1"],["type","text","id","exampleInputName1","placeholder","Brand Name","formControlName","name",1,"form-control",3,"ngModel"],["for","exampleTextarea1"],["formControlName","description","id","exampleTextarea1","rows","6","placeholder","Description",1,"form-control"],[1,"row"],[1,"col-md-12"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text","btn-sm",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button",1,"btn","btn-gradient-danger","btn-icon-text","btn-sm",3,"click"],[1,"mdi","mdi-close","btn-icon-prepend"],["alt","",1,"imageClass",3,"src"]],template:function(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"h4",2),a.Lc(3),a.Rb(),a.Sb(4,"form",3),a.Sb(5,"div",4),a.Sb(6,"label",5),a.Lc(7,"Brand Name "),a.Sb(8,"sup"),a.Lc(9,"*"),a.Rb(),a.Rb(),a.Nb(10,"input",6),a.Rb(),a.Sb(11,"div",4),a.Sb(12,"label",7),a.Lc(13,"Description"),a.Rb(),a.Nb(14,"textarea",8),a.Rb(),a.Sb(15,"div",9),a.Sb(16,"div",10),a.Sb(17,"div",4),a.Sb(18,"label"),a.Lc(19,"Logo"),a.Rb(),a.Nb(20,"input",11),a.Sb(21,"div",12),a.Sb(22,"input",13,14),a.dc("change",(function(t){return e.onFileChanged(t)})),a.Rb(),a.Sb(24,"span",15),a.Sb(25,"button",16),a.dc("click",(function(){return a.zc(t),a.wc(23).click()})),a.Lc(26,"Upload"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Jc(27,u,2,1,"div",17),a.Rb(),a.Rb(),a.Sb(28,"div",18),a.Sb(29,"button",19),a.dc("click",(function(){return e.createBrand()})),a.Nb(30,"i",20),a.Lc(31),a.Rb(),a.Sb(32,"button",21),a.dc("click",(function(){return e.closeDialog({id:-1})})),a.Nb(33,"i",22),a.Lc(34," Cancel "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}2&t&&(a.zb(3),a.Nc("",e.titleStatus," brand"),a.zb(1),a.mc("formGroup",e.addBrandForm),a.zb(6),a.mc("ngModel",null==e.data?null:e.data.name),a.zb(17),a.mc("ngIf",e.selectedFile),a.zb(2),a.mc("disabled",e.addBrandForm.invalid),a.zb(2),a.Nc(" ",e.buttonStatus," "))},directives:[b.w,b.n,b.h,b.c,b.m,b.f,l.m],styles:[".imageClass[_ngcontent-%COMP%]{height:70px;width:100px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.file-upload-info[_ngcontent-%COMP%]{padding:7px}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:#ca371d}"]}),t})()},flBB:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("8Y7J"),a=n("8yjs"),r=n("lX9O"),s=n("IheW");let o=(()=>{class t{constructor(t,e,n){this.apiEndpoints=t,this.authService=e,this.http=n}uploadImage(t){const e=new FormData;for(let i=0;i<t.length;i++)e.append("files",t[i]);let n=this.apiEndpoints.IMAGE.UPLOAD()+this.authService.getAccessToken();return this.http.post(n,e)}}return t.\u0275fac=function(e){return new(e||t)(i.ac(a.a),i.ac(r.a),i.ac(s.a))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},yO0g:function(t,e,n){"use strict";n.r(e),n.d(e,"BrandsModule",(function(){return _}));var i=n("SVse"),a=n("iInd"),r=n("8Y7J"),s=n("yoZy"),o=n("mb36"),c=n("EApP"),d=n("LqlI"),b=n("s7LF"),l=n("G0yt"),u=n("a3+x");const h=function(t){return["add",t]};function p(t,e){if(1&t){const t=r.Tb();r.Sb(0,"tr"),r.Sb(1,"td"),r.Nb(2,"img",22),r.Rb(),r.Sb(3,"td"),r.Lc(4),r.Rb(),r.Sb(5,"td"),r.Sb(6,"button",23),r.dc("click",(function(){r.zc(t);const n=e.$implicit,i=r.hc(2),a=r.wc(26);return i.openModal(a,n)})),r.Lc(7," More Information "),r.Rb(),r.Rb(),r.Sb(8,"td"),r.Sb(9,"a",24),r.Sb(10,"i",25),r.Lc(11,"\ue254"),r.Rb(),r.Rb(),r.Rb(),r.Sb(12,"td",26),r.Sb(13,"button",27),r.dc("confirm",(function(){r.zc(t);const n=e.$implicit;return r.hc(2).onRemoveBrands(n)}))("cancel",(function(){return r.zc(t),r.hc(2).cancelClicked=!0})),r.Sb(14,"i",25),r.Lc(15,"\ue872"),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit,n=r.hc(2);r.zb(2),r.nc("src",null==t?null:t.image,r.Bc),r.zb(2),r.Mc(null==t?null:t.name),r.zb(5),r.mc("routerLink",r.qc(5,h,t.id)),r.zb(4),r.mc("popoverTitle",n.popoverTitle)("popoverMessage",n.popoverMessage)}}function g(t,e){if(1&t&&(r.Sb(0,"div",18),r.Sb(1,"table",19),r.Sb(2,"thead",20),r.Sb(3,"tr"),r.Sb(4,"th"),r.Lc(5," Logo "),r.Rb(),r.Sb(6,"th"),r.Lc(7," Name "),r.Rb(),r.Sb(8,"th"),r.Lc(9," Action "),r.Rb(),r.Sb(10,"th"),r.Lc(11," Update "),r.Rb(),r.Sb(12,"th"),r.Lc(13," Delete "),r.Rb(),r.Rb(),r.Rb(),r.Sb(14,"tbody"),r.Jc(15,p,16,7,"tr",21),r.Rb(),r.Rb(),r.Rb()),2&t){const t=r.hc();r.zb(15),r.mc("ngForOf",null==t.brands?null:t.brands.content)}}function m(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",28),r.Sb(2,"div",29),r.Sb(3,"div",30),r.Sb(4,"span",31),r.Lc(5,"Loading..."),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb())}function S(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",28),r.Sb(2,"div",32),r.Nb(3,"img",33),r.Rb(),r.Rb(),r.Rb())}function f(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",34),r.Sb(1,"h4",35),r.Lc(2),r.Rb(),r.Sb(3,"button",36),r.dc("click",(function(){return r.zc(t),r.hc().modalRef.hide()})),r.Sb(4,"span",37),r.Lc(5,"\xd7"),r.Rb(),r.Rb(),r.Rb(),r.Sb(6,"div",38),r.Sb(7,"div",39),r.Sb(8,"div",0),r.Sb(9,"div",28),r.Nb(10,"img",40),r.Sb(11,"p"),r.Sb(12,"span",41),r.Lc(13,"Name: "),r.Rb(),r.Lc(14),r.Rb(),r.Rb(),r.Sb(15,"div",28),r.Sb(16,"p"),r.Sb(17,"span",41),r.Lc(18,"Description: "),r.Rb(),r.Lc(19),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=r.hc();r.zb(2),r.Nc("Brand Details of ",null==t.iBrand?null:t.iBrand.name,""),r.zb(8),r.nc("src",null==t.iBrand?null:t.iBrand.image,r.Bc),r.zb(4),r.Mc(null==t.iBrand?null:t.iBrand.name),r.zb(5),r.Mc(null==t.iBrand?null:t.iBrand.description)}}let v=(()=>{class t{constructor(t,e,n,i){this.brandService=t,this.baseService=e,this.toastr=n,this.modalService=i,this.loading=!0,this.size=10,this.page=1,this.search_key="",this.popoverTitle="Are you sure?",this.popoverMessage="Are you really sure you want to delete this?",this.cancelClicked=!1}ngOnInit(){this.get_brands(this.page-1,this.size)}get_brands(t,e){this.loading=!0,this.brandService.get_brands(t,e).subscribe(t=>{this.brands=t,this.loading=!1},t=>{this.loading=!1,this.baseService.handleError(t)})}onPaginateChange(t){this.get_brands(t-1,this.size)}searchBrand(){""!=this.search_key?(this.loading=!0,this.brandService.search_brands(this.search_key).subscribe(t=>{this.brands=t,this.loading=!1},t=>{this.loading=!1,this.baseService.handleError(t)})):this.get_brands(this.page-1,this.size)}_searchBrand(t){""==t&&this.get_brands(this.page-1,this.size)}onRemoveBrands(t){this.brandService.remove_brands(t.id).subscribe(t=>{this.toastr.success("Deleted Successfully!",""),this.ngOnInit()},t=>{this.baseService.handleError(t)})}openModal(t,e){this.iBrand=e,this.modalRef=this.modalService.show(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s.a),r.Mb(o.a),r.Mb(c.b),r.Mb(d.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-brand-list"]],decls:27,vars:8,consts:[[1,"row"],[1,"col-lg-12","grid-margin","stretch-card","mb-0"],[1,"card"],[1,"card-body"],[1,"card-title","row"],[1,"col-md-4"],["type","button","routerLink","add",1,"btn","btn-gradient-success","btn-rounded","btn-fw","btn-sm"],[1,"col-md-4","text-center"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","brand's name","aria-label","brand's username",1,"form-control",3,"ngModel","keyup.enter","input","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","btn-gradient-primary",3,"click"],["class","table-responsive pt-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-12","grid-margin","stretch-card"],["aria-label","Default pagination",1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","pageChange"],["template",""],[1,"table-responsive","pt-3"],[1,"table","table-striped","table-bordered"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["alt","no images","width","100%","height","auto",1,"img-fluid",3,"src"],["type","button",1,"btn","btn-dark","btn-sm",3,"click"],["title","Edit","data-toggle","tooltip",1,"edit",3,"routerLink"],[1,"material-icons"],[1,"p-0"],["mwlConfirmationPopover","","placement","left",1,"btn","delete",3,"popoverTitle","popoverMessage","confirm","cancel"],[1,"col-12"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"text-center"],["src","./assets/icon/nodatafound.jpg","alt","not found image",1,"rounded",2,"width","400px","height","300px"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body","py-0"],[1,"containers-fluid"],["alt","no images","width","100px","height","auto",1,"img-fluid",3,"src"],[1,"font-weight-bold"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"div",3),r.Sb(4,"div",4),r.Sb(5,"div",5),r.Sb(6,"button",6),r.Lc(7,"Add Brand "),r.Rb(),r.Rb(),r.Sb(8,"div",7),r.Sb(9,"h2"),r.Lc(10,"Brands"),r.Rb(),r.Rb(),r.Sb(11,"div",5),r.Sb(12,"div",8),r.Sb(13,"div",9),r.Sb(14,"input",10),r.dc("keyup.enter",(function(){return e.searchBrand()}))("input",(function(t){return e._searchBrand(t.target.value)}))("ngModelChange",(function(t){return e.search_key=t})),r.Rb(),r.Sb(15,"div",11),r.Sb(16,"button",12),r.dc("click",(function(){return e.searchBrand()})),r.Lc(17,"Search "),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Jc(18,g,16,1,"div",13),r.Jc(19,m,6,0,"div",14),r.Jc(20,S,4,0,"div",14),r.Sb(21,"div",15),r.Sb(22,"div",2),r.Sb(23,"div",3),r.Sb(24,"ngb-pagination",16),r.dc("pageChange",(function(t){return e.page=t}))("pageChange",(function(t){return e.onPaginateChange(t)})),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Jc(25,f,20,4,"ng-template",null,17,r.Kc)),2&t&&(r.zb(14),r.mc("ngModel",e.search_key),r.zb(4),r.mc("ngIf",0==e.loading),r.zb(1),r.mc("ngIf",1==e.loading),r.zb(1),r.mc("ngIf",0==(null==e.brands?null:e.brands.totalElements)),r.zb(4),r.mc("collectionSize",null==e.brands?null:e.brands.totalElements)("pageSize",e.size)("page",e.page)("maxSize",6))},directives:[a.g,b.c,b.m,b.p,i.m,l.j,i.l,a.i,u.a],styles:[".card[_ngcontent-%COMP%]{border-radius:0}h2[_ngcontent-%COMP%]{font-size:26px;font-width:900}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.edit[_ngcontent-%COMP%]{color:#ffc107;cursor:pointer}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#e34724;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}"]}),t})();var R=n("8U0d");const y=[{path:"",component:v},{path:"add",component:R.a},{path:"add/:id",component:R.a}];let B=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(y)],a.j]}),t})();var M=n("iELJ");let _=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[{provide:M.a,useValue:{}},{provide:M.e,useValue:{}}],imports:[[i.c,B,l.k,b.j,u.b,b.s,M.d,d.b.forRoot()]]}),t})()},yoZy:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("s7LF"),a=n("8Y7J"),r=n("8yjs"),s=n("mb36"),o=n("EApP"),c=n("IheW"),d=n("iInd"),b=n("lX9O");let l=(()=>{class t{constructor(t,e,n,i,a,r,s){this.apiEndPointsService=t,this.baseService=e,this.toastr=n,this.http=i,this.router=a,this.authService=r,this.formBuilder=s}get_brands(t,e){return this.http.get(this.apiEndPointsService.BRANDS.FETCH(t,e)+"&access_token="+this.authService.getAccessToken())}add_brands(t){return this.http.post(this.apiEndPointsService.BRANDS.CREATE()+"?access_token="+this.authService.getAccessToken(),t)}search_brands(t){return this.http.get(this.apiEndPointsService.BRANDS.SEARCH(t)+"&access_token="+this.authService.getAccessToken())}remove_brands(t){return this.http.delete(this.apiEndPointsService.BRANDS.DELETE(t)+"?access_token="+this.authService.getAccessToken())}brand_details(t){return this.http.get(this.apiEndPointsService.BRANDS.DETAILS(t)+"?access_token="+this.authService.getAccessToken())}update_brand(t,e){return this.http.patch(this.apiEndPointsService.BRANDS.UPDATE(t)+"?access_token="+this.authService.getAccessToken(),e)}initializeBrandForm(){return this.formBuilder.group({name:new i.e(null,[i.u.required]),description:new i.e(null),image:new i.e(null)})}populateForm(t){return this.formBuilder.group({id:new i.e(null==t?void 0:t.id),name:new i.e(null==t?void 0:t.name),description:new i.e(null==t?void 0:t.description),image:new i.e(null==t?void 0:t.image)})}}return t.\u0275fac=function(e){return new(e||t)(a.ac(r.a),a.ac(s.a),a.ac(o.b),a.ac(c.a),a.ac(d.f),a.ac(b.a),a.ac(i.d))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);