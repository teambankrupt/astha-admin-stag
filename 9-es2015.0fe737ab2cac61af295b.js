(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2AP2":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("SVse"),o=i("8Y7J"),c=i("iInd"),s=i("iELJ"),r=i("EApP"),a=i("lX9O"),l=i("hmKI"),d=i("flBB"),u=i("lED8"),b=i("iZnz"),h=i("PDDa"),p=i("mb36"),g=i("qof1"),S=i("s7LF"),m=i("wTG2");function v(e,t){1&e&&(o.Sb(0,"h4",32),o.Lc(1,"Create new shop"),o.Rb())}function f(e,t){1&e&&(o.Sb(0,"h4",32),o.Lc(1,"Update shop"),o.Rb())}function _(e,t){if(1&e&&(o.Sb(0,"option",71),o.Lc(1),o.Rb()),2&e){const e=t.$implicit;o.mc("ngValue",e),o.zb(1),o.Mc(e)}}function k(e,t){if(1&e&&(o.Sb(0,"div"),o.Nb(1,"img",72),o.Rb()),2&e){const e=o.hc();o.zb(1),o.mc("src",e.logoUrl,o.Bc)}}function R(e,t){if(1&e&&(o.Sb(0,"div"),o.Nb(1,"img",72),o.Rb()),2&e){const e=o.hc();o.zb(1),o.mc("src",e.bannerUrl,o.Bc)}}const y=function(){return{standalone:!0}};function C(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div",73),o.Sb(1,"div",74),o.Sb(2,"label",75),o.Lc(3,"Day"),o.Rb(),o.Sb(4,"ng-select",76),o.dc("ngModelChange",(function(i){return o.zc(e),t.$implicit.day_of_week=i}))("change",(function(i){o.zc(e);const n=t.$implicit;return o.hc().onChangeDay(i,n)})),o.Rb(),o.Rb(),o.Sb(5,"div",77),o.Sb(6,"label",75),o.Lc(7,"Open Time"),o.Rb(),o.Sb(8,"ng-select",78),o.dc("ngModelChange",(function(i){return o.zc(e),t.$implicit.opens_at=i}))("change",(function(i){o.zc(e);const n=t.$implicit;return o.hc().onChangeOpenTime(i,n)})),o.Rb(),o.Rb(),o.Sb(9,"div",77),o.Sb(10,"label",75),o.Lc(11,"Closed Time"),o.Rb(),o.Sb(12,"ng-select",79),o.dc("ngModelChange",(function(i){return o.zc(e),t.$implicit.closes_at=i}))("change",(function(i){o.zc(e);const n=t.$implicit;return o.hc().onChangeClosedTime(i,n)})),o.Rb(),o.Rb(),o.Sb(13,"div",80),o.Sb(14,"label",81),o.Lc(15,"#"),o.Rb(),o.Sb(16,"div"),o.Sb(17,"button",82),o.dc("click",(function(){o.zc(e);const i=t.$implicit;return o.hc().onCancel(i)})),o.Nb(18,"i",83),o.Rb(),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=t.$implicit,i=o.hc();o.zb(4),o.mc("items",i.days)("hideSelected",!0)("virtualScroll",!0)("ngModel",e.day_of_week)("ngModelOptions",o.pc(15,y)),o.zb(4),o.mc("items",i.schedules)("hideSelected",!0)("virtualScroll",!0)("ngModel",e.opens_at)("ngModelOptions",o.pc(16,y)),o.zb(4),o.mc("items",i.schedules)("hideSelected",!0)("virtualScroll",!0)("ngModel",e.closes_at)("ngModelOptions",o.pc(17,y))}}function P(e,t){1&e&&(o.Sb(0,"sup"),o.Lc(1,"*"),o.Rb())}function T(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div",84),o.Sb(1,"div",8),o.Sb(2,"label",85),o.Lc(3),o.Jc(4,P,2,0,"sup",20),o.Rb(),o.Sb(5,"ng-select",86),o.dc("ngModelChange",(function(i){o.zc(e);const n=t.index;return o.hc().selectedLocationArray[n]=i}))("change",(function(i){o.zc(e);const n=t.index;return o.hc().setLocationIdInForm(i,n)})),o.Rb(),o.Rb(),o.Rb()}if(2&e){const e=t.index,i=o.hc();o.zb(3),o.Mc(i.location_label_array[e]),o.zb(1),o.mc("ngIf",0==e),o.zb(1),o.mc("items",i.location_array[e])("hideSelected",!0)("virtualScroll",!0)("ngModel",i.selectedLocationArray[e])("ngModelOptions",o.pc(7,y))}}let L=(()=>{class e{constructor(e,t,i,n,o,c,s,r,a,l,d,u,b,h){this.datePipe=e,this.activatedRoute=t,this.dialog=i,this.router=n,this.dialogRef=o,this.toastr=c,this.authService=s,this.createShopService=r,this.fileUploadService=a,this.addShopToCampaignService=l,this.campaignsService=d,this.listOfTypesService=u,this.baseService=b,this.locationsService=h,this.logoList=null,this.bannerList=null,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.paramId=null,this.buttonStatus="Create",this.location_id=null,this.location_array=[],this.location_label_array=[],this.selectedLocationArray=[],this.shop_types=["GENERAL","RESTAURANT"],this.days=[{id:1,name:"Saturday",value:"SATURDAY"},{id:2,name:"Sunday",value:"SUNDAY"},{id:3,name:"Monday",value:"MONDAY"},{id:4,name:"Tuesday",value:"TUESDAY"},{id:5,name:"Wednesday",value:"WEDNESDAY"},{id:6,name:"Thursday",value:"THURSDAY"},{id:7,name:"Friday",value:"FRIDAY"}],this.schedules=this.getTimeRanges(15,"it-IT"),this.selectedSchedule=[]}ngOnInit(){this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerShopForm=this.createShopService.initializeForm(),this.registerShopToCampaignForm=this.addShopToCampaignService.initializeForm(),this.get_user(0,10),this.get_location_types(0,1e3),this.paramId&&(this.buttonStatus="Update",this.createShopService.shop_details(this.paramId).subscribe(e=>{var t;this.registerShopForm=this.createShopService.populateForm(e),this.logoUrl=null==e?void 0:e.logo,this.selectedLogo=null==e?void 0:e.logo,this.bannerUrl=null==e?void 0:e.banner,this.selectedBanner=null==e?void 0:e.banner,this.setLocation(e),this.selectedSchedule=null==e?void 0:e.open_schedules,null===(t=null==e?void 0:e.open_schedules)||void 0===t||t.forEach(e=>{})})),this.campaignsService.get_campaigns(0,1e3).subscribe(e=>{this.campaigns=e.content})}setLocation(e){}get_user(e,t){this.createShopService.get_owners(e,t).subscribe(e=>{this.owners=null==e?void 0:e.content})}onSearchOwner(e){""!=e.target.value?this.createShopService.search_owners(e.target.value,0,100).subscribe(e=>{this.owners=null==e?void 0:e.content}):this.get_user(0,10)}addCountry(e){return{name:e,id:-1}}onLogoChanged(e){if(this.selectedLogo=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedLogo=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe(e=>{this.assignLogo(e)},e=>{this.toastr.error("Image upload failed, please try again later")});let t=e.target.files.length;for(let i=0;i<t;i++){let t=new FileReader;t.onload=e=>{this.logoUrl=e.target.result},t.readAsDataURL(e.target.files[i])}}}assignLogo(e){let t;for(let i=0;i<e.length;i++)t=e[i].thumb_url;this.registerShopForm.controls.logo.setValue(t)}onBannerChanged(e){if(this.selectedBanner=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedBanner=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe(e=>{this.assignBanner(e)},e=>{this.toastr.error("Image upload failed, please try again later")});let t=e.target.files.length;for(let i=0;i<t;i++){let t=new FileReader;t.onload=e=>{this.bannerUrl=e.target.result},t.readAsDataURL(e.target.files[i])}}}assignBanner(e){let t;for(let i=0;i<e.length;i++)t=e[i].thumb_url;this.registerShopForm.controls.banner.setValue(t)}uploadImage(){}closeDialog(){this.dialog.openDialogs&&this.dialog.openDialogs.length?0==this.dialogRef.getState()&&this.dialogRef.close(null):this.router.navigate(["/shops"])}createShop(){"Create"==this.buttonStatus?this.createShopService.create_shop(this.registerShopForm.value).subscribe(e=>{this.addShopToCampaign(e),this.toastr.success("Shop Created Successfully"),this.router.navigate(["shops"])}):this.createShopService.update_shop(this.paramId,this.registerShopForm.value).subscribe(e=>{this.addShopToCampaign(e),this.toastr.success("Shop Updated Successfully"),this.router.navigate(["shops"])})}addShopToCampaign(e){null!=this.selectedCampaign&&(this.registerShopToCampaignForm.get("campaign_id").setValue(this.selectedCampaign),this.registerShopToCampaignForm.get("shop_id").setValue(e.id),this.addShopToCampaignService.add_shop_to_complain(this.registerShopToCampaignForm.value).subscribe(e=>{this.toastr.success("Shop added to the campaign successfully")}))}onChangeCampaign(e){this.campaignsService.search_campaigns(e.target.value).subscribe(e=>{this.campaigns=e.content})}setLocationIdInForm(e,t){e?(this.locations_loading(t+1,0,1e3,e.id),this.registerShopForm.get("address").get("location_id").setValue(e.id)):(this.location_array.length=t+1,this.selectedLocationArray.length=t,this.registerShopForm.get("address").get("location_id").setValue(0==this.selectedLocationArray.length?null:this.selectedLocationArray[t-1].id))}get_location_types(e,t){this.listOfTypesService.get_location_types(e,t).subscribe(e=>{this.location_types=e;for(let t=0;t<this.location_types.totalElements;t++)this.location_label_array[t]=this.location_types.content[t].label;this.locations_loading(0,0,1e3,null)},e=>{this.baseService.handleError(e)})}locations_loading(e,t,i,n){this.locationsService.get_location_list(t,i,n).subscribe(t=>{this.location_array[e]=t.content})}getTimeRanges(e,t){const i=[],n=new Date,o={hour:"numeric",minute:"numeric"};for(let c=0;c<1440;c+=e)n.setHours(0),n.setMinutes(c),n.setSeconds(0),n.toLocaleTimeString(t,o),i.push(n.toLocaleTimeString(t,{hour12:!1}));return i}addShopOpenSchedule(){this.selectedSchedule.push({day_of_week:null,opens_at:null,closes_at:null})}onChangeDay(e,t){t.day_of_week=null==e?void 0:e.value,this.setOpenScheduleToForm()}onChangeOpenTime(e,t){t.opens_at=e,this.setOpenScheduleToForm()}onChangeClosedTime(e,t){t.closes_at=e,this.setOpenScheduleToForm()}onCancel(e){this.selectedSchedule=this.selectedSchedule.filter((function(t){return t.day_of_week!==e.day_of_week&&t.opens_at!==e.opens_at&&t.closes_at!==e.closes_at})),this.setOpenScheduleToForm()}setOpenScheduleToForm(){this.registerShopForm.get("open_schedules").setValue(this.selectedSchedule)}onTyping(e){(e.target.value>100||e.target.value<0)&&this.registerShopForm.get("commission_percentage").setValue(0)}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(n.e),o.Mb(c.a),o.Mb(s.b),o.Mb(c.f),o.Mb(s.e),o.Mb(r.b),o.Mb(a.a),o.Mb(l.a),o.Mb(d.a),o.Mb(u.a),o.Mb(b.a),o.Mb(h.a),o.Mb(p.a),o.Mb(g.a))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-add-shop"]],features:[o.yb([n.e])],decls:157,vars:13,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"form-group","row"],[1,"col-md-6"],["for","exampleInputName1"],["type","text","id","exampleInputName1","placeholder","Shop Name","formControlName","name",1,"form-control"],[1,"form-group"],["for","shopType"],["id","shopType","formControlName","type",1,"form-control"],["value","null","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],["bannerInput",""],[1,"form-group","pt-2"],["for","commission"],["type","number","id","commission","placeholder","commission","formControlName","commission_percentage","min","0","max","100",1,"form-control",3,"input"],["bindLabel","name","bindValue","id","placeholder","select owner","formControlName","owner_id",3,"items","hideSelected","virtualScroll","keyup"],[1,"col-12","my-2"],["type","button",1,"btn","btn-light","btn-sm","mb-2",3,"click"],[1,"fa","fa-plus"],[1,"col-12","pb-2"],["class","row pb-2",4,"ngFor","ngForOf"],["formGroupName","address",1,"col-md-6"],[1,"card-title"],[1,"col-6","pr-2"],["for","present"],["type","text","id","present","formControlName","address_line_one",1,"form-control"],[1,"col-6","pl-2"],["for","permanent"],["type","text","id","permanent","formControlName","address_line_two",1,"form-control"],[1,"col-md-4","pr-0"],["for","altitude"],["type","number","id","altitude","placeholder","altitude","formControlName","altitude",1,"form-control"],["for","latitude"],["type","number","id","latitude","placeholder","latitude","formControlName","latitude",1,"form-control"],[1,"col-md-4"],["for","longitude"],["type","number","id","longitude","placeholder","longitude","formControlName","longitude",1,"form-control"],["class","col-6",4,"ngFor","ngForOf"],["for","bank"],["type","text","id","bank","placeholder","Bank Name","formControlName","bank_name",1,"form-control"],["for","branch"],["type","text","id","branch","placeholder","Branch","formControlName","branch_name",1,"form-control"],["for","account"],["type","text","id","account","placeholder","Account Name","formControlName","account_name",1,"form-control"],["for","accountNumber"],["type","text","id","accountNumber","placeholder","Account Number","formControlName","account_number",1,"form-control"],[1,"col-12"],["for","routing"],["type","text","id","routing","placeholder","Routing","formControlName","routing",1,"form-control"],[1,"row","mx-0"],[1,"form-check"],["type","checkbox","value","true","id","defaultCheck1","formControlName","ecommerce_activated",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label","ml-0","font-weight-bold"],[1,"form-check","flagship"],["type","checkbox","value","false","id","defaultCheck2","formControlName","flagship",1,"form-check-input"],["for","defaultCheck2",1,"form-check-label","ml-0","font-weight-bold"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button",1,"btn","btn-gradient-danger","btn-icon-text",3,"click"],[1,"mdi","mdi-close","btn-icon-prepend"],[3,"ngValue"],["alt","",1,"imageClass",3,"src"],[1,"row","pb-2"],[1,"col-4"],[1,""],["bindLabel","name","bindValue","value","placeholder","select day",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],[1,"col-3"],["placeholder","open time",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],["placeholder","closed time",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],[1,"col-2"],[2,"color","#FFF"],["type","button",1,"btn","btn-light",2,"background","red","padding","8px","color","#FFF",3,"click"],[1,"fas","fa-times"],[1,"col-6"],[1,"label-text"],["bindLabel","label","placeholder","Search",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"]],template:function(e,t){if(1&e){const e=o.Tb();o.Sb(0,"div",0),o.Sb(1,"div",1),o.Jc(2,v,2,0,"h4",2),o.Jc(3,f,2,0,"h4",2),o.Sb(4,"form",3),o.Sb(5,"div",4),o.Sb(6,"div",5),o.Sb(7,"label",6),o.Lc(8,"Shop Name"),o.Sb(9,"sup"),o.Lc(10,"*"),o.Rb(),o.Rb(),o.Nb(11,"input",7),o.Rb(),o.Sb(12,"div",5),o.Sb(13,"div",8),o.Sb(14,"label",9),o.Lc(15,"Shop Type"),o.Rb(),o.Sb(16,"select",10),o.Sb(17,"option",11),o.Lc(18,"Choose your shop type"),o.Rb(),o.Jc(19,_,2,2,"option",12),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(20,"div",13),o.Sb(21,"div",5),o.Sb(22,"div",8),o.Sb(23,"label"),o.Lc(24,"Logo"),o.Sb(25,"sup"),o.Lc(26,"*"),o.Rb(),o.Rb(),o.Nb(27,"input",14),o.Sb(28,"div",15),o.Sb(29,"input",16,17),o.dc("change",(function(e){return t.onLogoChanged(e)})),o.Rb(),o.Sb(31,"span",18),o.Sb(32,"button",19),o.dc("click",(function(){return o.zc(e),o.wc(30).click()})),o.Lc(33,"Upload"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Jc(34,k,2,1,"div",20),o.Rb(),o.Sb(35,"div",5),o.Sb(36,"div",8),o.Sb(37,"label"),o.Lc(38,"Banner"),o.Rb(),o.Nb(39,"input",14),o.Sb(40,"div",15),o.Sb(41,"input",16,21),o.dc("change",(function(e){return t.onBannerChanged(e)})),o.Rb(),o.Sb(43,"span",18),o.Sb(44,"button",19),o.dc("click",(function(){return o.zc(e),o.wc(42).click()})),o.Lc(45,"Upload"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Jc(46,R,2,1,"div",20),o.Rb(),o.Rb(),o.Sb(47,"div",13),o.Sb(48,"div",5),o.Sb(49,"div",22),o.Sb(50,"label",23),o.Lc(51,"Commission in Percentage"),o.Sb(52,"sup"),o.Lc(53,"*"),o.Rb(),o.Rb(),o.Sb(54,"input",24),o.dc("input",(function(e){return t.onTyping(e)})),o.Rb(),o.Rb(),o.Rb(),o.Sb(55,"div",5),o.Sb(56,"div",22),o.Sb(57,"label"),o.Lc(58,"Select Owner"),o.Rb(),o.Sb(59,"ng-select",25),o.dc("keyup",(function(e){return t.onSearchOwner(e)})),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(60,"div",13),o.Sb(61,"div",26),o.Sb(62,"button",27),o.dc("click",(function(){return t.addShopOpenSchedule()})),o.Nb(63,"i",28),o.Lc(64," Add Open Schedule "),o.Rb(),o.Rb(),o.Sb(65,"div",29),o.Jc(66,C,19,18,"div",30),o.Rb(),o.Rb(),o.Sb(67,"div",13),o.Sb(68,"div",31),o.Sb(69,"h4",32),o.Lc(70,"Address"),o.Rb(),o.Sb(71,"div",13),o.Sb(72,"div",33),o.Sb(73,"div",8),o.Sb(74,"label",34),o.Lc(75,"Address 1"),o.Sb(76,"sup"),o.Lc(77,"*"),o.Rb(),o.Rb(),o.Nb(78,"input",35),o.Rb(),o.Rb(),o.Sb(79,"div",36),o.Sb(80,"div",8),o.Sb(81,"label",37),o.Lc(82,"Address 2"),o.Rb(),o.Nb(83,"input",38),o.Rb(),o.Rb(),o.Rb(),o.Sb(84,"div",13),o.Sb(85,"div",39),o.Sb(86,"div",8),o.Sb(87,"label",40),o.Lc(88,"Altitude"),o.Sb(89,"sup"),o.Lc(90,"*"),o.Rb(),o.Rb(),o.Nb(91,"input",41),o.Rb(),o.Rb(),o.Sb(92,"div",39),o.Sb(93,"div",8),o.Sb(94,"label",42),o.Lc(95,"Latitude"),o.Sb(96,"sup"),o.Lc(97,"*"),o.Rb(),o.Rb(),o.Nb(98,"input",43),o.Rb(),o.Rb(),o.Sb(99,"div",44),o.Sb(100,"div",8),o.Sb(101,"label",45),o.Lc(102,"Longitude"),o.Sb(103,"sup"),o.Lc(104,"*"),o.Rb(),o.Rb(),o.Nb(105,"input",46),o.Rb(),o.Rb(),o.Rb(),o.Sb(106,"div",13),o.Jc(107,T,6,8,"div",47),o.Rb(),o.Rb(),o.Sb(108,"div",5),o.Sb(109,"h4",32),o.Lc(110,"Bank Information"),o.Rb(),o.Sb(111,"div",13),o.Sb(112,"div",33),o.Sb(113,"div",8),o.Sb(114,"label",48),o.Lc(115,"Bank Name"),o.Rb(),o.Nb(116,"input",49),o.Rb(),o.Rb(),o.Sb(117,"div",36),o.Sb(118,"div",8),o.Sb(119,"label",50),o.Lc(120,"Branch"),o.Rb(),o.Nb(121,"input",51),o.Rb(),o.Rb(),o.Rb(),o.Sb(122,"div",13),o.Sb(123,"div",33),o.Sb(124,"div",8),o.Sb(125,"label",52),o.Lc(126,"Account Name"),o.Rb(),o.Nb(127,"input",53),o.Rb(),o.Rb(),o.Sb(128,"div",36),o.Sb(129,"div",8),o.Sb(130,"label",54),o.Lc(131,"Account Number"),o.Rb(),o.Nb(132,"input",55),o.Rb(),o.Rb(),o.Rb(),o.Sb(133,"div",13),o.Sb(134,"div",56),o.Sb(135,"div",8),o.Sb(136,"label",57),o.Lc(137,"Routing"),o.Rb(),o.Nb(138,"input",58),o.Rb(),o.Rb(),o.Rb(),o.Sb(139,"div",59),o.Sb(140,"div",5),o.Sb(141,"div",60),o.Nb(142,"input",61),o.Sb(143,"label",62),o.Lc(144,"Ecommerce Activated"),o.Rb(),o.Rb(),o.Rb(),o.Sb(145,"div",5),o.Sb(146,"div",63),o.Nb(147,"input",64),o.Sb(148,"label",65),o.Lc(149,"Flagship"),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Sb(150,"div",66),o.Sb(151,"button",67),o.dc("click",(function(){return t.createShop()})),o.Nb(152,"i",68),o.Lc(153),o.Rb(),o.Sb(154,"button",69),o.dc("click",(function(){return t.closeDialog()})),o.Nb(155,"i",70),o.Lc(156," Cancel "),o.Rb(),o.Rb(),o.Rb(),o.Rb(),o.Rb()}2&e&&(o.zb(2),o.mc("ngIf",null==t.paramId),o.zb(1),o.mc("ngIf",null!=t.paramId),o.zb(1),o.mc("formGroup",t.registerShopForm),o.zb(15),o.mc("ngForOf",t.shop_types),o.zb(15),o.mc("ngIf",null!=t.selectedLogo),o.zb(12),o.mc("ngIf",null!=t.selectedBanner),o.zb(13),o.mc("items",t.owners)("hideSelected",!0)("virtualScroll",!0),o.zb(7),o.mc("ngForOf",t.selectedSchedule),o.zb(41),o.mc("ngForOf",null==t.location_types?null:t.location_types.content),o.zb(44),o.mc("disabled",!t.registerShopForm.valid),o.zb(2),o.Nc(" ",t.buttonStatus," "))},directives:[n.m,S.w,S.n,S.h,S.c,S.m,S.f,S.t,S.q,S.v,n.l,S.r,m.a,S.i,S.a,S.p],styles:[".imageClass[_ngcontent-%COMP%]{height:70px;width:100px;margin-right:5px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.file-upload-info[_ngcontent-%COMP%]{padding:7px}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:red}.flagship[_ngcontent-%COMP%]{margin-left:20px}"]}),e})()},PDDa:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("8Y7J"),o=i("8yjs"),c=i("mb36"),s=i("EApP"),r=i("IheW"),a=i("iInd"),l=i("lX9O");let d=(()=>{class e{constructor(e,t,i,n,o,c){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c}get_location_types(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.FETCH(e,t)+"&access_token="+this.authService.getAccessToken())}search_location_types(e){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.SEARCH(e)+"&access_token="+this.authService.getAccessToken())}remove_location_types(e){return this.http.delete(this.apiEndPointsService.LOCATIONS_TYPES.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(n.ac(o.a),n.ac(c.a),n.ac(s.b),n.ac(r.a),n.ac(a.f),n.ac(l.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},hmKI:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("s7LF"),o=i("8Y7J"),c=i("8yjs"),s=i("mb36"),r=i("EApP"),a=i("IheW"),l=i("iInd"),d=i("lX9O");let u=(()=>{class e{constructor(e,t,i,n,o,c,s){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c,this.formBuilder=s}initializeForm(){return this.formBuilder.group({name:new n.e(null,[n.u.required]),commission_percentage:new n.e(null,[n.u.required]),logo:new n.e(null,[n.u.required]),banner:new n.e(null),type:new n.e("GENERAL"),bank_name:new n.e(null),branch_name:new n.e(null),account_name:new n.e(null),account_number:new n.e(null),routing:new n.e(null),country:new n.e(null),owner_id:new n.e(null),ecommerce_activated:new n.e(!0,[n.u.required]),flagship:new n.e(!1),address:this.formBuilder.group({address_line_one:new n.e(null,[n.u.required]),address_line_two:new n.e(null),altitude:new n.e(null,[n.u.required]),latitude:new n.e(null,[n.u.required]),location_id:new n.e(null,[n.u.required]),longitude:new n.e(null,[n.u.required])}),open_schedules:new n.e(null)})}populateForm(e){var t,i,o,c,s,r;return this.formBuilder.group({id:new n.e(null==e?void 0:e.id),name:new n.e(null==e?void 0:e.name),commission_percentage:new n.e(null==e?void 0:e.commission_percentage),logo:new n.e(null==e?void 0:e.logo),type:new n.e(null==e?void 0:e.type),banner:new n.e(null==e?void 0:e.banner),bank_name:new n.e(null==e?void 0:e.bank_name),branch_name:new n.e(null==e?void 0:e.branch_name),account_name:new n.e(null==e?void 0:e.account_name),account_number:new n.e(null==e?void 0:e.account_number),routing:new n.e(null==e?void 0:e.routing),country:new n.e(null==e?void 0:e.country),owner_id:new n.e(null==e?void 0:e.owner_id),ecommerce_activated:new n.e(null==e?void 0:e.ecommerce_activated),flagship:new n.e(null==e?void 0:e.flagship),address:this.formBuilder.group({address_line_one:new n.e(null===(t=null==e?void 0:e.address)||void 0===t?void 0:t.address_line_one),address_line_two:new n.e(null===(i=null==e?void 0:e.address)||void 0===i?void 0:i.address_line_two),altitude:new n.e(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.altitude),latitude:new n.e(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.latitude),location_id:new n.e(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.location_id),longitude:new n.e(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.longitude)}),open_schedules:new n.e(null==e?void 0:e.open_schedules)})}initializeVendorToCampaignForm(){return this.formBuilder.group({campaign_id:new n.e(null),shop_id:new n.e(null)})}populateVendorToCampaignForm(e){return this.formBuilder.group({campaign_id:new n.e(null==e?void 0:e.campaign_id),shop_id:new n.e(null==e?void 0:e.shop_id)})}create_shop(e){return this.http.post(this.apiEndPointsService.SHOP.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}update_shop(e,t){return this.http.patch(this.apiEndPointsService.SHOP.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}shop_details(e){return this.http.get(this.apiEndPointsService.SHOP.FETCH_BY_ID(e)+"?access_token="+this.authService.getAccessToken())}get_child_locations(e){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH_CHILD_LOCATION(e)+"&access_token="+this.authService.getAccessToken())}search_child_location(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS.SEARCH_CHILD_LOCATION(e,t)+"&access_token="+this.authService.getAccessToken())}search_owners(e,t,i){return this.http.get(this.apiEndPointsService.USERS.search(e,t,i)+"&access_token="+this.authService.getAccessToken())}get_owners(e,t){return this.http.get(this.apiEndPointsService.USERS.get_users(e,t)+"&access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(o.ac(c.a),o.ac(s.a),o.ac(r.b),o.ac(a.a),o.ac(l.f),o.ac(d.a),o.ac(n.d))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},iZnz:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("8Y7J"),o=i("8yjs"),c=i("mb36"),s=i("EApP"),r=i("IheW"),a=i("iInd"),l=i("lX9O");let d=(()=>{class e{constructor(e,t,i,n,o,c){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}get_campaigns(e,t){return this.http.get(this.apiEndPointsService.CAMPAIGNS.FETCH(e,t)+"&access_token="+this.authService.getAccessToken())}search_campaigns(e){return this.http.get(this.apiEndPointsService.CAMPAIGNS.SEARCH(e)+"&access_token="+this.authService.getAccessToken())}remove_campaigns(e){return this.http.delete(this.apiEndPointsService.CAMPAIGNS.DELETE(e)+"?access_token="+this.authService.getAccessToken())}activate_campaign(e,t){return this.http.patch(this.apiEndPointsService.CAMPAIGNS.ACTIVE(e,t)+"&access_token="+this.authService.getAccessToken(),null)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(o.a),n.ac(c.a),n.ac(s.b),n.ac(r.a),n.ac(a.f),n.ac(l.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},kkPz:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("2Vo4"),o=i("XNiG"),c=i("8Y7J"),s=i("8yjs"),r=i("mb36"),a=i("EApP"),l=i("IheW"),d=i("iInd"),u=i("lX9O");let b=(()=>{class e{constructor(e,t,i,c,s,r){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=c,this.router=s,this.authService=r,this.selected_tab=new n.a("Approved"),this.approved_shop=new o.a,this.unapproved_shop=new o.a,this.disabled_shop=new o.a}get_approved_shop(e,t,i,n,o,c,s){this.http.get(this.apiEndPointsService.SHOP.FETCH_APPROVED(e,t,i,n,o,c,s)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.approved_shop.next(e)},e=>{this.baseService.handleError(e)})}get_approved_shops(e,t){return this.http.get(this.apiEndPointsService.SHOP.FETCH_APPROVED(e,t)+"&access_token="+this.authService.getAccessToken())}search_approved_shops(e){return this.http.get(this.apiEndPointsService.SHOP.SEARCH_APPROVED(e)+"&access_token="+this.authService.getAccessToken())}search_approved_shop(e){this.http.get(this.apiEndPointsService.SHOP.SEARCH_APPROVED(e)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.approved_shop.next(e)},e=>{this.baseService.handleError(e)})}get_unapproved_shop(e,t,i,n,o,c,s){this.http.get(this.apiEndPointsService.SHOP.FETCH_UNAPPROVED(e,t,i,n,o,c,s)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.unapproved_shop.next(e)},e=>{this.baseService.handleError(e)})}search_unapproved_shop(e){this.http.get(this.apiEndPointsService.SHOP.SEARCH_UNAPPROVED(e)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.unapproved_shop.next(e)},e=>{this.baseService.handleError(e)})}get_disabled_shop(e,t,i,n,o,c,s){this.http.get(this.apiEndPointsService.SHOP.FETCH_DISABLED(e,t,i,n,o,c,s)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.disabled_shop.next(e)},e=>{this.baseService.handleError(e)})}search_disabled_shop(e){this.http.get(this.apiEndPointsService.SHOP.SEARCH_DISABLED(e)+"&access_token="+this.authService.getAccessToken()).subscribe(e=>{this.disabled_shop.next(e)},e=>{this.baseService.handleError(e)})}shop_disable(e){return this.http.patch(this.apiEndPointsService.SHOP.DISABLE_SHOP(e.id)+"&access_token="+this.authService.getAccessToken(),null)}shop_approve(e){return this.http.patch(this.apiEndPointsService.SHOP.APPROVE_SHOP(e.id)+"&access_token="+this.authService.getAccessToken(),null)}shop_delete(e){return this.http.delete(this.apiEndPointsService.SHOP.DELETE(e.id)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(c.ac(s.a),c.ac(r.a),c.ac(a.b),c.ac(l.a),c.ac(d.f),c.ac(u.a))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},lED8:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("s7LF"),o=i("8Y7J"),c=i("8yjs"),s=i("mb36"),r=i("EApP"),a=i("IheW"),l=i("iInd"),d=i("lX9O");let u=(()=>{class e{constructor(e,t,i,n,o,c,s){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c,this.formBuilder=s}initializeForm(){return this.formBuilder.group({campaign_id:new n.e(null,[n.u.required]),shop_id:new n.e(null,[n.u.required])})}add_shop_to_complain(e){return this.http.post(this.apiEndPointsService.CAMPAIGN_VENDOR.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}remove_shop_from_campaign(e){return this.http.delete(this.apiEndPointsService.CAMPAIGN_VENDOR.DELETE(e.id)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(o.ac(c.a),o.ac(s.a),o.ac(r.b),o.ac(a.a),o.ac(l.f),o.ac(d.a),o.ac(n.d))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},pfSe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotNullOrUndefined=void 0,t.isNotNullOrUndefined=function(e){return null!=e}},qof1:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("8Y7J"),o=i("8yjs"),c=i("mb36"),s=i("EApP"),r=i("IheW"),a=i("iInd"),l=i("lX9O");let d=(()=>{class e{constructor(e,t,i,n,o,c){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c}get_location_list(e,t,i,n){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH(e,t,i,n)+"&access_token="+this.authService.getAccessToken())}get_location(e,t,i,n){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH_BY_TYPE_ID(e,t,i,n)+"&access_token="+this.authService.getAccessToken())}search_location(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS.SEARCH(e,t)+"&access_token="+this.authService.getAccessToken())}remove_location(e){return this.http.delete(this.apiEndPointsService.LOCATIONS.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(n.ac(o.a),n.ac(c.a),n.ac(s.b),n.ac(r.a),n.ac(a.f),n.ac(l.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},rvpB:function(e,t,i){"use strict";i.r(t),i.d(t,"StocksModule",(function(){return H}));var n=i("SVse"),o=i("iInd"),c=i("yU8x"),s=i("8Y7J"),r=i("iELJ"),a=i("s7LF");function l(e,t){if(1&e&&(s.Sb(0,"div"),s.Nb(1,"img",22),s.Rb()),2&e){const e=s.hc();s.zb(1),s.mc("src",e.imageUrl,s.Bc)}}let d=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onFileChanged(e){if(this.selectedFile=e.target.files[0],e.target.files&&e.target.files[0]){let t=new FileReader;t.onload=e=>{this.imageUrl=e.target.result},t.readAsDataURL(e.target.files[0])}}uploadImage(){this.imageUrl&&alert("image uploaded")}closeDialog(){this.dialogRef.close(null)}createCountry(){this.closeDialog()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(r.e))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-add-country"]],decls:32,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample"],[1,"form-group"],["for","exampleInputName1"],["type","text","id","exampleInputName1","placeholder","Country Name",1,"form-control"],["for","exampleTextarea1"],["id","exampleTextarea1","rows","6","placeholder","Description",1,"form-control"],[1,"row"],[1,"col-md-12"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button",1,"btn","btn-gradient-danger","btn-icon-text",3,"click"],[1,"mdi","mdi-close","btn-icon-prepend"],["alt","",1,"imageClass",3,"src"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h4",2),s.Lc(3,"Create new country"),s.Rb(),s.Sb(4,"form",3),s.Sb(5,"div",4),s.Sb(6,"label",5),s.Lc(7,"Country Name"),s.Rb(),s.Nb(8,"input",6),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"label",7),s.Lc(11,"Description"),s.Rb(),s.Nb(12,"textarea",8),s.Rb(),s.Sb(13,"div",9),s.Sb(14,"div",10),s.Sb(15,"div",4),s.Sb(16,"label"),s.Lc(17,"Logo"),s.Rb(),s.Nb(18,"input",11),s.Sb(19,"div",12),s.Sb(20,"input",13),s.dc("change",(function(e){return t.onFileChanged(e)})),s.Rb(),s.Sb(21,"span",14),s.Sb(22,"button",15),s.dc("click",(function(){return t.uploadImage()})),s.Lc(23,"Upload"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Jc(24,l,2,1,"div",16),s.Rb(),s.Rb(),s.Sb(25,"div",17),s.Sb(26,"button",18),s.dc("click",(function(){return t.createCountry()})),s.Nb(27,"i",19),s.Lc(28," Create "),s.Rb(),s.Sb(29,"button",20),s.dc("click",(function(){return t.closeDialog()})),s.Nb(30,"i",21),s.Lc(31," Cancel "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.zb(24),s.mc("ngIf",t.selectedFile))},directives:[a.w,a.n,a.o,n.m],styles:[".imageClass[_ngcontent-%COMP%]{height:70px;width:100px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.file-upload-info[_ngcontent-%COMP%]{padding:7px}"]}),e})();var u=i("AIlu"),b=i("2AP2"),h=i("pfSe"),p=i("8yjs"),g=i("mb36"),S=i("EApP"),m=i("IheW"),v=i("lX9O");let f=(()=>{class e{constructor(e,t,i,n,o,c,s){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c,this.formBuilder=s}initializeForm(){return this.formBuilder.group({discount:new a.e(null),cashback_percentage:new a.e(null),country_id:new a.e(null),retail_price:new a.e(null,[a.u.required]),product_id:new a.e(null,[a.u.required]),quantity:new a.e(null,[a.u.required]),vendor_id:new a.e(null,[a.u.required]),unit_price:new a.e(null,[a.u.required]),supplier_id:new a.e(null),discount_valid_until:new a.e(null),variation_id:new a.e(null)})}populateForm(e){return this.formBuilder.group({id:new a.e(null==e?void 0:e.id),country_id:new a.e(null==e?void 0:e.country_id),discount:new a.e(null==e?void 0:e.discount),cashback_percentage:new a.e(null==e?void 0:e.cashback_percentage),product_id:new a.e(null==e?void 0:e.product_id),quantity:new a.e(null==e?void 0:e.quantity),supplier_id:new a.e(null==e?void 0:e.supplier_id),unit_price:new a.e(null==e?void 0:e.unit_price),discount_valid_until:new a.e(null==e?void 0:e.discount_valid_until),vendor_id:new a.e(null==e?void 0:e.vendor_id),retail_price:new a.e(null==e?void 0:e.retail_price),variation_id:new a.e(null==e?void 0:e.variation_id)})}create_stock(e){return this.http.post(this.apiEndPointsService.STOCK.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}update_stock(e,t){return this.http.patch(this.apiEndPointsService.STOCK.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}stock_details(e){return this.http.get(this.apiEndPointsService.STOCK.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}}return e.\u0275fac=function(t){return new(t||e)(s.ac(p.a),s.ac(g.a),s.ac(S.b),s.ac(m.a),s.ac(o.f),s.ac(v.a),s.ac(a.d))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _=i("L6Pg"),k=i("kkPz"),R=i("EbK6"),y=i("wTG2"),C=i("ienR");function P(e,t){1&e&&(s.Sb(0,"h4",43),s.Lc(1,"Create new stock"),s.Rb())}function T(e,t){1&e&&(s.Sb(0,"h4",43),s.Lc(1,"Update stock"),s.Rb())}function L(e,t){if(1&e&&(s.Sb(0,"option",44),s.Lc(1),s.Rb()),2&e){const e=t.$implicit;s.mc("ngValue",e),s.zb(1),s.Mc(e.name)}}function w(e,t){if(1&e&&(s.Sb(0,"label",45),s.Lc(1),s.Rb()),2&e){const e=s.hc();s.zb(1),s.Nc("Discount ",e.selectedDiscountType.name," can not be greater than unit price.")}}function O(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Amount "),s.Rb())}function E(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Percentage "),s.Rb())}function I(e,t){if(1&e&&(s.Sb(0,"option",44),s.Lc(1),s.Rb()),2&e){const e=t.$implicit;s.mc("ngValue",e),s.zb(1),s.Mc(e.name)}}function A(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Amount "),s.Rb())}function M(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Percentage "),s.Rb())}function N(e,t){if(1&e){const e=s.Tb();s.Sb(0,"button",47),s.dc("click",(function(){return s.zc(e),s.hc().createStock()})),s.Nb(1,"i",48),s.Lc(2),s.Rb()}if(2&e){const e=s.hc();s.mc("disabled",!e.registerStockForm.valid||e.flag),s.zb(2),s.Nc(" ",e.buttonStatus," ")}}const z=function(){return{standalone:!0}},F=function(){return{dateInputFormat:"DD-MM-YYYY, h:mm:ss a"}};let D=(()=>{class e{constructor(e,t,i,n,o,c,s,r,a){this.datePipe=e,this.activatedRoute=t,this.dialog=i,this.createStockService=n,this.router=o,this.toastService=c,this.productService=s,this.shopService=r,this.variationsService=a,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.products=[],this.country=[{id:1,name:"Bangladesh"},{id:2,name:"Japan"}],this.shops=[],this.variations=[],this.types=[{id:1,name:"Amount"},{id:2,name:"Percentage"}],this.selectedCountry=[],this.checked=!0,this.paramId=null,this.selectedDiscountType=this.types[1],this.selectedCashBackType=this.types[1],this.buttonStatus="Create",this.flag=!1}ngOnInit(){this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerStockForm=this.createStockService.initializeForm(),this.getProducts(),this.getShops(),this.getVariations(),this.paramId&&(this.buttonStatus="Update",this.createStockService.stock_details(this.paramId).subscribe(e=>{this.registerStockForm=this.createStockService.populateForm(e)}))}getProducts(){this.productService.get_approved_shop(0,100).subscribe(e=>{this.products=e.content})}getShops(){this.shopService.get_approved_shops(0,100).subscribe(e=>{this.shops=e.content})}getVariations(){this.variationsService.get_variations(0,100).subscribe(e=>{this.variations=e.content})}onSearchShop(e){""!=e.target.value?this.shopService.search_approved_shops(e.target.value).subscribe(e=>{this.shops=e.content}):this.getShops()}onSearchProduct(e){""!=e.target.value?this.productService.search_product(e.target.value).subscribe(e=>{this.products=e.content}):this.getProducts()}onSearchVariation(e){""!=e.target.value?this.variationsService.search_variation(e.target.value).subscribe(e=>{this.variations=e.content}):this.getVariations()}addSuppliers(e){return{name:e,id:-1}}addProducts(e){return{name:e,id:-1}}addCountry(e){return{name:e,id:-1}}onSupplierChange(e){-1==e.id&&this.dialog.open(b.a).afterClosed().subscribe(e=>{})}onProductChange(e){-1==e.id&&this.dialog.open(u.a).afterClosed().subscribe(e=>{})}onCountryChange(e){e.length&&-1==e[e.length-1].id&&this.dialog.open(d).afterClosed().subscribe(e=>{null==e&&(this.selectedCountry=[])})}onChangeDiscountType(){this.onChangeDiscount()}discountConversion(){"Amount"==this.selectedDiscountType.name&&(this.registerStockForm.value.discount=this.percentageCalculation(this.registerStockForm.value.discount))}totalCalculatorFromPercentage(e,t){return e*t/100}percentageCalculation(e){return(e/100).toFixed(2)}onChangeCashBack(){}onChangeCashBackType(){var e,t;"Percentage"==(null===(e=this.selectedCashBackType)||void 0===e?void 0:e.name)&&Object(h.isNotNullOrUndefined)(this.registerStockForm.value.cashback_percentage)&&this.registerStockForm.get("cashback_percentage").setValue(Number(this.percentageCalculation(this.registerStockForm.value.cashback_percentage))),"Amount"==(null===(t=this.selectedCashBackType)||void 0===t?void 0:t.name)&&Object(h.isNotNullOrUndefined)(this.registerStockForm.value.cashback_percentage)&&this.registerStockForm.get("cashback_percentage").setValue(100*Number(this.registerStockForm.value.cashback_percentage))}onDiscountTyping(e){var t;"Percentage"==(null===(t=this.selectedDiscountType)||void 0===t?void 0:t.name)&&(e.target.value>100||e.target.value<0)&&this.registerStockForm.get("discount").setValue(0)}onCashBackTyping(e){var t;"Percentage"==(null===(t=this.selectedCashBackType)||void 0===t?void 0:t.name)&&(e.target.value>100||e.target.value<0)&&this.registerStockForm.get("cashback_percentage").setValue(0)}createStock(){var e,t;"Amount"==(null===(e=this.selectedCashBackType)||void 0===e?void 0:e.name)&&this.registerStockForm.get("cashback_percentage").setValue(Number(this.percentageCalculation(this.registerStockForm.value.cashback_percentage))),"Amount"==(null===(t=this.selectedDiscountType)||void 0===t?void 0:t.name)&&this.registerStockForm.get("discount").setValue(Number(this.percentageCalculation(this.registerStockForm.value.discount))),"Create"==this.buttonStatus?(this.discountConversion(),this.createStockService.create_stock(this.registerStockForm.value).subscribe(e=>{this.toastService.success("Stocks Created Successfully"),this.router.navigate(["stocks"])})):this.createStockService.update_stock(this.paramId,this.registerStockForm.value).subscribe(e=>{this.toastService.success("Stocks Updated Successfully"),this.router.navigate(["stocks"])})}onChangeDiscount(){this.flag="Amount"==this.selectedDiscountType.name?!(this.registerStockForm.value.discount<=this.registerStockForm.value.unit_price):!(this.totalCalculatorFromPercentage(this.registerStockForm.value.discount,this.registerStockForm.value.unit_price)<=this.registerStockForm.value.unit_price)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(n.e),s.Mb(o.a),s.Mb(r.b),s.Mb(f),s.Mb(o.f),s.Mb(S.b),s.Mb(_.a),s.Mb(k.a),s.Mb(R.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-add-stock"]],decls:102,vars:37,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"label-text"],["bindLabel","name","bindValue","id","placeholder","Select Product","formControlName","product_id",3,"items","addTag","hideSelected","virtualScroll","change","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Variation","formControlName","variation_id",3,"items","hideSelected","virtualScroll","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Shop","formControlName","vendor_id",3,"items","hideSelected","virtualScroll","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Supplier","formControlName","supplier_id",3,"items","hideSelected","virtualScroll","keyup","clear"],[1,"col-md-4"],["for","Quantity"],["type","number","id","Quantity","placeholder","Quantity","formControlName","quantity","min","0",1,"form-control"],["for","Price"],["type","number","id","Price","placeholder","Price","formControlName","unit_price","min","0",1,"form-control",3,"change"],["for","retail_price"],["type","number","id","retail_price","placeholder","retail price","formControlName","retail_price","min","0",1,"form-control"],[1,"col-md-6","discount"],["for","discount"],[3,"ngModel","ngModelOptions","change","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["style","font-size: 10px; color: red;",4,"ngIf"],[1,"input-group"],["type","number","id","discount","placeholder","Discount","formControlName","discount",1,"form-control",3,"change","input"],[1,"input-group-prepend"],["class","input-group-text","style","color:#000c17;",4,"ngIf"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"input-helper"],["bsDatepicker","","formControlName","discount_valid_until",1,"form-control",3,"bsConfig","disabled"],["dp","bsDatepicker"],[1,"input-group-append"],[1,"input-group-text",2,"background-color","#0c5460",3,"click"],[1,"far","fa-calendar"],[1,"col-md-6","cashback"],["type","number","id","cashback","placeholder","cashback","formControlName","cashback_percentage",1,"form-control",3,"change","input"],[1,"modal-footer"],["type","button","class","btn btn-gradient-success btn-icon-text",3,"disabled","click",4,"ngIf"],["type","button","routerLink","/stocks",1,"btn","btn-gradient-danger","btn-icon-text"],[1,"mdi","mdi-close","btn-icon-prepend"],[1,"card-title"],[3,"ngValue"],[2,"font-size","10px","color","red"],[1,"input-group-text",2,"color","#000c17"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"]],template:function(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",0),s.Sb(1,"div",1),s.Jc(2,P,2,0,"h4",2),s.Jc(3,T,2,0,"h4",2),s.Sb(4,"form",3),s.Sb(5,"div",4),s.Sb(6,"div",5),s.Sb(7,"div",6),s.Sb(8,"label",7),s.Lc(9,"Select Product"),s.Sb(10,"sup"),s.Lc(11,"*"),s.Rb(),s.Rb(),s.Sb(12,"ng-select",8),s.dc("change",(function(e){return t.onProductChange(e)}))("keyup",(function(e){return t.onSearchProduct(e)}))("clear",(function(){return t.getProducts()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(13,"div",5),s.Sb(14,"div",6),s.Sb(15,"label",7),s.Lc(16,"Select Variations"),s.Rb(),s.Sb(17,"ng-select",9),s.dc("keyup",(function(e){return t.onSearchVariation(e)}))("clear",(function(){return t.getVariations()})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(18,"div",4),s.Sb(19,"div",5),s.Sb(20,"div",6),s.Sb(21,"label",7),s.Lc(22,"Select Shop"),s.Sb(23,"sup"),s.Lc(24,"*"),s.Rb(),s.Rb(),s.Sb(25,"ng-select",10),s.dc("keyup",(function(e){return t.onSearchShop(e)}))("clear",(function(){return t.getShops()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(26,"div",5),s.Sb(27,"div",6),s.Sb(28,"label",7),s.Lc(29,"Select Supplier"),s.Rb(),s.Sb(30,"ng-select",11),s.dc("keyup",(function(e){return t.onSearchShop(e)}))("clear",(function(){return t.getShops()})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(31,"div",4),s.Sb(32,"div",12),s.Sb(33,"div",6),s.Sb(34,"label",13),s.Lc(35,"Quantity"),s.Sb(36,"sup"),s.Lc(37,"*"),s.Rb(),s.Rb(),s.Nb(38,"input",14),s.Rb(),s.Rb(),s.Sb(39,"div",12),s.Sb(40,"div",6),s.Sb(41,"label",15),s.Lc(42,"Unit Price"),s.Sb(43,"sup"),s.Lc(44,"*"),s.Rb(),s.Rb(),s.Sb(45,"input",16),s.dc("change",(function(){return t.onChangeDiscount()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(46,"div",12),s.Sb(47,"div",6),s.Sb(48,"label",17),s.Lc(49,"Retail Price"),s.Sb(50,"sup"),s.Lc(51,"*"),s.Rb(),s.Rb(),s.Nb(52,"input",18),s.Rb(),s.Rb(),s.Rb(),s.Sb(53,"div",4),s.Sb(54,"div",19),s.Sb(55,"div",6),s.Sb(56,"label",20),s.Lc(57,"Discount "),s.Sb(58,"select",21),s.dc("change",(function(){return t.onChangeDiscountType()}))("ngModelChange",(function(e){return t.selectedDiscountType=e})),s.Jc(59,L,2,2,"option",22),s.Rb(),s.Rb(),s.Sb(60,"div"),s.Jc(61,w,2,1,"label",23),s.Sb(62,"div",24),s.Sb(63,"input",25),s.dc("change",(function(){return t.onChangeDiscount()}))("input",(function(e){return t.onDiscountTyping(e)})),s.Rb(),s.Sb(64,"div",26),s.Jc(65,O,2,0,"div",27),s.Jc(66,E,2,0,"div",27),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(67,"div",5),s.Sb(68,"div",6),s.Sb(69,"div",28),s.Sb(70,"label",29),s.Sb(71,"input",30),s.dc("ngModelChange",(function(e){return t.checked=e})),s.Rb(),s.Lc(72," Discount Valid until "),s.Nb(73,"i",31),s.Rb(),s.Rb(),s.Sb(74,"div",24),s.Nb(75,"input",32,33),s.Sb(77,"div",34),s.Sb(78,"div",35),s.dc("click",(function(){return s.zc(e),s.wc(76).toggle()})),s.Nb(79,"i",36),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(80,"div",4),s.Sb(81,"div",37),s.Sb(82,"div",6),s.Sb(83,"label",20),s.Lc(84,"CashBack "),s.Sb(85,"select",21),s.dc("change",(function(){return t.onChangeCashBackType()}))("ngModelChange",(function(e){return t.selectedCashBackType=e})),s.Jc(86,I,2,2,"option",22),s.Rb(),s.Rb(),s.Sb(87,"div"),s.Sb(88,"div",24),s.Sb(89,"input",38),s.dc("change",(function(){return t.onChangeCashBack()}))("input",(function(e){return t.onCashBackTyping(e)})),s.Rb(),s.Sb(90,"div",26),s.Jc(91,A,2,0,"div",27),s.Jc(92,M,2,0,"div",27),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Nb(93,"div",5),s.Rb(),s.Sb(94,"div",4),s.Nb(95,"div",5),s.Nb(96,"div",5),s.Rb(),s.Sb(97,"div",39),s.Jc(98,N,3,2,"button",40),s.Sb(99,"button",41),s.Nb(100,"i",42),s.Lc(101," Cancel "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.wc(76);s.zb(2),s.mc("ngIf",null==t.paramId),s.zb(1),s.mc("ngIf",null!=t.paramId),s.zb(1),s.mc("formGroup",t.registerStockForm),s.zb(8),s.mc("items",t.products)("addTag",t.addProducts)("hideSelected",!0)("virtualScroll",!0),s.zb(5),s.mc("items",t.variations)("hideSelected",!0)("virtualScroll",!0),s.zb(8),s.mc("items",t.shops)("hideSelected",!0)("virtualScroll",!0),s.zb(5),s.mc("items",t.shops)("hideSelected",!0)("virtualScroll",!0),s.zb(28),s.mc("ngModel",t.selectedDiscountType)("ngModelOptions",s.pc(33,z)),s.zb(1),s.mc("ngForOf",t.types),s.zb(2),s.mc("ngIf",t.flag),s.zb(4),s.mc("ngIf","Amount"==t.selectedDiscountType.name),s.zb(1),s.mc("ngIf","Percentage"==t.selectedDiscountType.name),s.zb(5),s.mc("ngModel",t.checked)("ngModelOptions",s.pc(34,z)),s.zb(4),s.mc("bsConfig",s.pc(35,F))("disabled",!t.checked),s.zb(3),s.Ab("aria-expanded",e.isOpen),s.zb(7),s.mc("ngModel",t.selectedCashBackType)("ngModelOptions",s.pc(36,z)),s.zb(1),s.mc("ngForOf",t.types),s.zb(5),s.mc("ngIf","Amount"==t.selectedCashBackType.name),s.zb(1),s.mc("ngIf","Percentage"==t.selectedCashBackType.name),s.zb(6),s.mc("ngIf",!t.paramId)}},directives:[n.m,a.w,a.n,a.h,y.a,a.m,a.f,a.r,a.c,a.t,a.p,n.l,a.a,C.b,C.a,o.g,a.q,a.v],styles:[".form-check[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}.form-check-label[_ngcontent-%COMP%]{line-height:.875rem;min-height:0;padding-bottom:6px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:#ca371d}.cashback[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .cashback[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .discount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .discount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.cashback[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .discount[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),e})();const x=[{path:"",component:c.a},{path:"add",component:D},{path:"add/:id",component:D}];let B=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[o.j.forChild(x)],o.j]}),e})();var V=i("G0yt"),U=i("a3+x");let H=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[n.c,B,V.k,y.b,a.j,U.b,a.s,C.c.forRoot(),C.d.forRoot()]]}),e})()},yU8x:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("8Y7J"),o=i("8yjs"),c=i("mb36"),s=i("EApP"),r=i("IheW"),a=i("iInd"),l=i("lX9O");let d=(()=>{class e{constructor(e,t,i,n,o,c){this.apiEndPointsService=e,this.baseService=t,this.toastr=i,this.http=n,this.router=o,this.authService=c,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}get_stocks(e,t){return this.http.get(this.apiEndPointsService.STOCK.FETCH(e,t)+this.accessToken)}get_stocks_by_id(e,t,i){return this.http.get(this.apiEndPointsService.STOCK.FETCH_BY_ID(e,t,i)+this.accessToken)}search_stocks(e){return this.http.get(this.apiEndPointsService.STOCK.SEARCH(e)+this.accessToken)}search_stocks_by_id(e,t){return this.http.get(this.apiEndPointsService.STOCK.SEARCH_WITH_ID(e,t)+this.accessToken)}remove_stock(e){return this.http.delete(this.apiEndPointsService.STOCK.DELETE(e)+this._accessToken)}}return e.\u0275fac=function(t){return new(t||e)(n.ac(o.a),n.ac(c.a),n.ac(s.b),n.ac(r.a),n.ac(a.f),n.ac(l.a))},e.\u0275prov=n.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=i("SVse"),b=i("s7LF"),h=i("G0yt"),p=i("a3+x");function g(e,t){if(1&e&&(n.Sb(0,"span"),n.Lc(1),n.Rb()),2&e){const e=n.hc();n.zb(1),n.Nc(" of ",null==e.selectedShopName?null:e.selectedShopName.name,"")}}const S=function(e){return["/products/add/",e]},m=function(e){return["/shops/details/",e]},v=function(e){return["/stocks/add",e]};function f(e,t){if(1&e){const e=n.Tb();n.Sb(0,"tr"),n.Sb(1,"td"),n.Sb(2,"span",24),n.Lc(3),n.Rb(),n.Rb(),n.Sb(4,"td"),n.Sb(5,"span",24),n.Lc(6),n.Rb(),n.Rb(),n.Sb(7,"td"),n.Lc(8),n.Rb(),n.Sb(9,"td"),n.Lc(10),n.Rb(),n.Sb(11,"td"),n.Lc(12),n.Rb(),n.Sb(13,"td"),n.Lc(14),n.Rb(),n.Sb(15,"td"),n.Lc(16),n.Rb(),n.Sb(17,"td"),n.Lc(18),n.Rb(),n.Sb(19,"td"),n.Sb(20,"a",25),n.Sb(21,"i",26),n.Lc(22,"\ue254"),n.Rb(),n.Rb(),n.Rb(),n.Sb(23,"td",27),n.Sb(24,"button",28),n.dc("confirm",(function(){n.zc(e);const i=t.$implicit;return n.hc(2).onRemoveStock(i)}))("cancel",(function(){return n.zc(e),n.hc(2).cancelClicked=!0})),n.Sb(25,"i",26),n.Lc(26,"\ue872"),n.Rb(),n.Rb(),n.Rb(),n.Rb()}if(2&e){const e=t.$implicit,i=n.hc(2);n.zb(2),n.mc("routerLink",n.qc(13,S,null==e?null:e.product_id)),n.zb(1),n.Mc(null==e?null:e.product_name),n.zb(2),n.mc("routerLink",n.qc(15,m,null==e?null:e.vendor_id)),n.zb(1),n.Mc(null==e?null:e.vendor_name),n.zb(2),n.Mc(null!=e&&e.is_frozen_item?"Frozen":"Unfrozen"),n.zb(2),n.Mc(null==e?null:e.quantity),n.zb(2),n.Mc(null==e?null:e.retail_price),n.zb(2),n.Nc("",null==e?null:e.cashback_percentage,"%"),n.zb(2),n.Nc("",null==e?null:e.discount," %"),n.zb(2),n.Mc(null!=e&&e.discount_valid_until?i.formatDate(null==e?null:e.discount_valid_until):""),n.zb(2),n.mc("routerLink",n.qc(17,v,null==e?null:e.id)),n.zb(4),n.mc("popoverTitle",i.popoverTitle)("popoverMessage",i.popoverMessage)}}function _(e,t){if(1&e&&(n.Sb(0,"div",20),n.Sb(1,"table",21),n.Sb(2,"thead",22),n.Sb(3,"tr"),n.Sb(4,"th"),n.Lc(5," Product Name "),n.Rb(),n.Sb(6,"th"),n.Lc(7," Vendor "),n.Rb(),n.Sb(8,"th"),n.Lc(9," Is Frozen "),n.Rb(),n.Sb(10,"th"),n.Lc(11," Quantity "),n.Rb(),n.Sb(12,"th"),n.Lc(13," Retail Price "),n.Rb(),n.Sb(14,"th"),n.Lc(15," CashBacks "),n.Rb(),n.Sb(16,"th"),n.Lc(17," Discount "),n.Rb(),n.Sb(18,"th"),n.Lc(19," Discount Validity "),n.Rb(),n.Sb(20,"th"),n.Lc(21," Update "),n.Rb(),n.Sb(22,"th"),n.Lc(23," Delete "),n.Rb(),n.Rb(),n.Rb(),n.Sb(24,"tbody"),n.Jc(25,f,27,19,"tr",23),n.Rb(),n.Rb(),n.Rb()),2&e){const e=n.hc();n.zb(25),n.mc("ngForOf",null==e.stocks?null:e.stocks.content)}}function k(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"div",29),n.Sb(2,"div",30),n.Sb(3,"div",31),n.Sb(4,"span",32),n.Lc(5,"Loading..."),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb())}function R(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"div",29),n.Sb(2,"div",33),n.Nb(3,"img",34),n.Rb(),n.Rb(),n.Rb())}const y=function(){return["/stocks/add"]};let C=(()=>{class e{constructor(e,t,i){this.stockService=e,this.baseService=t,this.toastr=i,this.loading=!0,this.size=10,this.page=1,this.search_key="",this.popoverTitle="Are you sure?",this.popoverMessage="Are you really sure you want to delete this?",this.cancelClicked=!1}ngOnInit(){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size)}ngOnChanges(){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size)}get_stock(e,t){this.loading=!0,this.stockService.get_stocks(e,t).subscribe(e=>{this.stocks=e,this.loading=!1},e=>{this.loading=!1,this.baseService.handleError(e)})}get_stock_by_id(e,t,i){this.loading=!0,this.stockService.get_stocks_by_id(e,t,i).subscribe(e=>{this.stocks=e,this.loading=!1},e=>{this.loading=!1,this.baseService.handleError(e)})}onPaginateChange(e){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,e-1,this.size):this.get_stock(e-1,this.size)}searchStock(){this.selectedShopId?""!=this.search_key?(this.loading=!0,this.stockService.search_stocks_by_id(this.selectedShopId,this.search_key).subscribe(e=>{this.stocks=e,this.loading=!1},e=>{this.baseService.handleError(e),this.loading=!1})):this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):""!=this.search_key?(this.loading=!0,this.stockService.search_stocks(this.search_key).subscribe(e=>{this.stocks=e,this.loading=!1},e=>{this.baseService.handleError(e),this.loading=!1})):this.get_stock(this.page-1,this.size)}_searchStock(e){""==e&&(this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size))}onRemoveStock(e){this.stockService.remove_stock(e.id).subscribe(e=>{this.toastr.success("Deleted Successfully!",""),this.ngOnInit()},e=>{this.baseService.handleError(e)})}formatDate(e){let t=""+(new Date(e).getMonth()+1),i=""+new Date(e).getDate(),n=new Date(e).getFullYear();return t.length<2&&(t="0"+t),i.length<2&&(i="0"+i),[i,t,n].join("-")}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(d),n.Mb(c.a),n.Mb(s.b))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-stock-list"]],inputs:{selectedShopName:"selectedShopName",selectedShopId:"selectedShopId"},features:[n.xb],decls:26,vars:11,consts:[[1,"row"],[1,"col-lg-12","grid-margin","stretch-card","mb-0"],[1,"card"],[1,"card-body"],[1,"card-title","row"],[1,"col-md-2"],["type","button",1,"btn","btn-gradient-success","btn-rounded","btn-fw","btn-sm",3,"routerLink"],[1,"col-md-6","text-center"],[4,"ngIf"],[1,"col-md-4"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","search by product name","aria-label","stock username",1,"form-control",3,"ngModel","keyup.enter","input","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","btn-gradient-primary",3,"click"],["class","table-responsive pt-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-12","grid-margin","stretch-card"],[1,"card-body","pt-0"],["aria-label","Default pagination",1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","pageChange"],[1,"table-responsive","pt-3"],[1,"table","table-striped","table-bordered"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[1,"name",3,"routerLink"],["title","Edit","data-toggle","tooltip",1,"edit",3,"routerLink"],[1,"material-icons"],[1,"p-0"],["mwlConfirmationPopover","","placement","left",1,"btn","delete",3,"popoverTitle","popoverMessage","confirm","cancel"],[1,"col-12"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"text-center"],["src","./assets/icon/nodatafound.jpg","alt","not found image",1,"rounded",2,"width","400px","height","300px"]],template:function(e,t){1&e&&(n.Sb(0,"div",0),n.Sb(1,"div",1),n.Sb(2,"div",2),n.Sb(3,"div",3),n.Sb(4,"div",4),n.Sb(5,"div",5),n.Sb(6,"button",6),n.Lc(7,"Add Stock "),n.Rb(),n.Rb(),n.Sb(8,"div",7),n.Sb(9,"h2"),n.Lc(10,"Stocks "),n.Jc(11,g,2,1,"span",8),n.Rb(),n.Rb(),n.Sb(12,"div",9),n.Sb(13,"div",10),n.Sb(14,"div",11),n.Sb(15,"input",12),n.dc("keyup.enter",(function(){return t.searchStock()}))("input",(function(e){return t._searchStock(e.target.value)}))("ngModelChange",(function(e){return t.search_key=e})),n.Rb(),n.Sb(16,"div",13),n.Sb(17,"button",14),n.dc("click",(function(){return t.searchStock()})),n.Lc(18,"Search"),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Jc(19,_,26,1,"div",15),n.Jc(20,k,6,0,"div",16),n.Jc(21,R,4,0,"div",16),n.Rb(),n.Rb(),n.Rb(),n.Sb(22,"div",17),n.Sb(23,"div",2),n.Sb(24,"div",18),n.Sb(25,"ngb-pagination",19),n.dc("pageChange",(function(e){return t.page=e}))("pageChange",(function(e){return t.onPaginateChange(e)})),n.Rb(),n.Rb(),n.Rb(),n.Rb(),n.Rb()),2&e&&(n.zb(6),n.mc("routerLink",n.pc(10,y)),n.zb(5),n.mc("ngIf",t.selectedShopName),n.zb(4),n.mc("ngModel",t.search_key),n.zb(4),n.mc("ngIf",0==t.loading),n.zb(1),n.mc("ngIf",1==t.loading),n.zb(1),n.mc("ngIf",0==(null==t.stocks?null:t.stocks.totalElements)),n.zb(4),n.mc("collectionSize",null==t.stocks?null:t.stocks.totalElements)("pageSize",t.size)("page",t.page)("maxSize",6))},directives:[a.g,u.m,b.c,b.m,b.p,h.j,u.l,a.i,p.a],styles:[".card[_ngcontent-%COMP%]{border-radius:0}h2[_ngcontent-%COMP%]{font-size:26px;font-width:900}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.edit[_ngcontent-%COMP%]{color:#ffc107;cursor:pointer}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#e34724;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.name[_ngcontent-%COMP%]{cursor:pointer;color:#0b7dda}"]}),e})()}}]);