!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{NZT4:function(t,i,a){"use strict";a.r(i),a.d(i,"TopBannerModule",(function(){return j}));var r,o,c=a("SVse"),s=a("iInd"),b=a("8Y7J"),l=a("8yjs"),u=a("mb36"),d=a("EApP"),h=a("IheW"),p=a("lX9O"),g=((r=function(){function t(n,i,a,r,o,c){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=a,this.http=r,this.router=o,this.authService=c,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}return n(t,[{key:"get_banners",value:function(e,t,n,i){return this.http.get(this.apiEndPointsService.BANNER.FETCH(e,t,n,i)+this.accessToken)}},{key:"changeStatus",value:function(e){return this.http.patch(this.apiEndPointsService.BANNER.CHANGE_CHANGE(null==e?void 0:e.id,!(null==e?void 0:e.active))+this.accessToken,e)}},{key:"remove_banner",value:function(e){return this.http.delete(this.apiEndPointsService.BANNER.DELETE(e)+this._accessToken)}}]),t}()).\u0275fac=function(e){return new(e||r)(b.ac(l.a),b.ac(u.a),b.ac(d.b),b.ac(h.a),b.ac(s.f),b.ac(p.a))},r.\u0275prov=b.Ib({token:r,factory:r.\u0275fac,providedIn:"root"}),r),f=a("s7LF"),v=((o=function(){function t(n,i,a,r,o,c,s){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=a,this.http=r,this.router=o,this.authService=c,this.formBuilder=s}return n(t,[{key:"initializeForm",value:function(){return this.formBuilder.group({image:new f.e(null,[f.u.required]),link:new f.e(null,[f.u.required]),page_to_open:new f.e(null,[f.u.required]),active:new f.e(null)})}},{key:"populateForm",value:function(e){return this.formBuilder.group({id:new f.e(null==e?void 0:e.id),image:new f.e(null==e?void 0:e.image),link:new f.e(null==e?void 0:e.link),page_to_open:new f.e(null==e?void 0:e.page_to_open),active:new f.e(null==e?void 0:e.active)})}},{key:"create_banner",value:function(e){return this.http.post(this.apiEndPointsService.BANNER.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"update_banner",value:function(e,t){return this.http.patch(this.apiEndPointsService.BANNER.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}},{key:"banner_details",value:function(e){return this.http.get(this.apiEndPointsService.BANNER.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}}]),t}()).\u0275fac=function(e){return new(e||o)(b.ac(l.a),b.ac(u.a),b.ac(d.b),b.ac(h.a),b.ac(s.f),b.ac(p.a),b.ac(f.d))},o.\u0275prov=b.Ib({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=a("wTG2"),S=a("G0yt"),R=a("a3+x"),y=function(e){return["/top-banner/add",e]};function k(e,t){if(1&e){var n=b.Tb();b.Sb(0,"tr"),b.Sb(1,"td"),b.Nb(2,"img",31),b.Rb(),b.Sb(3,"td"),b.Lc(4),b.Rb(),b.Sb(5,"td"),b.Lc(6),b.Rb(),b.Sb(7,"td"),b.Lc(8),b.Rb(),b.Sb(9,"td"),b.Sb(10,"button",32),b.dc("click",(function(){b.zc(n);var e=t.$implicit;return b.hc(2).onChangeStatus(e)})),b.Nb(11,"i",33),b.Lc(12),b.Rb(),b.Rb(),b.Sb(13,"td"),b.Sb(14,"a",34),b.Sb(15,"i",35),b.Lc(16,"\ue254"),b.Rb(),b.Rb(),b.Rb(),b.Sb(17,"td",36),b.Sb(18,"button",37),b.dc("confirm",(function(){b.zc(n);var e=t.$implicit;return b.hc(2).onRemoveStock(e)}))("cancel",(function(){return b.zc(n),b.hc(2).cancelClicked=!0})),b.Sb(19,"i",35),b.Lc(20,"\ue872"),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&e){var i=t.$implicit,a=b.hc(2);b.zb(2),b.nc("src",null==i?null:i.image,b.Bc),b.zb(2),b.Mc(null==i?null:i.link),b.zb(2),b.Mc(null==i?null:i.page_to_open),b.zb(2),b.Mc(null!=i&&i.active?"Active":"Inactive"),b.zb(4),b.Nc(" ",null!=i&&i.active?"Inactive":"Active"," "),b.zb(2),b.mc("routerLink",b.qc(8,y,null==i?null:i.id)),b.zb(4),b.mc("popoverTitle",a.popoverTitle)("popoverMessage",a.popoverMessage)}}function _(e,t){if(1&e&&(b.Sb(0,"div",27),b.Sb(1,"table",28),b.Sb(2,"thead",29),b.Sb(3,"tr"),b.Sb(4,"th"),b.Lc(5," Image "),b.Rb(),b.Sb(6,"th"),b.Lc(7," Link "),b.Rb(),b.Sb(8,"th"),b.Lc(9," Page To Open "),b.Rb(),b.Sb(10,"th"),b.Lc(11," Status "),b.Rb(),b.Sb(12,"th"),b.Lc(13," Change Status "),b.Rb(),b.Sb(14,"th"),b.Lc(15," Update "),b.Rb(),b.Sb(16,"th"),b.Lc(17," Delete "),b.Rb(),b.Rb(),b.Rb(),b.Sb(18,"tbody"),b.Jc(19,k,21,10,"tr",30),b.Rb(),b.Rb(),b.Rb()),2&e){var n=b.hc();b.zb(19),b.mc("ngForOf",null==n.banners?null:n.banners.content)}}function L(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",38),b.Sb(2,"div",39),b.Sb(3,"div",40),b.Sb(4,"span",41),b.Lc(5,"Loading..."),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb())}function w(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",38),b.Sb(2,"div",42),b.Nb(3,"img",43),b.Rb(),b.Rb(),b.Rb())}var C,M=function(){return["/top-banner/add"]},z=((C=function(){function t(n,i,a,r){e(this,t),this.bannerListService=n,this.baseService=i,this.toastr=a,this.createBannerService=r,this.loading=!0,this.size=10,this.page=1,this.search_key="",this.popoverTitle="Are you sure?",this.popoverMessage="Are you really sure you want to delete this?",this.cancelClicked=!1,this.selectedStatus=null,this.status_list=[!0,!1]}return n(t,[{key:"ngOnInit",value:function(){this.filter()}},{key:"filter",value:function(){this.get_banners(this.page-1,this.size,this.search_key,this.selectedStatus)}},{key:"get_banners",value:function(e,t,n,i){var a=this;this.loading=!0,this.bannerListService.get_banners(e,t,n,i).subscribe((function(e){a.banners=e,a.loading=!1}),(function(e){a.loading=!1,a.baseService.handleError(e)}))}},{key:"onPaginateChange",value:function(e){this.page=e,this.get_banners(this.page-1,this.size,this.search_key,this.selectedStatus)}},{key:"onRemoveStock",value:function(e){var t=this;this.bannerListService.remove_banner(e.id).subscribe((function(e){t.toastr.success("Deleted Successfully!",""),t.ngOnInit()}),(function(e){t.baseService.handleError(e)}))}},{key:"formatDate",value:function(e){var t=""+(new Date(e).getMonth()+1),n=""+new Date(e).getDate(),i=new Date(e).getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,i].join("-")}},{key:"onChangeStatus",value:function(e){var t=this;confirm("Do you want to change the status")&&this.bannerListService.changeStatus(e).subscribe((function(e){t.toastr.success("Changed Status Successfully!",""),t.ngOnInit()}),(function(e){t.baseService.handleError(e)}))}}]),t}()).\u0275fac=function(e){return new(e||C)(b.Mb(g),b.Mb(u.a),b.Mb(d.b),b.Mb(v))},C.\u0275cmp=b.Gb({type:C,selectors:[["app-banner-list"]],decls:42,vars:13,consts:[[1,"row"],[1,"col-lg-12","grid-margin","stretch-card","mb-0"],[1,"card"],[1,"card-body"],[1,"card-title","row"],[1,"col-md-2"],["type","button",1,"btn","btn-gradient-success","btn-rounded","btn-fw","btn-sm",3,"routerLink"],[1,"col-md-6","text-center"],[1,"col-md-4"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","search by name","aria-label","username",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","btn-gradient-primary",3,"click"],[1,"col-md-11"],[1,"col-md-3","pr-md-0"],[1,"label-text"],["placeholder","Select",3,"items","ngModel","virtualScroll","ngModelChange"],[1,"col-md-1"],[2,"color","#FFF"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],[1,"fa","fa-arrow-right"],["class","table-responsive pt-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-12","grid-margin","stretch-card"],[1,"card-body","pt-0"],["aria-label","Default pagination",1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","pageChange"],[1,"table-responsive","pt-3"],[1,"table","table-striped","table-bordered"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["alt","images","width","100%","height","auto",1,"img-fluid",3,"src"],["type","button",1,"btn","btn-info","btn-sm","active",3,"click"],[1,"fa","fa-exchange"],["title","Edit","data-toggle","tooltip",1,"edit",3,"routerLink"],[1,"material-icons"],[1,"p-0"],["mwlConfirmationPopover","","placement","left",1,"btn","delete",3,"popoverTitle","popoverMessage","confirm","cancel"],[1,"col-12"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"text-center"],["src","./assets/icon/nodatafound.jpg","alt","not found image",1,"rounded",2,"width","400px","height","300px"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"div",3),b.Sb(4,"div",4),b.Sb(5,"div",5),b.Sb(6,"button",6),b.Lc(7,"Add "),b.Rb(),b.Rb(),b.Sb(8,"div",7),b.Sb(9,"h2"),b.Lc(10,"Banners"),b.Rb(),b.Rb(),b.Sb(11,"div",8),b.Sb(12,"div",9),b.Sb(13,"div",10),b.Sb(14,"input",11),b.dc("keyup.enter",(function(){return t.filter()}))("ngModelChange",(function(e){return t.search_key=e})),b.Rb(),b.Sb(15,"div",12),b.Sb(16,"button",13),b.dc("click",(function(){return t.filter()})),b.Lc(17,"Search"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(18,"div",0),b.Sb(19,"div",14),b.Sb(20,"div",0),b.Nb(21,"div",15),b.Nb(22,"div",15),b.Nb(23,"div",15),b.Sb(24,"div",15),b.Sb(25,"div",9),b.Sb(26,"label",16),b.Lc(27,"Status"),b.Rb(),b.Sb(28,"ng-select",17),b.dc("ngModelChange",(function(e){return t.selectedStatus=e})),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(29,"div",18),b.Sb(30,"div",9),b.Sb(31,"label",19),b.Lc(32,"/"),b.Rb(),b.Sb(33,"button",20),b.dc("click",(function(){return t.filter()})),b.Nb(34,"i",21),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Jc(35,_,20,1,"div",22),b.Jc(36,L,6,0,"div",23),b.Jc(37,w,4,0,"div",23),b.Rb(),b.Rb(),b.Rb(),b.Sb(38,"div",24),b.Sb(39,"div",2),b.Sb(40,"div",25),b.Sb(41,"ngb-pagination",26),b.dc("pageChange",(function(e){return t.page=e}))("pageChange",(function(e){return t.onPaginateChange(e)})),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.zb(6),b.mc("routerLink",b.pc(12,M)),b.zb(8),b.mc("ngModel",t.search_key),b.zb(14),b.mc("items",t.status_list)("ngModel",t.selectedStatus)("virtualScroll",!0),b.zb(7),b.mc("ngIf",0==t.loading),b.zb(1),b.mc("ngIf",1==t.loading),b.zb(1),b.mc("ngIf",0==(null==t.banners?null:t.banners.totalElements)),b.zb(4),b.mc("collectionSize",null==t.banners?null:t.banners.totalElements)("pageSize",t.size)("page",t.page)("maxSize",6))},directives:[s.g,f.c,f.m,f.p,m.a,c.m,S.j,c.l,s.i,R.a],styles:[".card[_ngcontent-%COMP%]{border-radius:0}h2[_ngcontent-%COMP%]{font-size:26px;font-width:900}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.edit[_ngcontent-%COMP%]{color:#ffc107;cursor:pointer}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#e34724;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.name[_ngcontent-%COMP%]{cursor:pointer;color:#0b7dda}"]}),C),I=a("flBB");function B(e,t){1&e&&(b.Sb(0,"h4",23),b.Lc(1,"Create new Banner"),b.Rb())}function P(e,t){1&e&&(b.Sb(0,"h4",23),b.Lc(1,"Update Banner"),b.Rb())}function E(e,t){if(1&e&&(b.Sb(0,"div"),b.Nb(1,"img",24),b.Rb()),2&e){var n=b.hc();b.zb(1),b.mc("src",n.logoUrl,b.Bc)}}var N,O,T,A=((N=function(){function t(n,i,a,r,o,c){e(this,t),this.datePipe=n,this.activatedRoute=i,this.router=a,this.toastr=r,this.fileUploadService=o,this.createBannerService=c,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.products=[],this.country=[{id:1,name:"Bangladesh"},{id:2,name:"Japan"}],this.shops=[],this.variations=[],this.types=[{id:1,name:"Amount"},{id:2,name:"Percentage"}],this.selectedCountry=[],this.checked=!0,this.paramId=null,this.selectedDiscountType=this.types[1],this.flag=!1,this.buttonStatus="Create",this.status_list=[{id:1,name:"Active",value:!0},{id:1,name:"Inactive",value:!1}]}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerBannerForm=this.createBannerService.initializeForm(),this.paramId&&(this.buttonStatus="Update",this.createBannerService.banner_details(this.paramId).subscribe((function(t){e.registerBannerForm=e.createBannerService.populateForm(t),e.logoUrl=null==t?void 0:t.image,e.selectedLogo=null==t?void 0:t.image})))}},{key:"onLogoChanged",value:function(e){var t=this;if(this.selectedLogo=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedLogo=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe((function(e){t.assignLogo(e)}),(function(e){t.toastr.error("Image upload failed, please try again later")}));for(var n=e.target.files.length,i=0;i<n;i++){var a=new FileReader;a.onload=function(e){t.logoUrl=e.target.result},a.readAsDataURL(e.target.files[i])}}}},{key:"assignLogo",value:function(e){for(var t,n=0;n<e.length;n++)t=e[n].thumb_url;this.registerBannerForm.controls.image.setValue(t)}},{key:"createBanner",value:function(){var e=this;"Create"==this.buttonStatus?this.createBannerService.create_banner(this.registerBannerForm.value).subscribe((function(t){e.toastr.success("Top Banner Created Successfully"),e.router.navigate(["top-banner"])})):this.createBannerService.update_banner(this.paramId,this.registerBannerForm.value).subscribe((function(t){e.toastr.success("Top Banner Updated Successfully"),e.router.navigate(["top-banner"])}))}}]),t}()).\u0275fac=function(e){return new(e||N)(b.Mb(c.e),b.Mb(s.a),b.Mb(s.f),b.Mb(d.b),b.Mb(I.a),b.Mb(v))},N.\u0275cmp=b.Gb({type:N,selectors:[["app-create-banner"]],decls:44,vars:9,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"label-text"],["type","text","id","link","placeholder","link","formControlName","link",1,"form-control"],["type","text","id","page_to_open","placeholder","page to open","formControlName","page_to_open",1,"form-control"],["bindLabel","name","bindValue","value","placeholder","Select","formControlName","active",3,"items","hideSelected","virtualScroll"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button","routerLink","/top-banner",1,"btn","btn-gradient-danger","btn-icon-text"],[1,"mdi","mdi-close","btn-icon-prepend"],[1,"card-title"],["alt","",1,"imageClass",2,"width","100px",3,"src"]],template:function(e,t){if(1&e){var n=b.Tb();b.Sb(0,"div",0),b.Sb(1,"div",1),b.Jc(2,B,2,0,"h4",2),b.Jc(3,P,2,0,"h4",2),b.Sb(4,"form",3),b.Sb(5,"div",4),b.Sb(6,"div",5),b.Sb(7,"div",6),b.Sb(8,"div",6),b.Sb(9,"label"),b.Lc(10,"Image"),b.Sb(11,"sup"),b.Lc(12,"*"),b.Rb(),b.Rb(),b.Nb(13,"input",7),b.Sb(14,"div",8),b.Sb(15,"input",9,10),b.dc("change",(function(e){return t.onLogoChanged(e)})),b.Rb(),b.Sb(17,"span",11),b.Sb(18,"button",12),b.dc("click",(function(){return b.zc(n),b.wc(16).click()})),b.Lc(19,"Upload"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Jc(20,E,2,1,"div",13),b.Rb(),b.Rb(),b.Sb(21,"div",5),b.Sb(22,"div",6),b.Sb(23,"label",14),b.Lc(24,"Link"),b.Rb(),b.Nb(25,"input",15),b.Rb(),b.Rb(),b.Rb(),b.Sb(26,"div",4),b.Sb(27,"div",5),b.Sb(28,"div",6),b.Sb(29,"label",14),b.Lc(30,"Page to Open"),b.Rb(),b.Nb(31,"input",16),b.Rb(),b.Rb(),b.Sb(32,"div",5),b.Sb(33,"div",6),b.Sb(34,"label",14),b.Lc(35,"Status"),b.Rb(),b.Nb(36,"ng-select",17),b.Rb(),b.Rb(),b.Rb(),b.Sb(37,"div",18),b.Sb(38,"button",19),b.dc("click",(function(){return t.createBanner()})),b.Nb(39,"i",20),b.Lc(40),b.Rb(),b.Sb(41,"button",21),b.Nb(42,"i",22),b.Lc(43," Cancel "),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}2&e&&(b.zb(2),b.mc("ngIf",null==t.paramId),b.zb(1),b.mc("ngIf",null!=t.paramId),b.zb(1),b.mc("formGroup",t.registerBannerForm),b.zb(16),b.mc("ngIf",null!=t.selectedLogo),b.zb(16),b.mc("items",t.status_list)("hideSelected",!0)("virtualScroll",!0),b.zb(2),b.mc("disabled",!t.registerBannerForm.valid||t.flag),b.zb(2),b.Nc(" ",t.buttonStatus," "))},directives:[c.m,f.w,f.n,f.h,f.c,f.m,f.f,m.a,s.g],styles:[".form-check[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}.form-check-label[_ngcontent-%COMP%]{line-height:.875rem;min-height:0;padding-bottom:6px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:#ca371d}"]}),N),x=[{path:"",component:z},{path:"add",component:A},{path:"add/:id",component:A}],F=((O=function t(){e(this,t)}).\u0275mod=b.Kb({type:O}),O.\u0275inj=b.Jb({factory:function(e){return new(e||O)},imports:[[s.j.forChild(x)],s.j]}),O),D=a("iELJ"),J=a("Q2Ze"),j=((T=function t(){e(this,t)}).\u0275mod=b.Kb({type:T}),T.\u0275inj=b.Jb({factory:function(e){return new(e||T)},imports:[[c.c,F,D.d,m.b,f.j,f.s,J.a,R.b,S.h]]}),T)},flBB:function(t,i,a){"use strict";a.d(i,"a",(function(){return b}));var r=a("8Y7J"),o=a("8yjs"),c=a("lX9O"),s=a("IheW"),b=function(){var t=function(){function t(n,i,a){e(this,t),this.apiEndpoints=n,this.authService=i,this.http=a}return n(t,[{key:"uploadImage",value:function(e){for(var t=new FormData,n=0;n<e.length;n++)t.append("files",e[n]);var i=this.apiEndpoints.IMAGE.UPLOAD()+this.authService.getAccessToken();return this.http.post(i,t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.ac(o.a),r.ac(c.a),r.ac(s.a))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();