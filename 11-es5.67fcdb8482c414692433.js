!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2AP2":function(t,i,o){"use strict";o.d(i,"a",(function(){return O}));var c=o("SVse"),a=o("8Y7J"),r=o("iInd"),s=o("iELJ"),l=o("EApP"),u=o("lX9O"),d=o("hmKI"),b=o("flBB"),h=o("lED8"),p=o("iZnz"),v=o("PDDa"),g=o("mb36"),S=o("qof1"),f=o("s7LF"),m=o("wTG2");function k(e,t){1&e&&(a.Sb(0,"h4",32),a.Lc(1,"Create new shop"),a.Rb())}function _(e,t){1&e&&(a.Sb(0,"h4",32),a.Lc(1,"Update shop"),a.Rb())}function y(e,t){if(1&e&&(a.Sb(0,"option",71),a.Lc(1),a.Rb()),2&e){var n=t.$implicit;a.mc("ngValue",n),a.zb(1),a.Mc(n)}}function R(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"img",72),a.Rb()),2&e){var n=a.hc();a.zb(1),a.mc("src",n.logoUrl,a.Bc)}}function C(e,t){if(1&e&&(a.Sb(0,"div"),a.Nb(1,"img",72),a.Rb()),2&e){var n=a.hc();a.zb(1),a.mc("src",n.bannerUrl,a.Bc)}}var P=function(){return{standalone:!0}};function T(e,t){if(1&e){var n=a.Tb();a.Sb(0,"div",73),a.Sb(1,"div",74),a.Sb(2,"label",75),a.Lc(3,"Day"),a.Rb(),a.Sb(4,"ng-select",76),a.dc("ngModelChange",(function(e){return a.zc(n),t.$implicit.day_of_week=e}))("change",(function(e){a.zc(n);var i=t.$implicit;return a.hc().onChangeDay(e,i)})),a.Rb(),a.Rb(),a.Sb(5,"div",77),a.Sb(6,"label",75),a.Lc(7,"Open Time"),a.Rb(),a.Sb(8,"ng-select",78),a.dc("ngModelChange",(function(e){return a.zc(n),t.$implicit.opens_at=e}))("change",(function(e){a.zc(n);var i=t.$implicit;return a.hc().onChangeOpenTime(e,i)})),a.Rb(),a.Rb(),a.Sb(9,"div",77),a.Sb(10,"label",75),a.Lc(11,"Closed Time"),a.Rb(),a.Sb(12,"ng-select",79),a.dc("ngModelChange",(function(e){return a.zc(n),t.$implicit.closes_at=e}))("change",(function(e){a.zc(n);var i=t.$implicit;return a.hc().onChangeClosedTime(e,i)})),a.Rb(),a.Rb(),a.Sb(13,"div",80),a.Sb(14,"label",81),a.Lc(15,"#"),a.Rb(),a.Sb(16,"div"),a.Sb(17,"button",82),a.dc("click",(function(){a.zc(n);var e=t.$implicit;return a.hc().onCancel(e)})),a.Nb(18,"i",83),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){var i=t.$implicit,o=a.hc();a.zb(4),a.mc("items",o.days)("hideSelected",!0)("virtualScroll",!0)("ngModel",i.day_of_week)("ngModelOptions",a.pc(15,P)),a.zb(4),a.mc("items",o.schedules)("hideSelected",!0)("virtualScroll",!0)("ngModel",i.opens_at)("ngModelOptions",a.pc(16,P)),a.zb(4),a.mc("items",o.schedules)("hideSelected",!0)("virtualScroll",!0)("ngModel",i.closes_at)("ngModelOptions",a.pc(17,P))}}function L(e,t){1&e&&(a.Sb(0,"sup"),a.Lc(1,"*"),a.Rb())}function w(e,t){if(1&e){var n=a.Tb();a.Sb(0,"div",84),a.Sb(1,"div",8),a.Sb(2,"label",85),a.Lc(3),a.Jc(4,L,2,0,"sup",20),a.Rb(),a.Sb(5,"ng-select",86),a.dc("ngModelChange",(function(e){a.zc(n);var i=t.index;return a.hc().selectedLocationArray[i]=e}))("change",(function(e){a.zc(n);var i=t.index;return a.hc().setLocationIdInForm(e,i)})),a.Rb(),a.Rb(),a.Rb()}if(2&e){var i=t.index,o=a.hc();a.zb(3),a.Mc(o.location_label_array[i]),a.zb(1),a.mc("ngIf",0==i),a.zb(1),a.mc("items",o.location_array[i])("hideSelected",!0)("virtualScroll",!0)("ngModel",o.selectedLocationArray[i])("ngModelOptions",a.pc(7,P))}}var O=function(){var t=function(){function t(n,i,o,c,a,r,s,l,u,d,b,h,p,v){e(this,t),this.datePipe=n,this.activatedRoute=i,this.dialog=o,this.router=c,this.dialogRef=a,this.toastr=r,this.authService=s,this.createShopService=l,this.fileUploadService=u,this.addShopToCampaignService=d,this.campaignsService=b,this.listOfTypesService=h,this.baseService=p,this.locationsService=v,this.logoList=null,this.bannerList=null,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.paramId=null,this.buttonStatus="Create",this.location_id=null,this.location_array=[],this.location_label_array=[],this.selectedLocationArray=[],this.shop_types=["GENERAL","RESTAURANT"],this.days=[{id:1,name:"Saturday",value:"SATURDAY"},{id:2,name:"Sunday",value:"SUNDAY"},{id:3,name:"Monday",value:"MONDAY"},{id:4,name:"Tuesday",value:"TUESDAY"},{id:5,name:"Wednesday",value:"WEDNESDAY"},{id:6,name:"Thursday",value:"THURSDAY"},{id:7,name:"Friday",value:"FRIDAY"}],this.schedules=this.getTimeRanges(15,"it-IT"),this.selectedSchedule=[]}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerShopForm=this.createShopService.initializeForm(),this.registerShopToCampaignForm=this.addShopToCampaignService.initializeForm(),this.get_user(0,10),this.get_location_types(0,1e3),this.paramId&&(this.buttonStatus="Update",this.createShopService.shop_details(this.paramId).subscribe((function(t){var n;e.registerShopForm=e.createShopService.populateForm(t),e.logoUrl=null==t?void 0:t.logo,e.selectedLogo=null==t?void 0:t.logo,e.bannerUrl=null==t?void 0:t.banner,e.selectedBanner=null==t?void 0:t.banner,e.setLocation(t),e.selectedSchedule=null==t?void 0:t.open_schedules,null===(n=null==t?void 0:t.open_schedules)||void 0===n||n.forEach((function(e){}))}))),this.campaignsService.get_campaigns(0,1e3).subscribe((function(t){e.campaigns=t.content}))}},{key:"setLocation",value:function(e){}},{key:"get_user",value:function(e,t){var n=this;this.createShopService.get_owners(e,t).subscribe((function(e){n.owners=null==e?void 0:e.content}))}},{key:"onSearchOwner",value:function(e){var t=this;""!=e.target.value?this.createShopService.search_owners(e.target.value,0,100).subscribe((function(e){t.owners=null==e?void 0:e.content})):this.get_user(0,10)}},{key:"addCountry",value:function(e){return{name:e,id:-1}}},{key:"onLogoChanged",value:function(e){var t=this;if(this.selectedLogo=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedLogo=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe((function(e){t.assignLogo(e)}),(function(e){t.toastr.error("Image upload failed, please try again later")}));for(var n=e.target.files.length,i=0;i<n;i++){var o=new FileReader;o.onload=function(e){t.logoUrl=e.target.result},o.readAsDataURL(e.target.files[i])}}}},{key:"assignLogo",value:function(e){for(var t,n=0;n<e.length;n++)t=e[n].thumb_url;this.registerShopForm.controls.logo.setValue(t)}},{key:"onBannerChanged",value:function(e){var t=this;if(this.selectedBanner=e.target.files[0],e.target.files&&e.target.files[0]){if(e.target.files[0].size>=5e6)return this.selectedBanner=null,void window.alert("Image size must be less than 5MB");this.fileUploadService.uploadImage(e.target.files).subscribe((function(e){t.assignBanner(e)}),(function(e){t.toastr.error("Image upload failed, please try again later")}));for(var n=e.target.files.length,i=0;i<n;i++){var o=new FileReader;o.onload=function(e){t.bannerUrl=e.target.result},o.readAsDataURL(e.target.files[i])}}}},{key:"assignBanner",value:function(e){for(var t,n=0;n<e.length;n++)t=e[n].thumb_url;this.registerShopForm.controls.banner.setValue(t)}},{key:"uploadImage",value:function(){}},{key:"closeDialog",value:function(){this.dialog.openDialogs&&this.dialog.openDialogs.length?0==this.dialogRef.getState()&&this.dialogRef.close(null):this.router.navigate(["/shops"])}},{key:"createShop",value:function(){var e=this;"Create"==this.buttonStatus?this.createShopService.create_shop(this.registerShopForm.value).subscribe((function(t){e.addShopToCampaign(t),e.toastr.success("Shop Created Successfully"),e.router.navigate(["shops"])})):this.createShopService.update_shop(this.paramId,this.registerShopForm.value).subscribe((function(t){e.addShopToCampaign(t),e.toastr.success("Shop Updated Successfully"),e.router.navigate(["shops"])}))}},{key:"addShopToCampaign",value:function(e){var t=this;null!=this.selectedCampaign&&(this.registerShopToCampaignForm.get("campaign_id").setValue(this.selectedCampaign),this.registerShopToCampaignForm.get("shop_id").setValue(e.id),this.addShopToCampaignService.add_shop_to_complain(this.registerShopToCampaignForm.value).subscribe((function(e){t.toastr.success("Shop added to the campaign successfully")})))}},{key:"onChangeCampaign",value:function(e){var t=this;this.campaignsService.search_campaigns(e.target.value).subscribe((function(e){t.campaigns=e.content}))}},{key:"setLocationIdInForm",value:function(e,t){e?(this.locations_loading(t+1,0,1e3,e.id),this.registerShopForm.get("address").get("location_id").setValue(e.id)):(this.location_array.length=t+1,this.selectedLocationArray.length=t,this.registerShopForm.get("address").get("location_id").setValue(0==this.selectedLocationArray.length?null:this.selectedLocationArray[t-1].id))}},{key:"get_location_types",value:function(e,t){var n=this;this.listOfTypesService.get_location_types(e,t).subscribe((function(e){n.location_types=e;for(var t=0;t<n.location_types.totalElements;t++)n.location_label_array[t]=n.location_types.content[t].label;n.locations_loading(0,0,1e3,null)}),(function(e){n.baseService.handleError(e)}))}},{key:"locations_loading",value:function(e,t,n,i){var o=this;this.locationsService.get_location_list(t,n,i).subscribe((function(t){o.location_array[e]=t.content}))}},{key:"getTimeRanges",value:function(e,t){for(var n=[],i=new Date,o={hour:"numeric",minute:"numeric"},c=0;c<1440;c+=e)i.setHours(0),i.setMinutes(c),i.setSeconds(0),i.toLocaleTimeString(t,o),n.push(i.toLocaleTimeString(t,{hour12:!1}));return n}},{key:"addShopOpenSchedule",value:function(){this.selectedSchedule.push({day_of_week:null,opens_at:null,closes_at:null})}},{key:"onChangeDay",value:function(e,t){t.day_of_week=null==e?void 0:e.value,this.setOpenScheduleToForm()}},{key:"onChangeOpenTime",value:function(e,t){t.opens_at=e,this.setOpenScheduleToForm()}},{key:"onChangeClosedTime",value:function(e,t){t.closes_at=e,this.setOpenScheduleToForm()}},{key:"onCancel",value:function(e){this.selectedSchedule=this.selectedSchedule.filter((function(t){return t.day_of_week!==e.day_of_week&&t.opens_at!==e.opens_at&&t.closes_at!==e.closes_at})),this.setOpenScheduleToForm()}},{key:"setOpenScheduleToForm",value:function(){this.registerShopForm.get("open_schedules").setValue(this.selectedSchedule)}},{key:"onTyping",value:function(e){(e.target.value>100||e.target.value<0)&&this.registerShopForm.get("commission_percentage").setValue(0)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Mb(c.e),a.Mb(r.a),a.Mb(s.b),a.Mb(r.f),a.Mb(s.e),a.Mb(l.b),a.Mb(u.a),a.Mb(d.a),a.Mb(b.a),a.Mb(h.a),a.Mb(p.a),a.Mb(v.a),a.Mb(g.a),a.Mb(S.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-add-shop"]],features:[a.yb([c.e])],decls:157,vars:13,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"form-group","row"],[1,"col-md-6"],["for","exampleInputName1"],["type","text","id","exampleInputName1","placeholder","Shop Name","formControlName","name",1,"form-control"],[1,"form-group"],["for","shopType"],["id","shopType","formControlName","type",1,"form-control"],["value","null","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],["fileInput",""],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],["bannerInput",""],[1,"form-group","pt-2"],["for","commission"],["type","number","id","commission","placeholder","commission","formControlName","commission_percentage","min","0","max","100",1,"form-control",3,"input"],["bindLabel","name","bindValue","id","placeholder","select owner","formControlName","owner_id",3,"items","hideSelected","virtualScroll","keyup"],[1,"col-12","my-2"],["type","button",1,"btn","btn-light","btn-sm","mb-2",3,"click"],[1,"fa","fa-plus"],[1,"col-12","pb-2"],["class","row pb-2",4,"ngFor","ngForOf"],["formGroupName","address",1,"col-md-6"],[1,"card-title"],[1,"col-6","pr-2"],["for","present"],["type","text","id","present","formControlName","address_line_one",1,"form-control"],[1,"col-6","pl-2"],["for","permanent"],["type","text","id","permanent","formControlName","address_line_two",1,"form-control"],[1,"col-md-4","pr-0"],["for","altitude"],["type","number","id","altitude","placeholder","altitude","formControlName","altitude",1,"form-control"],["for","latitude"],["type","number","id","latitude","placeholder","latitude","formControlName","latitude",1,"form-control"],[1,"col-md-4"],["for","longitude"],["type","number","id","longitude","placeholder","longitude","formControlName","longitude",1,"form-control"],["class","col-6",4,"ngFor","ngForOf"],["for","bank"],["type","text","id","bank","placeholder","Bank Name","formControlName","bank_name",1,"form-control"],["for","branch"],["type","text","id","branch","placeholder","Branch","formControlName","branch_name",1,"form-control"],["for","account"],["type","text","id","account","placeholder","Account Name","formControlName","account_name",1,"form-control"],["for","accountNumber"],["type","text","id","accountNumber","placeholder","Account Number","formControlName","account_number",1,"form-control"],[1,"col-12"],["for","routing"],["type","text","id","routing","placeholder","Routing","formControlName","routing",1,"form-control"],[1,"row","mx-0"],[1,"form-check"],["type","checkbox","value","true","id","defaultCheck1","formControlName","ecommerce_activated",1,"form-check-input"],["for","defaultCheck1",1,"form-check-label","ml-0","font-weight-bold"],[1,"form-check","flagship"],["type","checkbox","value","false","id","defaultCheck2","formControlName","flagship",1,"form-check-input"],["for","defaultCheck2",1,"form-check-label","ml-0","font-weight-bold"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button",1,"btn","btn-gradient-danger","btn-icon-text",3,"click"],[1,"mdi","mdi-close","btn-icon-prepend"],[3,"ngValue"],["alt","",1,"imageClass",3,"src"],[1,"row","pb-2"],[1,"col-4"],[1,""],["bindLabel","name","bindValue","value","placeholder","select day",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],[1,"col-3"],["placeholder","open time",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],["placeholder","closed time",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"],[1,"col-2"],[2,"color","#FFF"],["type","button",1,"btn","btn-light",2,"background","red","padding","8px","color","#FFF",3,"click"],[1,"fas","fa-times"],[1,"col-6"],[1,"label-text"],["bindLabel","label","placeholder","Search",3,"items","hideSelected","virtualScroll","ngModel","ngModelOptions","ngModelChange","change"]],template:function(e,t){if(1&e){var n=a.Tb();a.Sb(0,"div",0),a.Sb(1,"div",1),a.Jc(2,k,2,0,"h4",2),a.Jc(3,_,2,0,"h4",2),a.Sb(4,"form",3),a.Sb(5,"div",4),a.Sb(6,"div",5),a.Sb(7,"label",6),a.Lc(8,"Shop Name"),a.Sb(9,"sup"),a.Lc(10,"*"),a.Rb(),a.Rb(),a.Nb(11,"input",7),a.Rb(),a.Sb(12,"div",5),a.Sb(13,"div",8),a.Sb(14,"label",9),a.Lc(15,"Shop Type"),a.Rb(),a.Sb(16,"select",10),a.Sb(17,"option",11),a.Lc(18,"Choose your shop type"),a.Rb(),a.Jc(19,y,2,2,"option",12),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(20,"div",13),a.Sb(21,"div",5),a.Sb(22,"div",8),a.Sb(23,"label"),a.Lc(24,"Logo"),a.Sb(25,"sup"),a.Lc(26,"*"),a.Rb(),a.Rb(),a.Nb(27,"input",14),a.Sb(28,"div",15),a.Sb(29,"input",16,17),a.dc("change",(function(e){return t.onLogoChanged(e)})),a.Rb(),a.Sb(31,"span",18),a.Sb(32,"button",19),a.dc("click",(function(){return a.zc(n),a.wc(30).click()})),a.Lc(33,"Upload"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Jc(34,R,2,1,"div",20),a.Rb(),a.Sb(35,"div",5),a.Sb(36,"div",8),a.Sb(37,"label"),a.Lc(38,"Banner"),a.Rb(),a.Nb(39,"input",14),a.Sb(40,"div",15),a.Sb(41,"input",16,21),a.dc("change",(function(e){return t.onBannerChanged(e)})),a.Rb(),a.Sb(43,"span",18),a.Sb(44,"button",19),a.dc("click",(function(){return a.zc(n),a.wc(42).click()})),a.Lc(45,"Upload"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Jc(46,C,2,1,"div",20),a.Rb(),a.Rb(),a.Sb(47,"div",13),a.Sb(48,"div",5),a.Sb(49,"div",22),a.Sb(50,"label",23),a.Lc(51,"Commission in Percentage"),a.Sb(52,"sup"),a.Lc(53,"*"),a.Rb(),a.Rb(),a.Sb(54,"input",24),a.dc("input",(function(e){return t.onTyping(e)})),a.Rb(),a.Rb(),a.Rb(),a.Sb(55,"div",5),a.Sb(56,"div",22),a.Sb(57,"label"),a.Lc(58,"Select Owner"),a.Rb(),a.Sb(59,"ng-select",25),a.dc("keyup",(function(e){return t.onSearchOwner(e)})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(60,"div",13),a.Sb(61,"div",26),a.Sb(62,"button",27),a.dc("click",(function(){return t.addShopOpenSchedule()})),a.Nb(63,"i",28),a.Lc(64," Add Open Schedule "),a.Rb(),a.Rb(),a.Sb(65,"div",29),a.Jc(66,T,19,18,"div",30),a.Rb(),a.Rb(),a.Sb(67,"div",13),a.Sb(68,"div",31),a.Sb(69,"h4",32),a.Lc(70,"Address"),a.Rb(),a.Sb(71,"div",13),a.Sb(72,"div",33),a.Sb(73,"div",8),a.Sb(74,"label",34),a.Lc(75,"Address 1"),a.Sb(76,"sup"),a.Lc(77,"*"),a.Rb(),a.Rb(),a.Nb(78,"input",35),a.Rb(),a.Rb(),a.Sb(79,"div",36),a.Sb(80,"div",8),a.Sb(81,"label",37),a.Lc(82,"Address 2"),a.Rb(),a.Nb(83,"input",38),a.Rb(),a.Rb(),a.Rb(),a.Sb(84,"div",13),a.Sb(85,"div",39),a.Sb(86,"div",8),a.Sb(87,"label",40),a.Lc(88,"Altitude"),a.Sb(89,"sup"),a.Lc(90,"*"),a.Rb(),a.Rb(),a.Nb(91,"input",41),a.Rb(),a.Rb(),a.Sb(92,"div",39),a.Sb(93,"div",8),a.Sb(94,"label",42),a.Lc(95,"Latitude"),a.Sb(96,"sup"),a.Lc(97,"*"),a.Rb(),a.Rb(),a.Nb(98,"input",43),a.Rb(),a.Rb(),a.Sb(99,"div",44),a.Sb(100,"div",8),a.Sb(101,"label",45),a.Lc(102,"Longitude"),a.Sb(103,"sup"),a.Lc(104,"*"),a.Rb(),a.Rb(),a.Nb(105,"input",46),a.Rb(),a.Rb(),a.Rb(),a.Sb(106,"div",13),a.Jc(107,w,6,8,"div",47),a.Rb(),a.Rb(),a.Sb(108,"div",5),a.Sb(109,"h4",32),a.Lc(110,"Bank Information"),a.Rb(),a.Sb(111,"div",13),a.Sb(112,"div",33),a.Sb(113,"div",8),a.Sb(114,"label",48),a.Lc(115,"Bank Name"),a.Rb(),a.Nb(116,"input",49),a.Rb(),a.Rb(),a.Sb(117,"div",36),a.Sb(118,"div",8),a.Sb(119,"label",50),a.Lc(120,"Branch"),a.Rb(),a.Nb(121,"input",51),a.Rb(),a.Rb(),a.Rb(),a.Sb(122,"div",13),a.Sb(123,"div",33),a.Sb(124,"div",8),a.Sb(125,"label",52),a.Lc(126,"Account Name"),a.Rb(),a.Nb(127,"input",53),a.Rb(),a.Rb(),a.Sb(128,"div",36),a.Sb(129,"div",8),a.Sb(130,"label",54),a.Lc(131,"Account Number"),a.Rb(),a.Nb(132,"input",55),a.Rb(),a.Rb(),a.Rb(),a.Sb(133,"div",13),a.Sb(134,"div",56),a.Sb(135,"div",8),a.Sb(136,"label",57),a.Lc(137,"Routing"),a.Rb(),a.Nb(138,"input",58),a.Rb(),a.Rb(),a.Rb(),a.Sb(139,"div",59),a.Sb(140,"div",5),a.Sb(141,"div",60),a.Nb(142,"input",61),a.Sb(143,"label",62),a.Lc(144,"Ecommerce Activated"),a.Rb(),a.Rb(),a.Rb(),a.Sb(145,"div",5),a.Sb(146,"div",63),a.Nb(147,"input",64),a.Sb(148,"label",65),a.Lc(149,"Flagship"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(150,"div",66),a.Sb(151,"button",67),a.dc("click",(function(){return t.createShop()})),a.Nb(152,"i",68),a.Lc(153),a.Rb(),a.Sb(154,"button",69),a.dc("click",(function(){return t.closeDialog()})),a.Nb(155,"i",70),a.Lc(156," Cancel "),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}2&e&&(a.zb(2),a.mc("ngIf",null==t.paramId),a.zb(1),a.mc("ngIf",null!=t.paramId),a.zb(1),a.mc("formGroup",t.registerShopForm),a.zb(15),a.mc("ngForOf",t.shop_types),a.zb(15),a.mc("ngIf",null!=t.selectedLogo),a.zb(12),a.mc("ngIf",null!=t.selectedBanner),a.zb(13),a.mc("items",t.owners)("hideSelected",!0)("virtualScroll",!0),a.zb(7),a.mc("ngForOf",t.selectedSchedule),a.zb(41),a.mc("ngForOf",null==t.location_types?null:t.location_types.content),a.zb(44),a.mc("disabled",!t.registerShopForm.valid),a.zb(2),a.Nc(" ",t.buttonStatus," "))},directives:[c.m,f.x,f.o,f.h,f.c,f.n,f.f,f.u,f.r,f.w,c.l,f.s,m.a,f.i,f.a,f.q],styles:[".imageClass[_ngcontent-%COMP%]{height:70px;width:100px;margin-right:5px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.file-upload-info[_ngcontent-%COMP%]{padding:7px}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:red}.flagship[_ngcontent-%COMP%]{margin-left:20px}"]}),t}()},PDDa:function(t,i,o){"use strict";o.d(i,"a",(function(){return b}));var c=o("8Y7J"),a=o("8yjs"),r=o("mb36"),s=o("EApP"),l=o("IheW"),u=o("iInd"),d=o("lX9O"),b=function(){var t=function(){function t(n,i,o,c,a,r){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r}return n(t,[{key:"get_location_types",value:function(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.FETCH(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"search_location_types",value:function(e){return this.http.get(this.apiEndPointsService.LOCATIONS_TYPES.SEARCH(e)+"&access_token="+this.authService.getAccessToken())}},{key:"remove_location_types",value:function(e){return this.http.delete(this.apiEndPointsService.LOCATIONS_TYPES.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.ac(a.a),c.ac(r.a),c.ac(s.b),c.ac(l.a),c.ac(u.f),c.ac(d.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},hmKI:function(t,i,o){"use strict";o.d(i,"a",(function(){return h}));var c=o("s7LF"),a=o("8Y7J"),r=o("8yjs"),s=o("mb36"),l=o("EApP"),u=o("IheW"),d=o("iInd"),b=o("lX9O"),h=function(){var t=function(){function t(n,i,o,c,a,r,s){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r,this.formBuilder=s}return n(t,[{key:"initializeForm",value:function(){return this.formBuilder.group({name:new c.e(null,[c.v.required]),commission_percentage:new c.e(null,[c.v.required]),logo:new c.e(null,[c.v.required]),banner:new c.e(null),type:new c.e("GENERAL"),bank_name:new c.e(null),branch_name:new c.e(null),account_name:new c.e(null),account_number:new c.e(null),routing:new c.e(null),country:new c.e(null),owner_id:new c.e(null),ecommerce_activated:new c.e(!0,[c.v.required]),flagship:new c.e(!1),address:this.formBuilder.group({address_line_one:new c.e(null,[c.v.required]),address_line_two:new c.e(null),altitude:new c.e(null,[c.v.required]),latitude:new c.e(null,[c.v.required]),location_id:new c.e(null,[c.v.required]),longitude:new c.e(null,[c.v.required])}),open_schedules:new c.e(null)})}},{key:"populateForm",value:function(e){var t,n,i,o,a,r;return this.formBuilder.group({id:new c.e(null==e?void 0:e.id),name:new c.e(null==e?void 0:e.name),commission_percentage:new c.e(null==e?void 0:e.commission_percentage),logo:new c.e(null==e?void 0:e.logo),type:new c.e(null==e?void 0:e.type),banner:new c.e(null==e?void 0:e.banner),bank_name:new c.e(null==e?void 0:e.bank_name),branch_name:new c.e(null==e?void 0:e.branch_name),account_name:new c.e(null==e?void 0:e.account_name),account_number:new c.e(null==e?void 0:e.account_number),routing:new c.e(null==e?void 0:e.routing),country:new c.e(null==e?void 0:e.country),owner_id:new c.e(null==e?void 0:e.owner_id),ecommerce_activated:new c.e(null==e?void 0:e.ecommerce_activated),flagship:new c.e(null==e?void 0:e.flagship),address:this.formBuilder.group({address_line_one:new c.e(null===(t=null==e?void 0:e.address)||void 0===t?void 0:t.address_line_one),address_line_two:new c.e(null===(n=null==e?void 0:e.address)||void 0===n?void 0:n.address_line_two),altitude:new c.e(null===(i=null==e?void 0:e.address)||void 0===i?void 0:i.altitude),latitude:new c.e(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.latitude),location_id:new c.e(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.location_id),longitude:new c.e(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.longitude)}),open_schedules:new c.e(null==e?void 0:e.open_schedules)})}},{key:"initializeVendorToCampaignForm",value:function(){return this.formBuilder.group({campaign_id:new c.e(null),shop_id:new c.e(null)})}},{key:"populateVendorToCampaignForm",value:function(e){return this.formBuilder.group({campaign_id:new c.e(null==e?void 0:e.campaign_id),shop_id:new c.e(null==e?void 0:e.shop_id)})}},{key:"create_shop",value:function(e){return this.http.post(this.apiEndPointsService.SHOP.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"update_shop",value:function(e,t){return this.http.patch(this.apiEndPointsService.SHOP.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}},{key:"shop_details",value:function(e){return this.http.get(this.apiEndPointsService.SHOP.FETCH_BY_ID(e)+"?access_token="+this.authService.getAccessToken())}},{key:"get_child_locations",value:function(e){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH_CHILD_LOCATION(e)+"&access_token="+this.authService.getAccessToken())}},{key:"search_child_location",value:function(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS.SEARCH_CHILD_LOCATION(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"search_owners",value:function(e,t,n){return this.http.get(this.apiEndPointsService.USERS.search(e,t,n)+"&access_token="+this.authService.getAccessToken())}},{key:"get_owners",value:function(e,t){return this.http.get(this.apiEndPointsService.USERS.get_users(e,t)+"&access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.ac(r.a),a.ac(s.a),a.ac(l.b),a.ac(u.a),a.ac(d.f),a.ac(b.a),a.ac(c.d))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},iZnz:function(t,i,o){"use strict";o.d(i,"a",(function(){return b}));var c=o("8Y7J"),a=o("8yjs"),r=o("mb36"),s=o("EApP"),l=o("IheW"),u=o("iInd"),d=o("lX9O"),b=function(){var t=function(){function t(n,i,o,c,a,r){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}return n(t,[{key:"get_campaigns",value:function(e,t){return this.http.get(this.apiEndPointsService.CAMPAIGNS.FETCH(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"search_campaigns",value:function(e){return this.http.get(this.apiEndPointsService.CAMPAIGNS.SEARCH(e)+"&access_token="+this.authService.getAccessToken())}},{key:"remove_campaigns",value:function(e){return this.http.delete(this.apiEndPointsService.CAMPAIGNS.DELETE(e)+"?access_token="+this.authService.getAccessToken())}},{key:"activate_campaign",value:function(e,t){return this.http.patch(this.apiEndPointsService.CAMPAIGNS.ACTIVE(e,t)+"&access_token="+this.authService.getAccessToken(),null)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.ac(a.a),c.ac(r.a),c.ac(s.b),c.ac(l.a),c.ac(u.f),c.ac(d.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},kkPz:function(t,i,o){"use strict";o.d(i,"a",(function(){return p}));var c=o("2Vo4"),a=o("XNiG"),r=o("8Y7J"),s=o("8yjs"),l=o("mb36"),u=o("EApP"),d=o("IheW"),b=o("iInd"),h=o("lX9O"),p=function(){var t=function(){function t(n,i,o,r,s,l){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=r,this.router=s,this.authService=l,this.selected_tab=new c.a("Approved"),this.approved_shop=new a.a,this.unapproved_shop=new a.a,this.disabled_shop=new a.a}return n(t,[{key:"get_approved_shop",value:function(e,t,n,i,o,c,a){var r=this;this.http.get(this.apiEndPointsService.SHOP.FETCH_APPROVED(e,t,n,i,o,c,a)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){r.approved_shop.next(e)}),(function(e){r.baseService.handleError(e)}))}},{key:"get_approved_shops",value:function(e,t){return this.http.get(this.apiEndPointsService.SHOP.FETCH_APPROVED(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"search_approved_shops",value:function(e){return this.http.get(this.apiEndPointsService.SHOP.SEARCH_APPROVED(e)+"&access_token="+this.authService.getAccessToken())}},{key:"search_approved_shop",value:function(e){var t=this;this.http.get(this.apiEndPointsService.SHOP.SEARCH_APPROVED(e)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){t.approved_shop.next(e)}),(function(e){t.baseService.handleError(e)}))}},{key:"get_unapproved_shop",value:function(e,t,n,i,o,c,a){var r=this;this.http.get(this.apiEndPointsService.SHOP.FETCH_UNAPPROVED(e,t,n,i,o,c,a)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){r.unapproved_shop.next(e)}),(function(e){r.baseService.handleError(e)}))}},{key:"search_unapproved_shop",value:function(e){var t=this;this.http.get(this.apiEndPointsService.SHOP.SEARCH_UNAPPROVED(e)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){t.unapproved_shop.next(e)}),(function(e){t.baseService.handleError(e)}))}},{key:"get_disabled_shop",value:function(e,t,n,i,o,c,a){var r=this;this.http.get(this.apiEndPointsService.SHOP.FETCH_DISABLED(e,t,n,i,o,c,a)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){r.disabled_shop.next(e)}),(function(e){r.baseService.handleError(e)}))}},{key:"search_disabled_shop",value:function(e){var t=this;this.http.get(this.apiEndPointsService.SHOP.SEARCH_DISABLED(e)+"&access_token="+this.authService.getAccessToken()).subscribe((function(e){t.disabled_shop.next(e)}),(function(e){t.baseService.handleError(e)}))}},{key:"shop_disable",value:function(e){return this.http.patch(this.apiEndPointsService.SHOP.DISABLE_SHOP(e.id)+"&access_token="+this.authService.getAccessToken(),null)}},{key:"shop_approve",value:function(e){return this.http.patch(this.apiEndPointsService.SHOP.APPROVE_SHOP(e.id)+"&access_token="+this.authService.getAccessToken(),null)}},{key:"shop_delete",value:function(e){return this.http.delete(this.apiEndPointsService.SHOP.DELETE(e.id)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.ac(s.a),r.ac(l.a),r.ac(u.b),r.ac(d.a),r.ac(b.f),r.ac(h.a))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},lED8:function(t,i,o){"use strict";o.d(i,"a",(function(){return h}));var c=o("s7LF"),a=o("8Y7J"),r=o("8yjs"),s=o("mb36"),l=o("EApP"),u=o("IheW"),d=o("iInd"),b=o("lX9O"),h=function(){var t=function(){function t(n,i,o,c,a,r,s){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r,this.formBuilder=s}return n(t,[{key:"initializeForm",value:function(){return this.formBuilder.group({campaign_id:new c.e(null,[c.v.required]),shop_id:new c.e(null,[c.v.required])})}},{key:"add_shop_to_complain",value:function(e){return this.http.post(this.apiEndPointsService.CAMPAIGN_VENDOR.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"remove_shop_from_campaign",value:function(e){return this.http.delete(this.apiEndPointsService.CAMPAIGN_VENDOR.DELETE(e.id)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.ac(r.a),a.ac(s.a),a.ac(l.b),a.ac(u.a),a.ac(d.f),a.ac(b.a),a.ac(c.d))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},pfSe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotNullOrUndefined=void 0,t.isNotNullOrUndefined=function(e){return null!=e}},qof1:function(t,i,o){"use strict";o.d(i,"a",(function(){return b}));var c=o("8Y7J"),a=o("8yjs"),r=o("mb36"),s=o("EApP"),l=o("IheW"),u=o("iInd"),d=o("lX9O"),b=function(){var t=function(){function t(n,i,o,c,a,r){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r}return n(t,[{key:"get_location_list",value:function(e,t,n,i){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH(e,t,n,i)+"&access_token="+this.authService.getAccessToken())}},{key:"get_location",value:function(e,t,n,i){return this.http.get(this.apiEndPointsService.LOCATIONS.FETCH_BY_TYPE_ID(e,t,n,i)+"&access_token="+this.authService.getAccessToken())}},{key:"search_location",value:function(e,t){return this.http.get(this.apiEndPointsService.LOCATIONS.SEARCH(e,t)+"&access_token="+this.authService.getAccessToken())}},{key:"remove_location",value:function(e){return this.http.delete(this.apiEndPointsService.LOCATIONS.DELETE(e)+"?access_token="+this.authService.getAccessToken())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.ac(a.a),c.ac(r.a),c.ac(s.b),c.ac(l.a),c.ac(u.f),c.ac(d.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},rvpB:function(t,i,o){"use strict";o.r(i),o.d(i,"StocksModule",(function(){return $}));var c=o("SVse"),a=o("iInd"),r=o("yU8x"),s=o("8Y7J"),l=o("iELJ"),u=o("s7LF");function d(e,t){if(1&e&&(s.Sb(0,"div"),s.Nb(1,"img",22),s.Rb()),2&e){var n=s.hc();s.zb(1),s.mc("src",n.imageUrl,s.Bc)}}var b,h,p=((b=function(){function t(n){e(this,t),this.dialogRef=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"onFileChanged",value:function(e){var t=this;if(this.selectedFile=e.target.files[0],e.target.files&&e.target.files[0]){var n=new FileReader;n.onload=function(e){t.imageUrl=e.target.result},n.readAsDataURL(e.target.files[0])}}},{key:"uploadImage",value:function(){this.imageUrl&&alert("image uploaded")}},{key:"closeDialog",value:function(){this.dialogRef.close(null)}},{key:"createCountry",value:function(){this.closeDialog()}}]),t}()).\u0275fac=function(e){return new(e||b)(s.Mb(l.e))},b.\u0275cmp=s.Gb({type:b,selectors:[["app-add-country"]],decls:32,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample"],[1,"form-group"],["for","exampleInputName1"],["type","text","id","exampleInputName1","placeholder","Country Name",1,"form-control"],["for","exampleTextarea1"],["id","exampleTextarea1","rows","6","placeholder","Description",1,"form-control"],[1,"row"],[1,"col-md-12"],["type","file","name","img[]",1,"file-upload-default"],[1,"input-group","col-xs-12"],["type","file",1,"form-control","file-upload-info",3,"change"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-gradient-primary",3,"click"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"click"],[1,"mdi","mdi-file-check","btn-icon-prepend"],["type","button",1,"btn","btn-gradient-danger","btn-icon-text",3,"click"],[1,"mdi","mdi-close","btn-icon-prepend"],["alt","",1,"imageClass",3,"src"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"h4",2),s.Lc(3,"Create new country"),s.Rb(),s.Sb(4,"form",3),s.Sb(5,"div",4),s.Sb(6,"label",5),s.Lc(7,"Country Name"),s.Rb(),s.Nb(8,"input",6),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"label",7),s.Lc(11,"Description"),s.Rb(),s.Nb(12,"textarea",8),s.Rb(),s.Sb(13,"div",9),s.Sb(14,"div",10),s.Sb(15,"div",4),s.Sb(16,"label"),s.Lc(17,"Logo"),s.Rb(),s.Nb(18,"input",11),s.Sb(19,"div",12),s.Sb(20,"input",13),s.dc("change",(function(e){return t.onFileChanged(e)})),s.Rb(),s.Sb(21,"span",14),s.Sb(22,"button",15),s.dc("click",(function(){return t.uploadImage()})),s.Lc(23,"Upload"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Jc(24,d,2,1,"div",16),s.Rb(),s.Rb(),s.Sb(25,"div",17),s.Sb(26,"button",18),s.dc("click",(function(){return t.createCountry()})),s.Nb(27,"i",19),s.Lc(28," Create "),s.Rb(),s.Sb(29,"button",20),s.dc("click",(function(){return t.closeDialog()})),s.Nb(30,"i",21),s.Lc(31," Cancel "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.zb(24),s.mc("ngIf",t.selectedFile))},directives:[u.x,u.o,u.p,c.m],styles:[".imageClass[_ngcontent-%COMP%]{height:70px;width:100px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.file-upload-info[_ngcontent-%COMP%]{padding:7px}"]}),b),v=o("AIlu"),g=o("2AP2"),S=o("pfSe"),f=o("8yjs"),m=o("mb36"),k=o("EApP"),_=o("IheW"),y=o("lX9O"),R=((h=function(){function t(n,i,o,c,a,r,s){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r,this.formBuilder=s}return n(t,[{key:"initializeForm",value:function(){return this.formBuilder.group({discount:new u.e(null),cashback_percentage:new u.e(null),country_id:new u.e(null),retail_price:new u.e(null,[u.v.required]),product_id:new u.e(null,[u.v.required]),quantity:new u.e(null,[u.v.required]),vendor_id:new u.e(null,[u.v.required]),unit_price:new u.e(null,[u.v.required]),supplier_id:new u.e(null),discount_valid_until:new u.e(null),variation_id:new u.e(null)})}},{key:"populateForm",value:function(e){return this.formBuilder.group({id:new u.e(null==e?void 0:e.id),country_id:new u.e(null==e?void 0:e.country_id),discount:new u.e(null==e?void 0:e.discount),cashback_percentage:new u.e(null==e?void 0:e.cashback_percentage),product_id:new u.e(null==e?void 0:e.product_id),quantity:new u.e(null==e?void 0:e.quantity),supplier_id:new u.e(null==e?void 0:e.supplier_id),unit_price:new u.e(null==e?void 0:e.unit_price),discount_valid_until:new u.e(null==e?void 0:e.discount_valid_until),vendor_id:new u.e(null==e?void 0:e.vendor_id),retail_price:new u.e(null==e?void 0:e.retail_price),variation_id:new u.e(null==e?void 0:e.variation_id)})}},{key:"create_stock",value:function(e){return this.http.post(this.apiEndPointsService.STOCK.CREATE()+"?access_token="+this.authService.getAccessToken(),e)}},{key:"update_stock",value:function(e,t){return this.http.patch(this.apiEndPointsService.STOCK.UPDATE(e)+"?access_token="+this.authService.getAccessToken(),t)}},{key:"stock_details",value:function(e){return this.http.get(this.apiEndPointsService.STOCK.DETAILS(e)+"?access_token="+this.authService.getAccessToken())}}]),t}()).\u0275fac=function(e){return new(e||h)(s.ac(f.a),s.ac(m.a),s.ac(k.b),s.ac(_.a),s.ac(a.f),s.ac(y.a),s.ac(u.d))},h.\u0275prov=s.Ib({token:h,factory:h.\u0275fac,providedIn:"root"}),h),C=o("L6Pg"),P=o("kkPz"),T=o("EbK6"),L=o("wTG2"),w=o("ienR");function O(e,t){1&e&&(s.Sb(0,"h4",43),s.Lc(1,"Create new stock"),s.Rb())}function E(e,t){1&e&&(s.Sb(0,"h4",43),s.Lc(1,"Update stock"),s.Rb())}function I(e,t){if(1&e&&(s.Sb(0,"option",44),s.Lc(1),s.Rb()),2&e){var n=t.$implicit;s.mc("ngValue",n),s.zb(1),s.Mc(n.name)}}function A(e,t){if(1&e&&(s.Sb(0,"label",45),s.Lc(1),s.Rb()),2&e){var n=s.hc();s.zb(1),s.Nc("Discount ",n.selectedDiscountType.name," can not be greater than unit price.")}}function M(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Amount "),s.Rb())}function N(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Percentage "),s.Rb())}function z(e,t){if(1&e&&(s.Sb(0,"option",44),s.Lc(1),s.Rb()),2&e){var n=t.$implicit;s.mc("ngValue",n),s.zb(1),s.Mc(n.name)}}function F(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Amount "),s.Rb())}function D(e,t){1&e&&(s.Sb(0,"div",46),s.Lc(1,"Percentage "),s.Rb())}function x(e,t){if(1&e){var n=s.Tb();s.Sb(0,"button",47),s.dc("click",(function(){return s.zc(n),s.hc().createStock()})),s.Nb(1,"i",48),s.Lc(2),s.Rb()}if(2&e){var i=s.hc();s.mc("disabled",!i.registerStockForm.valid||i.flag),s.zb(2),s.Nc(" ",i.buttonStatus," ")}}var B,V,U,H=function(){return{standalone:!0}},J=function(){return{dateInputFormat:"DD-MM-YYYY, h:mm:ss a"}},q=((B=function(){function t(n,i,o,c,a,r,s,l,u){e(this,t),this.datePipe=n,this.activatedRoute=i,this.dialog=o,this.createStockService=c,this.router=a,this.toastService=r,this.productService=s,this.shopService=l,this.variationsService=u,this.today=this.datePipe.transform(Date.now(),"yyyy-MM-dd").toString(),this.products=[],this.country=[{id:1,name:"Bangladesh"},{id:2,name:"Japan"}],this.shops=[],this.variations=[],this.types=[{id:1,name:"Amount"},{id:2,name:"Percentage"}],this.selectedCountry=[],this.checked=!0,this.paramId=null,this.selectedDiscountType=this.types[1],this.selectedCashBackType=this.types[1],this.buttonStatus="Create",this.flag=!1}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.paramId=this.activatedRoute.snapshot.paramMap.get("id"),this.registerStockForm=this.createStockService.initializeForm(),this.getProducts(),this.getShops(),this.getVariations(),this.paramId&&(this.buttonStatus="Update",this.createStockService.stock_details(this.paramId).subscribe((function(t){e.registerStockForm=e.createStockService.populateForm(t)})))}},{key:"getProducts",value:function(){var e=this;this.productService.get_approved_shop(0,100).subscribe((function(t){e.products=t.content}))}},{key:"getShops",value:function(){var e=this;this.shopService.get_approved_shops(0,100).subscribe((function(t){e.shops=t.content}))}},{key:"getVariations",value:function(){var e=this;this.variationsService.get_variations(0,100).subscribe((function(t){e.variations=t.content}))}},{key:"onSearchShop",value:function(e){var t=this;""!=e.target.value?this.shopService.search_approved_shops(e.target.value).subscribe((function(e){t.shops=e.content})):this.getShops()}},{key:"onSearchProduct",value:function(e){var t=this;""!=e.target.value?this.productService.search_product(e.target.value).subscribe((function(e){t.products=e.content})):this.getProducts()}},{key:"onSearchVariation",value:function(e){var t=this;""!=e.target.value?this.variationsService.search_variation(e.target.value).subscribe((function(e){t.variations=e.content})):this.getVariations()}},{key:"addSuppliers",value:function(e){return{name:e,id:-1}}},{key:"addProducts",value:function(e){return{name:e,id:-1}}},{key:"addCountry",value:function(e){return{name:e,id:-1}}},{key:"onSupplierChange",value:function(e){-1==e.id&&this.dialog.open(g.a).afterClosed().subscribe((function(e){}))}},{key:"onProductChange",value:function(e){-1==e.id&&this.dialog.open(v.a).afterClosed().subscribe((function(e){}))}},{key:"onCountryChange",value:function(e){var t=this;e.length&&-1==e[e.length-1].id&&this.dialog.open(p).afterClosed().subscribe((function(e){null==e&&(t.selectedCountry=[])}))}},{key:"onChangeDiscountType",value:function(){this.onChangeDiscount()}},{key:"discountConversion",value:function(){"Amount"==this.selectedDiscountType.name&&(this.registerStockForm.value.discount=this.percentageCalculation(this.registerStockForm.value.discount))}},{key:"totalCalculatorFromPercentage",value:function(e,t){return e*t/100}},{key:"percentageCalculation",value:function(e){return(e/100).toFixed(2)}},{key:"onChangeCashBack",value:function(){}},{key:"onChangeCashBackType",value:function(){var e,t;"Percentage"==(null===(e=this.selectedCashBackType)||void 0===e?void 0:e.name)&&Object(S.isNotNullOrUndefined)(this.registerStockForm.value.cashback_percentage)&&this.registerStockForm.get("cashback_percentage").setValue(Number(this.percentageCalculation(this.registerStockForm.value.cashback_percentage))),"Amount"==(null===(t=this.selectedCashBackType)||void 0===t?void 0:t.name)&&Object(S.isNotNullOrUndefined)(this.registerStockForm.value.cashback_percentage)&&this.registerStockForm.get("cashback_percentage").setValue(100*Number(this.registerStockForm.value.cashback_percentage))}},{key:"onDiscountTyping",value:function(e){var t;"Percentage"==(null===(t=this.selectedDiscountType)||void 0===t?void 0:t.name)&&(e.target.value>100||e.target.value<0)&&this.registerStockForm.get("discount").setValue(0)}},{key:"onCashBackTyping",value:function(e){var t;"Percentage"==(null===(t=this.selectedCashBackType)||void 0===t?void 0:t.name)&&(e.target.value>100||e.target.value<0)&&this.registerStockForm.get("cashback_percentage").setValue(0)}},{key:"createStock",value:function(){var e,t,n=this;"Amount"==(null===(e=this.selectedCashBackType)||void 0===e?void 0:e.name)&&this.registerStockForm.get("cashback_percentage").setValue(Number(this.percentageCalculation(this.registerStockForm.value.cashback_percentage))),"Amount"==(null===(t=this.selectedDiscountType)||void 0===t?void 0:t.name)&&this.registerStockForm.get("discount").setValue(Number(this.percentageCalculation(this.registerStockForm.value.discount))),"Create"==this.buttonStatus?(this.discountConversion(),this.createStockService.create_stock(this.registerStockForm.value).subscribe((function(e){n.toastService.success("Stocks Created Successfully"),n.router.navigate(["stocks"])}))):this.createStockService.update_stock(this.paramId,this.registerStockForm.value).subscribe((function(e){n.toastService.success("Stocks Updated Successfully"),n.router.navigate(["stocks"])}))}},{key:"onChangeDiscount",value:function(){this.flag="Amount"==this.selectedDiscountType.name?!(this.registerStockForm.value.discount<=this.registerStockForm.value.unit_price):!(this.totalCalculatorFromPercentage(this.registerStockForm.value.discount,this.registerStockForm.value.unit_price)<=this.registerStockForm.value.unit_price)}}]),t}()).\u0275fac=function(e){return new(e||B)(s.Mb(c.e),s.Mb(a.a),s.Mb(l.b),s.Mb(R),s.Mb(a.f),s.Mb(k.b),s.Mb(C.a),s.Mb(P.a),s.Mb(T.a))},B.\u0275cmp=s.Gb({type:B,selectors:[["app-add-stock"]],decls:102,vars:37,consts:[[1,"card"],[1,"card-body"],["class","card-title",4,"ngIf"],[1,"forms-sample",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"label-text"],["bindLabel","name","bindValue","id","placeholder","Select Product","formControlName","product_id",3,"items","addTag","hideSelected","virtualScroll","change","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Variation","formControlName","variation_id",3,"items","hideSelected","virtualScroll","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Shop","formControlName","vendor_id",3,"items","hideSelected","virtualScroll","keyup","clear"],["bindLabel","name","bindValue","id","placeholder","Select Supplier","formControlName","supplier_id",3,"items","hideSelected","virtualScroll","keyup","clear"],[1,"col-md-4"],["for","Quantity"],["type","number","id","Quantity","placeholder","Quantity","formControlName","quantity","min","0",1,"form-control"],["for","Price"],["type","number","id","Price","placeholder","Price","formControlName","unit_price","min","0",1,"form-control",3,"change"],["for","retail_price"],["type","number","id","retail_price","placeholder","retail price","formControlName","retail_price","min","0",1,"form-control"],[1,"col-md-6","discount"],["for","discount"],[3,"ngModel","ngModelOptions","change","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["style","font-size: 10px; color: red;",4,"ngIf"],[1,"input-group"],["type","number","id","discount","placeholder","Discount","formControlName","discount",1,"form-control",3,"change","input"],[1,"input-group-prepend"],["class","input-group-text","style","color:#000c17;",4,"ngIf"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"input-helper"],["bsDatepicker","","formControlName","discount_valid_until",1,"form-control",3,"bsConfig","disabled"],["dp","bsDatepicker"],[1,"input-group-append"],[1,"input-group-text",2,"background-color","#0c5460",3,"click"],[1,"far","fa-calendar"],[1,"col-md-6","cashback"],["type","number","id","cashback","placeholder","cashback","formControlName","cashback_percentage",1,"form-control",3,"change","input"],[1,"modal-footer"],["type","button","class","btn btn-gradient-success btn-icon-text",3,"disabled","click",4,"ngIf"],["type","button","routerLink","/stocks",1,"btn","btn-gradient-danger","btn-icon-text"],[1,"mdi","mdi-close","btn-icon-prepend"],[1,"card-title"],[3,"ngValue"],[2,"font-size","10px","color","red"],[1,"input-group-text",2,"color","#000c17"],["type","button",1,"btn","btn-gradient-success","btn-icon-text",3,"disabled","click"],[1,"mdi","mdi-file-check","btn-icon-prepend"]],template:function(e,t){if(1&e){var n=s.Tb();s.Sb(0,"div",0),s.Sb(1,"div",1),s.Jc(2,O,2,0,"h4",2),s.Jc(3,E,2,0,"h4",2),s.Sb(4,"form",3),s.Sb(5,"div",4),s.Sb(6,"div",5),s.Sb(7,"div",6),s.Sb(8,"label",7),s.Lc(9,"Select Product"),s.Sb(10,"sup"),s.Lc(11,"*"),s.Rb(),s.Rb(),s.Sb(12,"ng-select",8),s.dc("change",(function(e){return t.onProductChange(e)}))("keyup",(function(e){return t.onSearchProduct(e)}))("clear",(function(){return t.getProducts()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(13,"div",5),s.Sb(14,"div",6),s.Sb(15,"label",7),s.Lc(16,"Select Variations"),s.Rb(),s.Sb(17,"ng-select",9),s.dc("keyup",(function(e){return t.onSearchVariation(e)}))("clear",(function(){return t.getVariations()})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(18,"div",4),s.Sb(19,"div",5),s.Sb(20,"div",6),s.Sb(21,"label",7),s.Lc(22,"Select Shop"),s.Sb(23,"sup"),s.Lc(24,"*"),s.Rb(),s.Rb(),s.Sb(25,"ng-select",10),s.dc("keyup",(function(e){return t.onSearchShop(e)}))("clear",(function(){return t.getShops()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(26,"div",5),s.Sb(27,"div",6),s.Sb(28,"label",7),s.Lc(29,"Select Supplier"),s.Rb(),s.Sb(30,"ng-select",11),s.dc("keyup",(function(e){return t.onSearchShop(e)}))("clear",(function(){return t.getShops()})),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(31,"div",4),s.Sb(32,"div",12),s.Sb(33,"div",6),s.Sb(34,"label",13),s.Lc(35,"Quantity"),s.Sb(36,"sup"),s.Lc(37,"*"),s.Rb(),s.Rb(),s.Nb(38,"input",14),s.Rb(),s.Rb(),s.Sb(39,"div",12),s.Sb(40,"div",6),s.Sb(41,"label",15),s.Lc(42,"Unit Price"),s.Sb(43,"sup"),s.Lc(44,"*"),s.Rb(),s.Rb(),s.Sb(45,"input",16),s.dc("change",(function(){return t.onChangeDiscount()})),s.Rb(),s.Rb(),s.Rb(),s.Sb(46,"div",12),s.Sb(47,"div",6),s.Sb(48,"label",17),s.Lc(49,"Retail Price"),s.Sb(50,"sup"),s.Lc(51,"*"),s.Rb(),s.Rb(),s.Nb(52,"input",18),s.Rb(),s.Rb(),s.Rb(),s.Sb(53,"div",4),s.Sb(54,"div",19),s.Sb(55,"div",6),s.Sb(56,"label",20),s.Lc(57,"Discount "),s.Sb(58,"select",21),s.dc("change",(function(){return t.onChangeDiscountType()}))("ngModelChange",(function(e){return t.selectedDiscountType=e})),s.Jc(59,I,2,2,"option",22),s.Rb(),s.Rb(),s.Sb(60,"div"),s.Jc(61,A,2,1,"label",23),s.Sb(62,"div",24),s.Sb(63,"input",25),s.dc("change",(function(){return t.onChangeDiscount()}))("input",(function(e){return t.onDiscountTyping(e)})),s.Rb(),s.Sb(64,"div",26),s.Jc(65,M,2,0,"div",27),s.Jc(66,N,2,0,"div",27),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(67,"div",5),s.Sb(68,"div",6),s.Sb(69,"div",28),s.Sb(70,"label",29),s.Sb(71,"input",30),s.dc("ngModelChange",(function(e){return t.checked=e})),s.Rb(),s.Lc(72," Discount Valid until "),s.Nb(73,"i",31),s.Rb(),s.Rb(),s.Sb(74,"div",24),s.Nb(75,"input",32,33),s.Sb(77,"div",34),s.Sb(78,"div",35),s.dc("click",(function(){return s.zc(n),s.wc(76).toggle()})),s.Nb(79,"i",36),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(80,"div",4),s.Sb(81,"div",37),s.Sb(82,"div",6),s.Sb(83,"label",20),s.Lc(84,"CashBack "),s.Sb(85,"select",21),s.dc("change",(function(){return t.onChangeCashBackType()}))("ngModelChange",(function(e){return t.selectedCashBackType=e})),s.Jc(86,z,2,2,"option",22),s.Rb(),s.Rb(),s.Sb(87,"div"),s.Sb(88,"div",24),s.Sb(89,"input",38),s.dc("change",(function(){return t.onChangeCashBack()}))("input",(function(e){return t.onCashBackTyping(e)})),s.Rb(),s.Sb(90,"div",26),s.Jc(91,F,2,0,"div",27),s.Jc(92,D,2,0,"div",27),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Nb(93,"div",5),s.Rb(),s.Sb(94,"div",4),s.Nb(95,"div",5),s.Nb(96,"div",5),s.Rb(),s.Sb(97,"div",39),s.Jc(98,x,3,2,"button",40),s.Sb(99,"button",41),s.Nb(100,"i",42),s.Lc(101," Cancel "),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&e){var i=s.wc(76);s.zb(2),s.mc("ngIf",null==t.paramId),s.zb(1),s.mc("ngIf",null!=t.paramId),s.zb(1),s.mc("formGroup",t.registerStockForm),s.zb(8),s.mc("items",t.products)("addTag",t.addProducts)("hideSelected",!0)("virtualScroll",!0),s.zb(5),s.mc("items",t.variations)("hideSelected",!0)("virtualScroll",!0),s.zb(8),s.mc("items",t.shops)("hideSelected",!0)("virtualScroll",!0),s.zb(5),s.mc("items",t.shops)("hideSelected",!0)("virtualScroll",!0),s.zb(28),s.mc("ngModel",t.selectedDiscountType)("ngModelOptions",s.pc(33,H)),s.zb(1),s.mc("ngForOf",t.types),s.zb(2),s.mc("ngIf",t.flag),s.zb(4),s.mc("ngIf","Amount"==t.selectedDiscountType.name),s.zb(1),s.mc("ngIf","Percentage"==t.selectedDiscountType.name),s.zb(5),s.mc("ngModel",t.checked)("ngModelOptions",s.pc(34,H)),s.zb(4),s.mc("bsConfig",s.pc(35,J))("disabled",!t.checked),s.zb(3),s.Ab("aria-expanded",i.isOpen),s.zb(7),s.mc("ngModel",t.selectedCashBackType)("ngModelOptions",s.pc(36,H)),s.zb(1),s.mc("ngForOf",t.types),s.zb(5),s.mc("ngIf","Amount"==t.selectedCashBackType.name),s.zb(1),s.mc("ngIf","Percentage"==t.selectedCashBackType.name),s.zb(6),s.mc("ngIf",!t.paramId)}},directives:[c.m,u.x,u.o,u.h,L.a,u.n,u.f,u.s,u.c,u.u,u.q,c.l,u.a,w.b,w.a,a.g,u.r,u.w],styles:[".form-check[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}.form-check-label[_ngcontent-%COMP%]{line-height:.875rem;min-height:0;padding-bottom:6px}.modal-footer[_ngcontent-%COMP%]{border-top:none}.card-title[_ngcontent-%COMP%]{margin-bottom:1.75rem}sup[_ngcontent-%COMP%]{color:#ca371d}.cashback[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .cashback[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .discount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .discount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.cashback[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .discount[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),B),Y=[{path:"",component:r.a},{path:"add",component:q},{path:"add/:id",component:q}],j=((V=function t(){e(this,t)}).\u0275mod=s.Kb({type:V}),V.\u0275inj=s.Jb({factory:function(e){return new(e||V)},imports:[[a.j.forChild(Y)],a.j]}),V),G=o("G0yt"),K=o("a3+x"),$=((U=function t(){e(this,t)}).\u0275mod=s.Kb({type:U}),U.\u0275inj=s.Jb({factory:function(e){return new(e||U)},imports:[[c.c,j,G.k,L.b,u.j,K.b,u.t,w.c.forRoot(),w.d.forRoot()]]}),U)},yU8x:function(t,i,o){"use strict";o.d(i,"a",(function(){return w}));var c,a=o("8Y7J"),r=o("8yjs"),s=o("mb36"),l=o("EApP"),u=o("IheW"),d=o("iInd"),b=o("lX9O"),h=((c=function(){function t(n,i,o,c,a,r){e(this,t),this.apiEndPointsService=n,this.baseService=i,this.toastr=o,this.http=c,this.router=a,this.authService=r,this.accessToken="&access_token="+this.authService.getAccessToken(),this._accessToken="?access_token="+this.authService.getAccessToken()}return n(t,[{key:"get_stocks",value:function(e,t){return this.http.get(this.apiEndPointsService.STOCK.FETCH(e,t)+this.accessToken)}},{key:"get_stocks_by_id",value:function(e,t,n){return this.http.get(this.apiEndPointsService.STOCK.FETCH_BY_ID(e,t,n)+this.accessToken)}},{key:"search_stocks",value:function(e){return this.http.get(this.apiEndPointsService.STOCK.SEARCH(e)+this.accessToken)}},{key:"search_stocks_by_id",value:function(e,t){return this.http.get(this.apiEndPointsService.STOCK.SEARCH_WITH_ID(e,t)+this.accessToken)}},{key:"remove_stock",value:function(e){return this.http.delete(this.apiEndPointsService.STOCK.DELETE(e)+this._accessToken)}}]),t}()).\u0275fac=function(e){return new(e||c)(a.ac(r.a),a.ac(s.a),a.ac(l.b),a.ac(u.a),a.ac(d.f),a.ac(b.a))},c.\u0275prov=a.Ib({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=o("SVse"),v=o("s7LF"),g=o("G0yt"),S=o("a3+x");function f(e,t){if(1&e&&(a.Sb(0,"span"),a.Lc(1),a.Rb()),2&e){var n=a.hc();a.zb(1),a.Nc(" of ",null==n.selectedShopName?null:n.selectedShopName.name,"")}}var m=function(e){return["/products/add/",e]},k=function(e){return["/shops/details/",e]},_=function(e){return["/stocks/add",e]};function y(e,t){if(1&e){var n=a.Tb();a.Sb(0,"tr"),a.Sb(1,"td"),a.Sb(2,"span",24),a.Lc(3),a.Rb(),a.Rb(),a.Sb(4,"td"),a.Sb(5,"span",24),a.Lc(6),a.Rb(),a.Rb(),a.Sb(7,"td"),a.Lc(8),a.Rb(),a.Sb(9,"td"),a.Lc(10),a.Rb(),a.Sb(11,"td"),a.Lc(12),a.Rb(),a.Sb(13,"td"),a.Lc(14),a.Rb(),a.Sb(15,"td"),a.Lc(16),a.Rb(),a.Sb(17,"td"),a.Lc(18),a.Rb(),a.Sb(19,"td"),a.Sb(20,"a",25),a.Sb(21,"i",26),a.Lc(22,"\ue254"),a.Rb(),a.Rb(),a.Rb(),a.Sb(23,"td",27),a.Sb(24,"button",28),a.dc("confirm",(function(){a.zc(n);var e=t.$implicit;return a.hc(2).onRemoveStock(e)}))("cancel",(function(){return a.zc(n),a.hc(2).cancelClicked=!0})),a.Sb(25,"i",26),a.Lc(26,"\ue872"),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){var i=t.$implicit,o=a.hc(2);a.zb(2),a.mc("routerLink",a.qc(13,m,null==i?null:i.product_id)),a.zb(1),a.Mc(null==i?null:i.product_name),a.zb(2),a.mc("routerLink",a.qc(15,k,null==i?null:i.vendor_id)),a.zb(1),a.Mc(null==i?null:i.vendor_name),a.zb(2),a.Mc(null!=i&&i.is_frozen_item?"Frozen":"Unfrozen"),a.zb(2),a.Mc(null==i?null:i.quantity),a.zb(2),a.Mc(null==i?null:i.retail_price),a.zb(2),a.Nc("",null==i?null:i.cashback_percentage,"%"),a.zb(2),a.Nc("",null==i?null:i.discount," %"),a.zb(2),a.Mc(null!=i&&i.discount_valid_until?o.formatDate(null==i?null:i.discount_valid_until):""),a.zb(2),a.mc("routerLink",a.qc(17,_,null==i?null:i.id)),a.zb(4),a.mc("popoverTitle",o.popoverTitle)("popoverMessage",o.popoverMessage)}}function R(e,t){if(1&e&&(a.Sb(0,"div",20),a.Sb(1,"table",21),a.Sb(2,"thead",22),a.Sb(3,"tr"),a.Sb(4,"th"),a.Lc(5," Product Name "),a.Rb(),a.Sb(6,"th"),a.Lc(7," Vendor "),a.Rb(),a.Sb(8,"th"),a.Lc(9," Is Frozen "),a.Rb(),a.Sb(10,"th"),a.Lc(11," Quantity "),a.Rb(),a.Sb(12,"th"),a.Lc(13," Retail Price "),a.Rb(),a.Sb(14,"th"),a.Lc(15," CashBacks "),a.Rb(),a.Sb(16,"th"),a.Lc(17," Discount "),a.Rb(),a.Sb(18,"th"),a.Lc(19," Discount Validity "),a.Rb(),a.Sb(20,"th"),a.Lc(21," Update "),a.Rb(),a.Sb(22,"th"),a.Lc(23," Delete "),a.Rb(),a.Rb(),a.Rb(),a.Sb(24,"tbody"),a.Jc(25,y,27,19,"tr",23),a.Rb(),a.Rb(),a.Rb()),2&e){var n=a.hc();a.zb(25),a.mc("ngForOf",null==n.stocks?null:n.stocks.content)}}function C(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",29),a.Sb(2,"div",30),a.Sb(3,"div",31),a.Sb(4,"span",32),a.Lc(5,"Loading..."),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb())}function P(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",29),a.Sb(2,"div",33),a.Nb(3,"img",34),a.Rb(),a.Rb(),a.Rb())}var T,L=function(){return["/stocks/add"]},w=((T=function(){function t(n,i,o){e(this,t),this.stockService=n,this.baseService=i,this.toastr=o,this.loading=!0,this.size=10,this.page=1,this.search_key="",this.popoverTitle="Are you sure?",this.popoverMessage="Are you really sure you want to delete this?",this.cancelClicked=!1}return n(t,[{key:"ngOnInit",value:function(){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size)}},{key:"ngOnChanges",value:function(){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size)}},{key:"get_stock",value:function(e,t){var n=this;this.loading=!0,this.stockService.get_stocks(e,t).subscribe((function(e){n.stocks=e,n.loading=!1}),(function(e){n.loading=!1,n.baseService.handleError(e)}))}},{key:"get_stock_by_id",value:function(e,t,n){var i=this;this.loading=!0,this.stockService.get_stocks_by_id(e,t,n).subscribe((function(e){i.stocks=e,i.loading=!1}),(function(e){i.loading=!1,i.baseService.handleError(e)}))}},{key:"onPaginateChange",value:function(e){this.selectedShopId?this.get_stock_by_id(this.selectedShopId,e-1,this.size):this.get_stock(e-1,this.size)}},{key:"searchStock",value:function(){var e=this;this.selectedShopId?""!=this.search_key?(this.loading=!0,this.stockService.search_stocks_by_id(this.selectedShopId,this.search_key).subscribe((function(t){e.stocks=t,e.loading=!1}),(function(t){e.baseService.handleError(t),e.loading=!1}))):this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):""!=this.search_key?(this.loading=!0,this.stockService.search_stocks(this.search_key).subscribe((function(t){e.stocks=t,e.loading=!1}),(function(t){e.baseService.handleError(t),e.loading=!1}))):this.get_stock(this.page-1,this.size)}},{key:"_searchStock",value:function(e){""==e&&(this.selectedShopId?this.get_stock_by_id(this.selectedShopId,this.page-1,this.size):this.get_stock(this.page-1,this.size))}},{key:"onRemoveStock",value:function(e){var t=this;this.stockService.remove_stock(e.id).subscribe((function(e){t.toastr.success("Deleted Successfully!",""),t.ngOnInit()}),(function(e){t.baseService.handleError(e)}))}},{key:"formatDate",value:function(e){var t=""+(new Date(e).getMonth()+1),n=""+new Date(e).getDate(),i=new Date(e).getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,i].join("-")}}]),t}()).\u0275fac=function(e){return new(e||T)(a.Mb(h),a.Mb(s.a),a.Mb(l.b))},T.\u0275cmp=a.Gb({type:T,selectors:[["app-stock-list"]],inputs:{selectedShopName:"selectedShopName",selectedShopId:"selectedShopId"},features:[a.xb],decls:26,vars:11,consts:[[1,"row"],[1,"col-lg-12","grid-margin","stretch-card","mb-0"],[1,"card"],[1,"card-body"],[1,"card-title","row"],[1,"col-md-2"],["type","button",1,"btn","btn-gradient-success","btn-rounded","btn-fw","btn-sm",3,"routerLink"],[1,"col-md-6","text-center"],[4,"ngIf"],[1,"col-md-4"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","search by product name","aria-label","stock username",1,"form-control",3,"ngModel","keyup.enter","input","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","btn-gradient-primary",3,"click"],["class","table-responsive pt-3",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-lg-12","grid-margin","stretch-card"],[1,"card-body","pt-0"],["aria-label","Default pagination",1,"d-flex","justify-content-center",3,"collectionSize","pageSize","page","maxSize","pageChange"],[1,"table-responsive","pt-3"],[1,"table","table-striped","table-bordered"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[1,"name",3,"routerLink"],["title","Edit","data-toggle","tooltip",1,"edit",3,"routerLink"],[1,"material-icons"],[1,"p-0"],["mwlConfirmationPopover","","placement","left",1,"btn","delete",3,"popoverTitle","popoverMessage","confirm","cancel"],[1,"col-12"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","3rem","height","3rem"],[1,"sr-only"],[1,"text-center"],["src","./assets/icon/nodatafound.jpg","alt","not found image",1,"rounded",2,"width","400px","height","300px"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Sb(4,"div",4),a.Sb(5,"div",5),a.Sb(6,"button",6),a.Lc(7,"Add Stock "),a.Rb(),a.Rb(),a.Sb(8,"div",7),a.Sb(9,"h2"),a.Lc(10,"Stocks "),a.Jc(11,f,2,1,"span",8),a.Rb(),a.Rb(),a.Sb(12,"div",9),a.Sb(13,"div",10),a.Sb(14,"div",11),a.Sb(15,"input",12),a.dc("keyup.enter",(function(){return t.searchStock()}))("input",(function(e){return t._searchStock(e.target.value)}))("ngModelChange",(function(e){return t.search_key=e})),a.Rb(),a.Sb(16,"div",13),a.Sb(17,"button",14),a.dc("click",(function(){return t.searchStock()})),a.Lc(18,"Search"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Jc(19,R,26,1,"div",15),a.Jc(20,C,6,0,"div",16),a.Jc(21,P,4,0,"div",16),a.Rb(),a.Rb(),a.Rb(),a.Sb(22,"div",17),a.Sb(23,"div",2),a.Sb(24,"div",18),a.Sb(25,"ngb-pagination",19),a.dc("pageChange",(function(e){return t.page=e}))("pageChange",(function(e){return t.onPaginateChange(e)})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.zb(6),a.mc("routerLink",a.pc(10,L)),a.zb(5),a.mc("ngIf",t.selectedShopName),a.zb(4),a.mc("ngModel",t.search_key),a.zb(4),a.mc("ngIf",0==t.loading),a.zb(1),a.mc("ngIf",1==t.loading),a.zb(1),a.mc("ngIf",0==(null==t.stocks?null:t.stocks.totalElements)),a.zb(4),a.mc("collectionSize",null==t.stocks?null:t.stocks.totalElements)("pageSize",t.size)("page",t.page)("maxSize",6))},directives:[d.g,p.m,v.c,v.n,v.q,g.j,p.l,d.i,S.a],styles:[".card[_ngcontent-%COMP%]{border-radius:0}h2[_ngcontent-%COMP%]{font-size:26px;font-width:900}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a.edit[_ngcontent-%COMP%]{color:#ffc107;cursor:pointer}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{color:#e34724;cursor:pointer}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.name[_ngcontent-%COMP%]{cursor:pointer;color:#0b7dda}"]}),T)}}])}();